import"../chunks/CWj6FrbW.js";import{i as se}from"../chunks/DBRSZtkI.js";import{o as oe,s as w}from"../chunks/CdzGu8ER.js";import{c as L,f as U,a as l,p as ie,b as le,e as de,d as u,s as p,$ as ne,i as s,g as t,h as a,r as e,m as N,t as D,j as I,n as K}from"../chunks/CbRa-Z4u.js";import{i as J}from"../chunks/CoDRCLiZ.js";import{I as ve,s as ce,e as pe,i as ge}from"../chunks/DZIrD1K_.js";import{h as fe}from"../chunks/Bj3l4WMm.js";import{p as Q}from"../chunks/VVSrSIoj.js";import{C as ue}from"../chunks/CmruH-jB.js";import{l as be,s as xe}from"../chunks/BjUZiTXz.js";function me(A,S){const C=be(S,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"}],["path",{d:"M12 9v4"}],["path",{d:"M12 17h.01"}]];ve(A,xe({name:"triangle-alert"},()=>C,{get iconNode(){return $},children:(k,d)=>{var b=L(),j=U(b);ce(j,S,"default",{}),l(k,b)},$$slots:{default:!0}}))}var he=u('<div class="flex items-center justify-center py-12"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"></div></div>'),_e=u('<div class="bg-red-50 border border-red-200 rounded-lg p-4"><p class="text-sm text-red-800"> </p></div>'),ye=u('<div class="bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center"><!> <p class="text-gray-500">No pending conflicts. All syncs are clean!</p></div>'),we=u('<div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6"><div class="flex items-start gap-4"><div class="p-3 bg-yellow-100 rounded-lg"><!></div> <div class="flex-1"><h3 class="text-lg font-semibold text-gray-900 mb-1"> </h3> <p class="text-sm text-gray-600 mb-2"> </p> <p class="text-sm text-gray-500">This rule has been modified in both Elastic and Git. Choose which version to keep.</p></div> <button class="px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors">Resolve</button></div></div>'),Ce=u('<div class="space-y-4"></div>'),$e=u('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"><div class="bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden"><div class="px-6 py-4 border-b border-gray-200"><h2 class="text-xl font-semibold text-gray-900"> </h2></div> <div class="px-6 py-4 overflow-y-auto max-h-[60vh]"><div class="grid grid-cols-2 gap-6"><div><div class="flex items-center gap-2 mb-3"><h3 class="text-lg font-semibold text-gray-900">Elastic Version</h3> <span class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded">Source</span></div> <div class="bg-gray-50 rounded-lg p-4 border border-gray-200"><pre class="text-xs text-gray-700 whitespace-pre-wrap overflow-x-auto"> </pre></div></div> <div><div class="flex items-center gap-2 mb-3"><h3 class="text-lg font-semibold text-gray-900">Git Version</h3> <span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded">Repository</span></div> <div class="bg-gray-50 rounded-lg p-4 border border-gray-200"><pre class="text-xs text-gray-700 whitespace-pre-wrap overflow-x-auto"> </pre></div></div></div></div> <div class="px-6 py-4 border-t border-gray-200 flex items-center justify-end gap-3"><button class="px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">Cancel</button> <button class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors">Use Git Version</button> <button class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">Use Elastic Version</button></div></div></div>'),ke=u('<div class="space-y-6"><div><h1 class="text-3xl font-bold text-gray-900">Conflicts</h1> <p class="mt-1 text-sm text-gray-500">Resolve synchronization conflicts between Elastic and Git</p></div> <!></div> <!>',1);function Ve(A,S){ie(S,!1);let C=N([]),$=N(!0),k=N(""),d=N(null),b=N(!1);oe(async()=>{await j()});async function j(){try{p($,!0),p(C,await Q.collection("conflicts").getFullList({filter:'resolution = "pending"',sort:"-created"}))}catch(r){p(k,r.message)}finally{p($,!1)}}function W(r){p(d,r),p(b,!0)}function q(){p(d,null),p(b,!1)}async function B(r){if(a(d))try{if(!(await fetch(`${Q.baseUrl}/api/conflict/resolve`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({conflict_id:a(d).id,resolution:r})})).ok)throw new Error("Failed to resolve conflict");q(),await j()}catch(o){alert(`Error: ${o.message}`)}}se();var H=ke();fe("fz0r3g",r=>{de(()=>{ne.title="Conflicts - Elastic Git Sync"})});var F=U(H),X=s(t(F),2);{var Y=r=>{var o=he();l(r,o)},Z=r=>{var o=L(),G=U(o);{var E=c=>{var i=_e(),g=t(i),f=t(g,!0);e(g),e(i),D(()=>w(f,a(k))),l(c,i)},R=c=>{var i=L(),g=U(i);{var f=n=>{var v=ye(),x=t(v);ue(x,{class:"w-12 h-12 text-green-600 mx-auto mb-4"}),K(2),e(v),l(n,v)},z=n=>{var v=Ce();pe(v,5,()=>a(C),ge,(x,m)=>{var h=we(),O=t(h),_=t(O),T=t(_);me(T,{class:"w-6 h-6 text-yellow-600"}),e(_);var y=s(_,2),M=t(y),P=t(M,!0);e(M);var V=s(M,2),re=t(V);e(V),K(2),e(y);var ae=s(y,2);e(O),e(h),D(()=>{w(P,a(m).rule_name),w(re,`Rule ID: ${a(m).rule_id??""}`)}),I("click",ae,()=>W(a(m))),l(x,h)}),e(v),l(n,v)};J(g,n=>{a(C).length===0?n(f):n(z,!1)},!0)}l(c,i)};J(G,c=>{a(k)?c(E):c(R,!1)},!0)}l(r,o)};J(X,r=>{a($)?r(Y):r(Z,!1)})}e(F);var ee=s(F,2);{var te=r=>{var o=$e(),G=t(o),E=t(G),R=t(E),c=t(R);e(R),e(E);var i=s(E,2),g=t(i),f=t(g),z=s(t(f),2),n=t(z),v=t(n,!0);e(n),e(z),e(f);var x=s(f,2),m=s(t(x),2),h=t(m),O=t(h,!0);e(h),e(m),e(x),e(g),e(i);var _=s(i,2),T=t(_),y=s(T,2),M=s(y,2);e(_),e(G),e(o),D((P,V)=>{w(c,`Resolve Conflict: ${a(d).rule_name??""}`),w(v,P),w(O,V)},[()=>JSON.stringify(a(d).elastic_version,null,2),()=>JSON.stringify(a(d).git_version,null,2)]),I("click",T,q),I("click",y,()=>B("use_git")),I("click",M,()=>B("use_elastic")),l(r,o)};J(ee,r=>{a(b)&&a(d)&&r(te)})}l(A,H),le()}export{Ve as component};
