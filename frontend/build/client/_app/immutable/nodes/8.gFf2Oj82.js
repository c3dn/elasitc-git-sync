import"../chunks/CWj6FrbW.js";import{i as He}from"../chunks/COK2pY8o.js";import{o as Je,s as m}from"../chunks/BnHnlVXU.js";import{c as O,f as Q,a as d,p as Ke,b as Xe,e as Ye,h as t,d as c,s as D,$ as Ze,g as i,n as P,r as e,i as a,m as ne,t as S,j as et,Q as be}from"../chunks/BbuzmxRY.js";import{i as g}from"../chunks/XgF_cVEg.js";import{I as tt,s as at,e as st,d as rt,a as he,b as it,i as nt}from"../chunks/Bm_MFDQ1.js";import{h as ot}from"../chunks/BwaF3Q6U.js";import{p as A}from"../chunks/BVZH3wAp.js";import{P as we}from"../chunks/D_FWaIFH.js";import{l as vt,s as dt}from"../chunks/cVoOpi3M.js";import{S as lt}from"../chunks/CiF83QCe.js";import{T as ct}from"../chunks/-YWqKXAd.js";import{T as je,R as $e}from"../chunks/BB-mXNPS.js";import{G as Ee}from"../chunks/BFn81jTo.js";import{U as pt}from"../chunks/Cl_eLyHP.js";function xt(W,L){const G=vt(L,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5"}],["path",{d:"M3 12A9 3 0 0 0 21 12"}]];tt(W,dt({name:"database"},()=>G,{get iconNode(){return N},children:(T,B)=>{var k=O(),U=Q(k);at(U,L,"default",{}),d(T,k)},$$slots:{default:!0}}))}var mt=c('<div class="flex items-center justify-center py-12"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div></div>'),_t=c('<div class="bg-red-50 border border-red-200 rounded-lg p-4"><p class="text-sm text-red-800"> </p></div>'),ft=c('<div class="card p-12 text-center animate-fade-in"><div class="mb-4"><!></div> <h3 class="text-lg font-medium text-gray-900 mb-2">No projects yet</h3> <p class="text-gray-500 mb-6">Create your first project to start syncing Elastic Security rules with Git.</p> <a href="/projects/new" class="btn inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 hover:shadow-md transition-all"><!> Create Project</a></div>'),gt=c('<p class="text-sm text-gray-500 mt-1 line-clamp-2"> </p>'),ut=c('<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">Export Only</span>'),yt=c('<div class="flex items-start gap-2"><div class="p-1.5 bg-yellow-100 rounded"><!></div> <div class="min-w-0"><div class="text-xs font-medium text-gray-700">Test</div> <div class="text-xs text-gray-500 truncate"> </div> <div class="text-xs text-gray-400 flex items-center gap-1"><!> </div></div></div>'),bt=c('<div class="flex items-center gap-2 text-gray-400"><!> <span class="text-xs">No test env</span></div>'),ht=c('<div class="flex items-center gap-2 text-gray-400"><!> <span class="text-xs text-yellow-600">Elastic to Git</span></div>'),wt=c('<div class="flex items-start gap-2"><div class="p-1.5 bg-green-100 rounded"><!></div> <div class="min-w-0"><div class="text-xs font-medium text-gray-700">Production</div> <div class="text-xs text-gray-500 truncate"> </div> <div class="text-xs text-gray-400 flex items-center gap-1"><!> </div></div></div>'),jt=c('<div class="flex items-center gap-2 text-gray-400"><!> <span class="text-xs">No prod env</span></div>'),$t=c('<div class="card overflow-hidden animate-fade-in"><div class="p-6 border-b border-gray-100"><div class="flex items-start justify-between"><div class="flex-1"><a class="text-lg font-semibold text-gray-900 hover:text-blue-600"> </a> <!></div> <div class="flex items-center gap-1.5"><!> <span> </span></div></div></div> <div class="px-6 py-4 bg-gray-50"><div class="grid grid-cols-2 gap-4"><!> <!></div></div> <div class="px-6 py-3 text-xs text-gray-500 border-t border-gray-100"><div class="flex items-center justify-between"><span><strong>Elastic:</strong> </span> <span><strong>Git:</strong> </span></div></div> <div class="flex items-center gap-2 p-4 border-t border-gray-200 bg-white"><a class="btn flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 hover:shadow-md transition-all text-sm"><!> Manage</a> <button class="btn flex items-center gap-2 px-3 py-2 text-red-600 hover:bg-red-50 border border-red-200 rounded-lg transition-all text-sm"><!></button></div></div>'),Et=c('<div class="grid grid-cols-1 lg:grid-cols-2 gap-6"></div>'),Pt=c('<div class="space-y-6"><div class="flex items-center justify-between animate-fade-in"><div><h1 class="text-3xl font-bold text-gray-900">Projects</h1> <p class="mt-1 text-sm text-gray-500">Manage your Elastic Security rule sync projects</p></div> <a href="/projects/new" class="btn inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 hover:shadow-md transition-all"><!> New Project</a></div> <!></div>');function zt(W,L){Ke(L,!1);let G=ne([]),N=ne(!0),T=ne("");Je(async()=>{await B()});async function B(){try{D(N,!0);const n=await A.collection("projects").getFullList({expand:"elastic_instance,git_repository",sort:"-created"}),o=[];for(const p of n)try{const K=await A.collection("environments").getFullList({filter:`project = "${p.id}"`});o.push({...p,environments:K})}catch{o.push({...p,environments:[]})}D(G,o)}catch(n){D(T,n.message)}finally{D(N,!1)}}function k(n){var o;return(o=n.environments)==null?void 0:o.find(p=>p.name==="test")}function U(n){var o;return(o=n.environments)==null?void 0:o.find(p=>p.name==="production")}async function Pe(n){if(confirm("Are you sure you want to delete this project and all its environments?"))try{const o=await A.collection("environments").getFullList({filter:`project = "${n}"`});for(const p of o)await A.collection("environments").delete(p.id);await A.collection("projects").delete(n),await B()}catch(o){alert(`Error: ${o.message}`)}}He();var H=Pt();ot("rqn88j",n=>{Ye(()=>{Ze.title="Projects - Elastic Git Sync"})});var J=t(H),oe=i(t(J),2),Ge=t(oe);we(Ge,{class:"w-5 h-5"}),P(),e(oe),e(J);var Ne=i(J,2);{var Te=n=>{var o=mt();d(n,o)},ke=n=>{var o=O(),p=Q(o);{var K=b=>{var h=_t(),F=t(h),X=t(F,!0);e(F),e(h),S(()=>m(X,a(T))),d(b,h)},Me=b=>{var h=O(),F=Q(h);{var X=w=>{var u=ft(),M=t(u),v=t(M);xt(v,{class:"w-12 h-12 text-gray-400 mx-auto"}),e(M);var I=i(M,6),j=t(I);we(j,{class:"w-5 h-5"}),P(),e(I),e(u),d(w,u)},Se=w=>{var u=Et();st(u,5,()=>a(G),nt,(M,v,I)=>{var j=$t();rt(j,`animation-delay: ${I*50}ms; opacity: 0;`);var Y=t(j),ve=t(Y),Z=t(ve),q=t(Z),Ae=t(q,!0);e(q);var Le=i(q,2);{var Ue=s=>{var r=gt(),l=t(r,!0);e(r),S(()=>m(l,a(v).description)),d(s,r)};g(Le,s=>{a(v).description&&s(Ue)})}e(Z);var de=i(Z,2),le=t(de);{var Fe=s=>{var r=ut();d(s,r)};g(le,s=>{a(v).sync_mode==="export_only"&&s(Fe)})}var ee=i(le,2),Ie=t(ee,!0);e(ee),e(de),e(ve),e(Y);var te=i(Y,2),ce=t(te),pe=t(ce);{var qe=s=>{const r=be(()=>k(a(v)));var l=yt(),f=t(l),ie=t(f);je(ie,{class:"w-4 h-4 text-yellow-600"}),e(f);var _=i(f,2),x=i(t(_),2),y=t(x,!0);e(x);var $=i(x,2),R=t($);Ee(R,{class:"w-3 h-3"});var V=i(R);e($),e(_),e(l),S(()=>{var E,z;m(y,(E=a(r))==null?void 0:E.elastic_space),m(V,` ${((z=a(r))==null?void 0:z.git_branch)??""}`)}),d(s,l)},Ce=s=>{var r=bt(),l=t(r);je(l,{class:"w-4 h-4"}),P(2),e(r),d(s,r)};g(pe,s=>{k(a(v))?s(qe):s(Ce,!1)})}var Re=i(pe,2);{var Ve=s=>{var r=ht(),l=t(r);pt(l,{class:"w-4 h-4 text-yellow-500"}),P(2),e(r),d(s,r)},ze=s=>{var r=O(),l=Q(r);{var f=_=>{const x=be(()=>U(a(v)));var y=wt(),$=t(y),R=t($);$e(R,{class:"w-4 h-4 text-green-600"}),e($);var V=i($,2),E=i(t(V),2),z=t(E,!0);e(E);var fe=i(E,2),ge=t(fe);Ee(ge,{class:"w-3 h-3"});var Be=i(ge);e(fe),e(V),e(y),S(()=>{var ue,ye;m(z,(ue=a(x))==null?void 0:ue.elastic_space),m(Be,` ${((ye=a(x))==null?void 0:ye.git_branch)??""}`)}),d(_,y)},ie=_=>{var x=jt(),y=t(x);$e(y,{class:"w-4 h-4"}),P(2),e(x),d(_,x)};g(l,_=>{U(a(v))?_(f):_(ie,!1)},!0)}d(s,r)};g(Re,s=>{a(v).sync_mode==="export_only"?s(Ve):s(ze,!1)})}e(ce),e(te);var ae=i(te,2),xe=t(ae),se=t(xe),De=i(t(se));e(se);var me=i(se,2),Oe=i(t(me));e(me),e(xe),e(ae);var _e=i(ae,2),C=t(_e),Qe=t(C);lt(Qe,{class:"w-4 h-4"}),P(),e(C);var re=i(C,2),We=t(re);ct(We,{class:"w-4 h-4"}),e(re),e(_e),e(j),S(()=>{var s,r,l,f;he(q,"href",`/projects/${a(v).id??""}`),m(Ae,a(v).name),it(ee,1,`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium
									${a(v).is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`),m(Ie,a(v).is_active?"Active":"Inactive"),m(De,` ${(((r=(s=a(v).expand)==null?void 0:s.elastic_instance)==null?void 0:r.name)||"Unknown")??""}`),m(Oe,` ${(((f=(l=a(v).expand)==null?void 0:l.git_repository)==null?void 0:f.name)||"Unknown")??""}`),he(C,"href",`/projects/${a(v).id??""}`)}),et("click",re,()=>Pe(a(v).id)),d(M,j)}),e(u),d(w,u)};g(F,w=>{a(G).length===0?w(X):w(Se,!1)},!0)}d(b,h)};g(p,b=>{a(T)?b(K):b(Me,!1)},!0)}d(n,o)};g(Ne,n=>{a(N)?n(Te):n(ke,!1)})}e(H),d(W,H),Xe()}export{zt as component};
