import"../chunks/CWj6FrbW.js";import{i as bt}from"../chunks/Dl2LfGm4.js";import{o as ft,s as c}from"../chunks/O7RWNxBF.js";import{c as W,f as L,a as l,p as kt,t as w,i as e,j,b as ht,e as wt,h as r,g as s,d as p,s as n,$ as jt,n as V,r as t,q as Ct,m as y}from"../chunks/C9NYA0Nw.js";import{i as g}from"../chunks/D2ldot_M.js";import{I as $t,s as Rt,c as At,r as St,e as Ft,a as Dt,i as Pt}from"../chunks/rMS1oNTx.js";import{c as Ut}from"../chunks/CqRNeN1-.js";import{h as Bt}from"../chunks/k5AYXn5z.js";import{b as It}from"../chunks/DkcqxK1V.js";import{p as Mt,a as zt}from"../chunks/BUCyip3L.js";import{l as Nt,s as Tt}from"../chunks/Cs0PMOxO.js";import{S as Te,U as Et}from"../chunks/Cot_wfMu.js";import{f as Ee}from"../chunks/BTYcXCPL.js";import{C as he}from"../chunks/DASHcske.js";import{C as we}from"../chunks/DJoU24lj.js";import{C as Lt}from"../chunks/CTPR9Tm-.js";import{D as Ot,G as Gt}from"../chunks/xUIdyWZf.js";import{U as qt}from"../chunks/zdIQ9pKd.js";import{C as Ht}from"../chunks/BSZq3HO4.js";import{C as Jt}from"../chunks/8Q2aHwtb.js";function Kt(X,O){const U=Nt(O,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"}]];$t(X,Tt({name:"filter"},()=>U,{get iconNode(){return B},children:(m,v)=>{var G=W(),C=L(G);Rt(C,O,"default",{}),l(m,G)},$$slots:{default:!0}}))}var Qt=p('<button class="px-3 py-1.5 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 transition-colors">Clear</button>'),Vt=p('<div class="flex items-center justify-center py-12"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"></div></div>'),Wt=p('<div class="bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4"><p class="text-sm text-red-800 dark:text-red-200"> </p></div>'),Xt=p('<div class="card p-12 text-center animate-fade-in" style="animation-delay: 100ms; opacity: 0;"><!> <p class="text-gray-500 dark:text-gray-400 font-medium">No audit log entries yet</p> <p class="text-sm text-gray-400 dark:text-gray-500 mt-1">Actions like syncs, rule approvals, and rejections will appear here.</p></div>'),Yt=p('<span class="inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400"><!> Success</span>'),Zt=p('<span class="inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"><!> Error</span>'),er=p('<div class="mt-2 text-xs text-red-600 dark:text-red-400"><span class="font-medium">Error:</span> </div>'),tr=p('<tr class="bg-gray-50 dark:bg-gray-800/50"><td colspan="7" class="px-6 py-3"><div class="text-xs font-medium text-gray-500 dark:text-gray-400 mb-1">Details</div> <pre class="text-xs text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded p-3 overflow-x-auto"> </pre> <!></td></tr>'),rr=p('<tr class="hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors cursor-pointer"><td class="px-4 py-3"><!></td><td class="px-4 py-3 whitespace-nowrap"><div class="text-sm text-gray-900 dark:text-gray-100"> </div> <div class="text-xs text-gray-500 dark:text-gray-400"> </div></td><td class="px-4 py-3 whitespace-nowrap"><div class="flex items-center gap-2"><div class="w-6 h-6 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center flex-shrink-0"><!></div> <span class="text-sm font-medium text-gray-900 dark:text-gray-100"> </span></div></td><td class="px-4 py-3 whitespace-nowrap"><span><!> </span></td><td class="px-4 py-3"><div class="text-sm text-gray-900 dark:text-gray-100 truncate max-w-[200px]"> </div> <div class="text-xs text-gray-500 dark:text-gray-400"> </div></td><td class="px-4 py-3 whitespace-nowrap"><span class="text-sm text-gray-700 dark:text-gray-300"> </span></td><td class="px-4 py-3 whitespace-nowrap"><!></td></tr> <!>',1),ar=p('<div class="flex items-center justify-between px-6 py-3 border-t border-gray-200 dark:border-gray-700"><div class="text-xs text-gray-500 dark:text-gray-400"> </div> <div class="flex items-center gap-1"><button class="px-3 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed text-gray-700 dark:text-gray-300 transition-colors">Previous</button> <button class="px-3 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed text-gray-700 dark:text-gray-300 transition-colors">Next</button></div></div>'),sr=p('<div class="card overflow-hidden animate-fade-in" style="animation-delay: 100ms; opacity: 0;"><div class="overflow-x-auto"><table class="w-full"><thead class="bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700"><tr><th class="w-8 px-4 py-3"></th><th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Time</th><th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">User</th><th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Action</th><th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Resource</th><th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Project</th><th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Status</th></tr></thead><tbody class="divide-y divide-gray-200 dark:divide-gray-700"></tbody></table></div> <!></div>'),dr=p('<div class="space-y-6"><div class="animate-fade-in"><h1 class="text-3xl font-bold text-gray-900 dark:text-gray-100">Audit Log</h1> <p class="mt-1 text-sm text-gray-500 dark:text-gray-400">Track who did what and when across your projects</p></div> <div class="card p-4 animate-fade-in" style="animation-delay: 50ms; opacity: 0;"><div class="flex items-center gap-4 flex-wrap"><div class="flex items-center gap-2"><!> <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Filters</span></div> <select class="px-3 py-1.5 text-sm border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"><option>All Actions</option><option>Sync Triggered</option><option>Rule Approved</option><option>Rule Rejected</option><option>Bulk Approved</option><option>Bulk Rejected</option><option>MR Created</option><option>Baseline Init</option><option>Change Detected</option></select> <input type="text" placeholder="Filter by user..." class="px-3 py-1.5 text-sm border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent w-48"/> <button class="px-3 py-1.5 text-sm bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors">Apply</button> <!> <div class="ml-auto text-xs text-gray-500 dark:text-gray-400"> </div></div></div> <!></div>');function $r(X,O){kt(O,!1);let U=y([]),B=y(!0),m=y(""),v=y(1),G=50,C=y(0),q=y(0),b=y(""),$=y(""),f=y(new Set);const Le={sync_triggered:"Sync Triggered",rule_approved:"Rule Approved",rule_rejected:"Rule Rejected",bulk_approved:"Bulk Approved",bulk_rejected:"Bulk Rejected",mr_created:"MR Created",baseline_initialized:"Baseline Init",change_detected:"Change Detected"},Oe={sync_triggered:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400",rule_approved:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",rule_rejected:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400",bulk_approved:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",bulk_rejected:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400",mr_created:"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400",baseline_initialized:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-400",change_detected:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400"};function Ge(a){return{sync_triggered:qt,rule_approved:he,rule_rejected:we,bulk_approved:he,bulk_rejected:we,mr_created:Gt,baseline_initialized:Ot,change_detected:Lt}[a]||Te}ft(async()=>{await H()});async function H(){try{n(B,!0),n(m,"");let a=`${Mt.baseUrl}/api/audit-logs?page=${e(v)}&per_page=${G}`;e(b)&&(a+=`&action=${e(b)}`),e($)&&(a+=`&user=${encodeURIComponent(e($))}`);const k=await(await zt(a)).json();k.success?(n(U,k.items||[]),n(C,k.total||0),n(q,k.total_pages||0)):n(m,k.message||"Failed to load audit logs")}catch(a){n(m,a.message)}finally{n(B,!1)}}function Y(){n(v,1),H()}function qe(){n(b,""),n($,""),n(v,1),H()}function je(a){n(v,a),H()}function He(a){e(f).has(a)?e(f).delete(a):e(f).add(a),n(f,e(f))}function Je(a){if(!a||Object.keys(a).length===0)return"";try{return JSON.stringify(a,null,2)}catch{return String(a)}}bt();var Z=dr();Bt("1qyu7y8",a=>{wt(()=>{jt.title="Audit Log - Elastic Git Sync"})});var ee=s(r(Z),2),Ce=r(ee),te=r(Ce),Ke=r(te);Kt(Ke,{class:"w-4 h-4 text-gray-400"}),V(2),t(te);var I=s(te,2);w(()=>{e(b),Ct(()=>{})});var re=r(I);re.value=re.__value="";var ae=s(re);ae.value=ae.__value="sync_triggered";var se=s(ae);se.value=se.__value="rule_approved";var de=s(se);de.value=de.__value="rule_rejected";var oe=s(de);oe.value=oe.__value="bulk_approved";var ie=s(oe);ie.value=ie.__value="bulk_rejected";var ne=s(ie);ne.value=ne.__value="mr_created";var le=s(ne);le.value=le.__value="baseline_initialized";var $e=s(le);$e.value=$e.__value="change_detected",t(I);var J=s(I,2);St(J);var Re=s(J,2),Ae=s(Re,2);{var Qe=a=>{var x=Qt();j("click",x,qe),l(a,x)};g(Ae,a=>{(e(b)||e($))&&a(Qe)})}var Se=s(Ae,2),Ve=r(Se);t(Se),t(Ce),t(ee);var We=s(ee,2);{var Xe=a=>{var x=Vt();l(a,x)},Ye=a=>{var x=W(),k=L(x);{var Ze=R=>{var A=Wt(),K=r(A),ce=r(K,!0);t(K),t(A),w(()=>c(ce,e(m))),l(R,A)},et=R=>{var A=W(),K=L(A);{var ce=S=>{var h=Xt(),M=r(h);Te(M,{class:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto mb-3"}),V(4),t(h),l(S,h)},tt=S=>{var h=sr(),M=r(h),Fe=r(M),De=s(r(Fe));Ft(De,5,()=>e(U),Pt,(z,d)=>{var F=rr(),D=L(F),P=r(D),N=r(P);{var Q=o=>{var i=W(),u=L(i);{var T=_=>{Ht(_,{class:"w-4 h-4 text-gray-400"})},fe=_=>{Jt(_,{class:"w-4 h-4 text-gray-400"})};g(u,_=>{e(f).has(e(d).id)?_(T):_(fe,!1)})}l(o,i)};g(N,o=>{e(d).details&&Object.keys(e(d).details).length>0&&o(Q)})}t(P);var pe=s(P),ve=r(pe),st=r(ve,!0);t(ve);var Pe=s(ve,2),dt=r(Pe,!0);t(Pe),t(pe);var ge=s(pe),Ue=r(ge),xe=r(Ue),ot=r(xe);Et(ot,{class:"w-3 h-3 text-gray-500 dark:text-gray-400"}),t(xe);var Be=s(xe,2),it=r(Be,!0);t(Be),t(Ue),t(ge);var ye=s(ge),ue=r(ye),Ie=r(ue);Ut(Ie,()=>Ge(e(d).action),(o,i)=>{i(o,{class:"w-3 h-3"})});var nt=s(Ie);t(ue),t(ye);var _e=s(ye),me=r(_e),lt=r(me,!0);t(me);var Me=s(me,2),ct=r(Me,!0);t(Me),t(_e);var be=s(_e),ze=r(be),pt=r(ze,!0);t(ze),t(be);var Ne=s(be),vt=r(Ne);{var gt=o=>{var i=Yt(),u=r(i);he(u,{class:"w-3 h-3"}),V(),t(i),l(o,i)},xt=o=>{var i=Zt(),u=r(i);we(u,{class:"w-3 h-3"}),V(),t(i),l(o,i)};g(vt,o=>{e(d).status==="success"?o(gt):o(xt,!1)})}t(Ne),t(D);var yt=s(D,2);{var ut=o=>{var i=tr(),u=r(i),T=s(r(u),2),fe=r(T,!0);t(T);var _=s(T,2);{var _t=E=>{var ke=er(),mt=s(r(ke));t(ke),w(()=>c(mt,` ${e(d).error_message??""}`)),l(E,ke)};g(_,E=>{e(d).error_message&&E(_t)})}t(u),t(i),w(E=>c(fe,E),[()=>Je(e(d).details)]),l(o,i)};g(yt,o=>{e(f).has(e(d).id)&&e(d).details&&Object.keys(e(d).details).length>0&&o(ut)})}w((o,i)=>{c(st,o),c(dt,i),c(it,e(d).user),Dt(ue,1,`inline-flex items-center gap-1.5 px-2.5 py-0.5 rounded-full text-xs font-medium ${(Oe[e(d).action]||"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200")??""}`),c(nt,` ${(Le[e(d).action]||e(d).action)??""}`),c(lt,e(d).resource_name||"-"),c(ct,e(d).resource_type),c(pt,e(d).project_name||"-")},[()=>Ee(new Date(e(d).created),"MMM d, yyyy"),()=>Ee(new Date(e(d).created),"HH:mm:ss")]),j("click",D,()=>He(e(d).id)),l(z,F)}),t(De),t(Fe),t(M);var rt=s(M,2);{var at=z=>{var d=ar(),F=r(d),D=r(F);t(F);var P=s(F,2),N=r(P),Q=s(N,2);t(P),t(d),w(()=>{c(D,`Page ${e(v)??""} of ${e(q)??""} (${e(C)??""} total)`),N.disabled=e(v)<=1,Q.disabled=e(v)>=e(q)}),j("click",N,()=>je(e(v)-1)),j("click",Q,()=>je(e(v)+1)),l(z,d)};g(rt,z=>{e(q)>1&&z(at)})}t(h),l(S,h)};g(K,S=>{e(U).length===0?S(ce):S(tt,!1)},!0)}l(R,A)};g(k,R=>{e(m)?R(Ze):R(et,!1)},!0)}l(a,x)};g(We,a=>{e(B)?a(Xe):a(Ye,!1)})}t(Z),w(()=>c(Ve,`${e(C)??""} ${e(C)===1?"entry":"entries"}`)),At(I,()=>e(b),a=>n(b,a)),j("change",I,Y),It(J,()=>e($),a=>n($,a)),j("keydown",J,a=>a.key==="Enter"&&Y()),j("click",Re,Y),l(X,Z),ht()}export{$r as component};
