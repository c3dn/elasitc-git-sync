import"../chunks/CWj6FrbW.js";import{i as ke}from"../chunks/DBRSZtkI.js";import{o as Ne,s as m}from"../chunks/CdzGu8ER.js";import{p as Ye,a as g,b as Ge,d as D,s as E,e as Le,$ as He,i as s,g as e,h as r,r as t,m as ut,c as Wt,f as mt,t as X,n as T,N as Pe,k as ze}from"../chunks/CbRa-Z4u.js";import{i as I}from"../chunks/CoDRCLiZ.js";import{d as pt,b as gt,e as qe,i as Be}from"../chunks/DZIrD1K_.js";import{c as Ue}from"../chunks/MJCC_PoB.js";import{h as Qe}from"../chunks/Bj3l4WMm.js";import{p as Je}from"../chunks/VVSrSIoj.js";import{F as xt}from"../chunks/CP95Nm2x.js";import{F as Ke}from"../chunks/Bycn3Wdy.js";import{T as Ve,R as We}from"../chunks/BWueu3Tx.js";import{t as f,c as Ze,g as Zt,e as ta,m as te,a as k,b as ea,C as ee,A as aa}from"../chunks/f2LBJiFS.js";import{S as sa}from"../chunks/DSPhBg84.js";import{C as ae}from"../chunks/x6-o1nLb.js";import{C as se}from"../chunks/BF-NTyZp.js";function N(n,d){const a=f(n),c=f(d),i=a.getTime()-c.getTime();return i<0?-1:i>0?1:i}function ra(n){return Ze(n,Date.now())}function ia(n,d){const a=f(n),c=f(d),i=a.getFullYear()-c.getFullYear(),x=a.getMonth()-c.getMonth();return i*12+x}function na(n){return d=>{const c=(n?Math[n]:Math.trunc)(d);return c===0?0:c}}function da(n,d){return+f(n)-+f(d)}function oa(n){const d=f(n);return d.setHours(23,59,59,999),d}function la(n){const d=f(n),a=d.getMonth();return d.setFullYear(d.getFullYear(),a+1,0),d.setHours(23,59,59,999),d}function ca(n){const d=f(n);return+oa(d)==+la(d)}function va(n,d){const a=f(n),c=f(d),i=N(a,c),x=Math.abs(ia(a,c));let _;if(x<1)_=0;else{a.getMonth()===1&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-i*x);let l=N(a,c)===-i;ca(f(n))&&x===1&&N(n,c)===1&&(l=!1),_=i*(x-Number(l))}return _===0?0:_}function fa(n,d,a){const c=da(n,d)/1e3;return na(a==null?void 0:a.roundingMethod)(c)}function ua(n,d,a){const c=ea(),i=(a==null?void 0:a.locale)??c.locale??ta,x=2520,_=N(n,d);if(isNaN(_))throw new RangeError("Invalid time value");const l=Object.assign({},a,{addSuffix:a==null?void 0:a.addSuffix,comparison:_});let h,M;_>0?(h=f(d),M=f(n)):(h=f(n),M=f(d));const b=fa(M,h),Y=(Zt(M)-Zt(h))/1e3,o=Math.round((b-Y)/60);let u;if(o<2)return a!=null&&a.includeSeconds?b<5?i.formatDistance("lessThanXSeconds",5,l):b<10?i.formatDistance("lessThanXSeconds",10,l):b<20?i.formatDistance("lessThanXSeconds",20,l):b<40?i.formatDistance("halfAMinute",0,l):b<60?i.formatDistance("lessThanXMinutes",1,l):i.formatDistance("xMinutes",1,l):o===0?i.formatDistance("lessThanXMinutes",1,l):i.formatDistance("xMinutes",o,l);if(o<45)return i.formatDistance("xMinutes",o,l);if(o<90)return i.formatDistance("aboutXHours",1,l);if(o<te){const y=Math.round(o/60);return i.formatDistance("aboutXHours",y,l)}else{if(o<x)return i.formatDistance("xDays",1,l);if(o<k){const y=Math.round(o/te);return i.formatDistance("xDays",y,l)}else if(o<k*2)return u=Math.round(o/k),i.formatDistance("aboutXMonths",u,l)}if(u=va(M,h),u<12){const y=Math.round(o/k);return i.formatDistance("xMonths",y,l)}else{const y=u%12,$=Math.trunc(u/12);return y<3?i.formatDistance("aboutXYears",$,l):y<9?i.formatDistance("overXYears",$,l):i.formatDistance("almostXYears",$+1,l)}}function ma(n,d){return ua(n,ra(n),d)}var pa=D('<div class="flex items-center justify-center py-12"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"></div></div>'),ga=D('<div class="bg-red-50 border border-red-200 rounded-lg p-4"><p class="text-sm text-red-800"> </p></div>'),xa=D('<div class="px-6 py-8 text-center"><p class="text-sm text-gray-500">No sync jobs yet. Create a project to get started.</p></div>'),_a=D('<div class="hidden sm:flex items-center gap-2 text-xs"><span class="px-2 py-0.5 bg-green-100 text-green-700 rounded"> </span> <span class="px-2 py-0.5 bg-blue-100 text-blue-700 rounded"> </span> <span class="px-2 py-0.5 bg-red-100 text-red-700 rounded"> </span></div>'),ya=D('<div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"><div class="flex items-center gap-3"><div><!></div> <div><p class="text-sm font-medium text-gray-900"> </p> <p class="text-xs text-gray-500"><!></p></div></div> <div class="flex items-center gap-3"><!> <span> </span></div></div>'),ha=D('<div class="p-4 space-y-3"></div>'),ba=D('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 stats-grid"><div class="card p-6 animate-fade-in opacity-0"><div class="flex items-center justify-between"><div><p class="text-sm font-medium text-gray-600">Total Projects</p> <p class="mt-2 text-3xl font-semibold text-gray-900"> </p></div> <div class="p-3 bg-purple-100 rounded-lg transition-transform duration-200 hover:scale-110"><!></div></div></div> <div class="card p-6 animate-fade-in opacity-0"><div class="flex items-center justify-between"><div><p class="text-sm font-medium text-gray-600">Total Rules</p> <p class="mt-2 text-3xl font-semibold text-gray-900"> </p></div> <div class="p-3 bg-blue-100 rounded-lg transition-transform duration-200 hover:scale-110"><!></div></div></div> <div class="card p-6 animate-fade-in opacity-0"><div class="flex items-center justify-between"><div><p class="text-sm font-medium text-gray-600">Test Rules</p> <p class="mt-2 text-3xl font-semibold text-yellow-600"> </p></div> <div class="p-3 bg-yellow-100 rounded-lg transition-transform duration-200 hover:scale-110"><!></div></div></div> <div class="card p-6 animate-fade-in opacity-0"><div class="flex items-center justify-between"><div><p class="text-sm font-medium text-gray-600">Prod Rules</p> <p class="mt-2 text-3xl font-semibold text-green-600"> </p></div> <div class="p-3 bg-green-100 rounded-lg transition-transform duration-200 hover:scale-110"><!></div></div></div> <div class="card p-6 animate-fade-in opacity-0"><div class="flex items-center justify-between"><div><p class="text-sm font-medium text-gray-600">Success Rate</p> <p class="mt-2 text-3xl font-semibold text-gray-900"> </p></div> <div class="p-3 bg-green-100 rounded-lg transition-transform duration-200 hover:scale-110"><!></div></div></div></div> <div class="grid grid-cols-1 lg:grid-cols-3 gap-6"><div class="card p-6 animate-fade-in" style="animation-delay: 250ms; opacity: 0;"><div class="flex items-center justify-between mb-4"><h3 class="font-semibold text-gray-900">Active Syncs</h3> <span class="text-2xl font-bold text-blue-600"> </span></div> <div class="h-2 bg-gray-100 rounded-full overflow-hidden"><div class="h-full bg-blue-600 rounded-full progress-bar"></div></div> <p class="text-xs text-gray-500 mt-2">Currently running sync jobs</p></div> <div class="card p-6 animate-fade-in" style="animation-delay: 300ms; opacity: 0;"><div class="flex items-center justify-between mb-4"><h3 class="font-semibold text-gray-900">Pending Conflicts</h3> <span> </span></div> <div class="h-2 bg-gray-100 rounded-full overflow-hidden"><div class="h-full bg-yellow-500 rounded-full progress-bar"></div></div> <p class="text-xs text-gray-500 mt-2">Conflicts requiring attention</p></div> <div class="card p-6 animate-fade-in" style="animation-delay: 350ms; opacity: 0;"><div class="flex items-center justify-between mb-4"><h3 class="font-semibold text-gray-900">Sync Success Rate</h3> <span class="text-2xl font-bold text-green-600"> </span></div> <div class="h-2 bg-gray-100 rounded-full overflow-hidden"><div class="h-full bg-green-500 rounded-full progress-bar"></div></div> <p class="text-xs text-gray-500 mt-2">Based on last 100 sync jobs</p></div></div> <div class="card animate-fade-in" style="animation-delay: 400ms; opacity: 0;"><div class="px-6 py-4 border-b border-gray-200"><h2 class="text-lg font-semibold text-gray-900">Recent Syncs</h2></div> <!></div> <div class="card p-6 animate-fade-in" style="animation-delay: 450ms; opacity: 0;"><h2 class="text-lg font-semibold text-gray-900 mb-4">Quick Actions</h2> <div class="grid grid-cols-1 md:grid-cols-3 gap-4"><a href="/projects/new" class="card-interactive flex items-center gap-3 p-4"><div class="p-2 bg-primary-100 rounded-lg transition-transform duration-200 group-hover:scale-110"><!></div> <div><p class="text-sm font-medium text-gray-900">Create Project</p> <p class="text-xs text-gray-500">Link Elastic space with Git repo</p></div></a> <a href="/settings/elastic" class="card-interactive flex items-center gap-3 p-4"><div class="p-2 bg-primary-100 rounded-lg transition-transform duration-200 group-hover:scale-110"><!></div> <div><p class="text-sm font-medium text-gray-900">Add Elastic Instance</p> <p class="text-xs text-gray-500">Configure new Elastic cluster</p></div></a> <a href="/settings/git" class="card-interactive flex items-center gap-3 p-4"><div class="p-2 bg-primary-100 rounded-lg transition-transform duration-200 group-hover:scale-110"><!></div> <div><p class="text-sm font-medium text-gray-900">Add Git Repository</p> <p class="text-xs text-gray-500">Connect to your Git repo</p></div></a></div></div>',1),wa=D('<div class="space-y-6"><div class="animate-fade-in"><h1 class="text-3xl font-bold text-gray-900">Dashboard</h1> <p class="mt-1 text-sm text-gray-500">Overview of your Elastic Security rules synchronization</p></div> <!></div>');function Ya(n,d){Ye(d,!1);let a=ut(null),c=ut(!0),i=ut("");Ne(async()=>{await x()});async function x(){try{E(c,!0);const o=await fetch(`${Je.baseUrl}/api/dashboard/stats`);if(!o.ok)throw new Error("Failed to load dashboard");E(a,await o.json())}catch(o){E(i,o.message)}finally{E(c,!1)}}function _(o){const u={completed:"bg-green-100 text-green-800",running:"bg-blue-100 text-blue-800",failed:"bg-red-100 text-red-800",conflict:"bg-yellow-100 text-yellow-800",pending:"bg-gray-100 text-gray-800"};return u[o]||u.pending}function l(o){return{completed:ee,running:aa,failed:se,conflict:se,pending:ae}[o]||ae}ke();var h=wa();Qe("1uha8ag",o=>{Le(()=>{He.title="Dashboard - Elastic Git Sync"})});var M=s(e(h),2);{var b=o=>{var u=pa();g(o,u)},Y=o=>{var u=Wt(),y=mt(u);{var $=j=>{var C=ga(),O=e(C),G=e(O,!0);t(O),t(C),X(()=>m(G,r(i))),g(j,C)},re=j=>{var C=Wt(),O=mt(C);{var G=L=>{var _t=ba(),H=mt(_t),P=e(H),yt=e(P),z=e(yt),ht=s(e(z),2),ie=e(ht,!0);t(ht),t(z);var bt=s(z,2),ne=e(bt);xt(ne,{class:"w-6 h-6 text-purple-600"}),t(bt),t(yt),t(P);var q=s(P,2),wt=e(q),B=e(wt),Dt=s(e(B),2),de=e(Dt,!0);t(Dt),t(B);var Mt=s(B,2),oe=e(Mt);Ke(oe,{class:"w-6 h-6 text-blue-600"}),t(Mt),t(wt),t(q);var U=s(q,2),St=e(U),Q=e(St),jt=s(e(Q),2),le=e(jt,!0);t(jt),t(Q);var Ct=s(Q,2),ce=e(Ct);Ve(ce,{class:"w-6 h-6 text-yellow-600"}),t(Ct),t(St),t(U);var J=s(U,2),Rt=e(J),K=e(Rt),Tt=s(e(K),2),ve=e(Tt,!0);t(Tt),t(K);var It=s(K,2),fe=e(It);We(fe,{class:"w-6 h-6 text-green-600"}),t(It),t(Rt),t(J);var $t=s(J,2),Ft=e($t),V=e(Ft),Xt=s(e(V),2),ue=e(Xt);t(Xt),t(V);var Ot=s(V,2),me=e(Ot);ee(me,{class:"w-6 h-6 text-green-600"}),t(Ot),t(Ft),t($t),t(H);var W=s(H,2),Z=e(W),tt=e(Z),At=s(e(tt),2),pe=e(At,!0);t(At),t(tt);var Et=s(tt,2),ge=e(Et);t(Et),T(2),t(Z);var et=s(Z,2),at=e(et),st=s(e(at),2),xe=e(st,!0);t(st),t(at);var kt=s(at,2),_e=e(kt);t(kt),T(2),t(et);var Nt=s(et,2),rt=e(Nt),Yt=s(e(rt),2),ye=e(Yt);t(Yt),t(rt);var Gt=s(rt,2),he=e(Gt);t(Gt),T(2),t(Nt),t(W);var it=s(W,2),be=s(e(it),2);{var we=R=>{var F=xa();g(R,F)},De=R=>{var F=ha();qe(F,5,()=>r(a).recent_syncs,Be,(Ce,v)=>{var ot=ya(),lt=e(ot),A=e(lt),Re=e(A);{let p=Pe(()=>r(v).status==="completed"?"text-green-600":r(v).status==="failed"?"text-red-600":r(v).status==="running"?"text-blue-600":"text-gray-600");Ue(Re,()=>l(r(v).status),(w,S)=>{S(w,{get class(){return`w-4 h-4 ${r(p)??""}`}})})}t(A);var Ut=s(A,2),ct=e(Ut),Te=e(ct,!0);t(ct);var Qt=s(ct,2),Ie=e(Qt);{var $e=p=>{var w=ze();X(S=>m(w,S),[()=>ma(new Date(r(v).started_at),{addSuffix:!0})]),g(p,w)};I(Ie,p=>{r(v).started_at&&p($e)})}t(Qt),t(Ut),t(lt);var Jt=s(lt,2),Kt=e(Jt);{var Fe=p=>{var w=_a(),S=e(w),Oe=e(S);t(S);var ft=s(S,2),Ae=e(ft);t(ft);var Vt=s(ft,2),Ee=e(Vt);t(Vt),t(w),X(()=>{m(Oe,`+${r(v).changes_summary.added??""}`),m(Ae,`~${r(v).changes_summary.modified??""}`),m(Ee,`-${r(v).changes_summary.deleted??""}`)}),g(p,w)};I(Kt,p=>{r(v).changes_summary&&p(Fe)})}var vt=s(Kt,2),Xe=e(vt,!0);t(vt),t(Jt),t(ot),X(p=>{gt(A,1,`p-2 rounded-lg ${r(v).status==="completed"?"bg-green-100":r(v).status==="failed"?"bg-red-100":r(v).status==="running"?"bg-blue-100":"bg-gray-100"}`),m(Te,r(v).direction==="elastic_to_git"?"Elastic → Git":r(v).direction==="git_to_elastic"?"Git → Elastic":"Bidirectional Sync"),gt(vt,1,`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${p??""}`),m(Xe,r(v).status)},[()=>_(r(v).status)]),g(Ce,ot)}),t(F),g(R,F)};I(be,R=>{r(a).recent_syncs.length===0?R(we):R(De,!1)})}t(it);var Lt=s(it,2),Ht=s(e(Lt),2),nt=e(Ht),Pt=e(nt),Me=e(Pt);xt(Me,{class:"w-5 h-5 text-primary-600"}),t(Pt),T(2),t(nt);var dt=s(nt,2),zt=e(dt),Se=e(zt);sa(Se,{class:"w-5 h-5 text-primary-600"}),t(zt),T(2),t(dt);var qt=s(dt,2),Bt=e(qt),je=e(Bt);xt(je,{class:"w-5 h-5 text-primary-600"}),t(Bt),T(2),t(qt),t(Ht),t(Lt),X(()=>{m(ie,r(a).total_projects),m(de,r(a).total_rules||0),m(le,r(a).total_test_rules||0),m(ve,r(a).total_prod_rules||0),m(ue,`${r(a).sync_success_rate??""}%`),m(pe,r(a).active_syncs),pt(ge,`width: ${r(a).active_syncs>0?"100%":"0%"}`),gt(st,1,`text-2xl font-bold ${r(a).pending_conflicts>0?"text-yellow-600":"text-gray-400"}`),m(xe,r(a).pending_conflicts),pt(_e,`width: ${r(a).pending_conflicts>0?"100%":"0%"}`),m(ye,`${r(a).sync_success_rate??""}%`),pt(he,`width: ${r(a).sync_success_rate??""}%`)}),g(L,_t)};I(O,L=>{r(a)&&L(G)},!0)}g(j,C)};I(y,j=>{r(i)?j($):j(re,!1)},!0)}g(o,u)};I(M,o=>{r(c)?o(b):o(Y,!1)})}t(h),g(n,h),Ge()}export{Ya as component};
