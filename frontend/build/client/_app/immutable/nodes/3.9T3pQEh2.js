import"../chunks/CWj6FrbW.js";import{i as dt}from"../chunks/CVSZYhH1.js";import{o as ct,s as g}from"../chunks/BCkVnCXK.js";import{p as lt,a as p,b as vt,d as M,s as F,e as ft,$ as ut,g as o,h as e,i as c,r as t,m as re,c as ae,f as R,t as O,n as se,k as mt}from"../chunks/Dwc5JcvW.js";import{i as I}from"../chunks/BGM91MK6.js";import{e as gt,b as pt,i as xt}from"../chunks/De-PL9gO.js";import{c as _t}from"../chunks/7ALa_3WU.js";import{h as ht}from"../chunks/--Il8l-M.js";import{p as yt}from"../chunks/BXxF3ZQE.js";import{F as ie}from"../chunks/BuOzBW1Z.js";import{t as v,c as bt,g as Ee,e as wt,m as Fe,a as Y,b as Dt,A as Re,C as Ye}from"../chunks/CoO9Q-9V.js";import{C as ne}from"../chunks/B-MkyRZn.js";import{C as ke}from"../chunks/DpbAZU8F.js";function k(s,i){const r=v(s),l=v(i),a=r.getTime()-l.getTime();return a<0?-1:a>0?1:a}function Mt(s){return bt(s,Date.now())}function St(s,i){const r=v(s),l=v(i),a=r.getFullYear()-l.getFullYear(),x=r.getMonth()-l.getMonth();return a*12+x}function jt(s){return i=>{const l=(s?Math[s]:Math.trunc)(i);return l===0?0:l}}function Ct(s,i){return+v(s)-+v(i)}function It(s){const i=v(s);return i.setHours(23,59,59,999),i}function Tt(s){const i=v(s),r=i.getMonth();return i.setFullYear(i.getFullYear(),r+1,0),i.setHours(23,59,59,999),i}function Xt(s){const i=v(s);return+It(i)==+Tt(i)}function Ot(s,i){const r=v(s),l=v(i),a=k(r,l),x=Math.abs(St(r,l));let _;if(x<1)_=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-a*x);let d=k(r,l)===-a;Xt(v(s))&&x===1&&k(s,l)===1&&(d=!1),_=a*(x-Number(d))}return _===0?0:_}function At(s,i,r){const l=Ct(s,i)/1e3;return jt(r==null?void 0:r.roundingMethod)(l)}function Et(s,i,r){const l=Dt(),a=(r==null?void 0:r.locale)??l.locale??wt,x=2520,_=k(s,i);if(isNaN(_))throw new RangeError("Invalid time value");const d=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:_});let y,D;_>0?(y=v(i),D=v(s)):(y=v(s),D=v(i));const b=At(D,y),N=(Ee(D)-Ee(y))/1e3,n=Math.round((b-N)/60);let f;if(n<2)return r!=null&&r.includeSeconds?b<5?a.formatDistance("lessThanXSeconds",5,d):b<10?a.formatDistance("lessThanXSeconds",10,d):b<20?a.formatDistance("lessThanXSeconds",20,d):b<40?a.formatDistance("halfAMinute",0,d):b<60?a.formatDistance("lessThanXMinutes",1,d):a.formatDistance("xMinutes",1,d):n===0?a.formatDistance("lessThanXMinutes",1,d):a.formatDistance("xMinutes",n,d);if(n<45)return a.formatDistance("xMinutes",n,d);if(n<90)return a.formatDistance("aboutXHours",1,d);if(n<Fe){const h=Math.round(n/60);return a.formatDistance("aboutXHours",h,d)}else{if(n<x)return a.formatDistance("xDays",1,d);if(n<Y){const h=Math.round(n/Fe);return a.formatDistance("xDays",h,d)}else if(n<Y*2)return f=Math.round(n/Y),a.formatDistance("aboutXMonths",f,d)}if(f=Ot(D,y),f<12){const h=Math.round(n/Y);return a.formatDistance("xMonths",h,d)}else{const h=f%12,T=Math.trunc(f/12);return h<3?a.formatDistance("aboutXYears",T,d):h<9?a.formatDistance("overXYears",T,d):a.formatDistance("almostXYears",T+1,d)}}function Ft(s,i){return Et(s,Mt(s),i)}var Rt=M('<div class="flex items-center justify-center py-12"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"></div></div>'),Yt=M('<div class="bg-red-50 border border-red-200 rounded-lg p-4"><p class="text-sm text-red-800"> </p></div>'),kt=M('<div class="px-6 py-8 text-center"><p class="text-sm text-gray-500">No sync jobs yet. Create a project to get started.</p></div>'),Nt=M('<div class="text-xs text-gray-500"><span class="text-green-600"> </span> <span class="text-blue-600 ml-2"> </span> <span class="text-red-600 ml-2"> </span></div>'),Gt=M('<div class="px-6 py-4 hover:bg-gray-50 transition-colors"><div class="flex items-center justify-between"><div class="flex items-center gap-4 flex-1"><!> <div class="flex-1"><p class="text-sm font-medium text-gray-900">Project Sync</p> <p class="text-xs text-gray-500 mt-1"> <!></p></div></div> <div class="flex items-center gap-3"><!> <span> </span></div></div></div>'),$t=M('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"><div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6"><div class="flex items-center justify-between"><div><p class="text-sm font-medium text-gray-600">Total Projects</p> <p class="mt-2 text-3xl font-semibold text-gray-900"> </p></div> <div class="p-3 bg-primary-100 rounded-lg"><!></div></div></div> <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6"><div class="flex items-center justify-between"><div><p class="text-sm font-medium text-gray-600">Active Syncs</p> <p class="mt-2 text-3xl font-semibold text-gray-900"> </p></div> <div class="p-3 bg-blue-100 rounded-lg"><!></div></div></div> <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6"><div class="flex items-center justify-between"><div><p class="text-sm font-medium text-gray-600">Pending Conflicts</p> <p class="mt-2 text-3xl font-semibold text-gray-900"> </p></div> <div class="p-3 bg-yellow-100 rounded-lg"><!></div></div></div> <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6"><div class="flex items-center justify-between"><div><p class="text-sm font-medium text-gray-600">Success Rate</p> <p class="mt-2 text-3xl font-semibold text-gray-900"> </p></div> <div class="p-3 bg-green-100 rounded-lg"><!></div></div></div></div> <div class="bg-white rounded-lg shadow-sm border border-gray-200"><div class="px-6 py-4 border-b border-gray-200"><h2 class="text-lg font-semibold text-gray-900">Recent Syncs</h2></div> <div class="divide-y divide-gray-200"><!></div></div> <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6"><h2 class="text-lg font-semibold text-gray-900 mb-4">Quick Actions</h2> <div class="grid grid-cols-1 md:grid-cols-3 gap-4"><a href="/projects/new" class="flex items-center gap-3 p-4 border border-gray-200 rounded-lg hover:border-primary-300 hover:bg-primary-50 transition-colors"><!> <div><p class="text-sm font-medium text-gray-900">Create Project</p> <p class="text-xs text-gray-500">Link Elastic space with Git repo</p></div></a> <a href="/settings/elastic" class="flex items-center gap-3 p-4 border border-gray-200 rounded-lg hover:border-primary-300 hover:bg-primary-50 transition-colors"><!> <div><p class="text-sm font-medium text-gray-900">Add Elastic Instance</p> <p class="text-xs text-gray-500">Configure new Elastic cluster</p></div></a> <a href="/settings/git" class="flex items-center gap-3 p-4 border border-gray-200 rounded-lg hover:border-primary-300 hover:bg-primary-50 transition-colors"><!> <div><p class="text-sm font-medium text-gray-900">Add Git Repository</p> <p class="text-xs text-gray-500">Connect to your Git repo</p></div></a></div></div>',1),Lt=M('<div class="space-y-6"><div><h1 class="text-3xl font-bold text-gray-900">Dashboard</h1> <p class="mt-1 text-sm text-gray-500">Overview of your Elastic Security rules synchronization</p></div> <!></div>');function tr(s,i){lt(i,!1);let r=re(null),l=re(!0),a=re("");ct(async()=>{await x()});async function x(){try{F(l,!0);const n=await fetch(`${yt.baseUrl}/api/dashboard/stats`);if(!n.ok)throw new Error("Failed to load dashboard");F(r,await n.json())}catch(n){F(a,n.message)}finally{F(l,!1)}}function _(n){const f={completed:"bg-green-100 text-green-800",running:"bg-blue-100 text-blue-800",failed:"bg-red-100 text-red-800",conflict:"bg-yellow-100 text-yellow-800",pending:"bg-gray-100 text-gray-800"};return f[n]||f.pending}function d(n){return{completed:Ye,running:Re,failed:ne,conflict:ne,pending:ke}[n]||ke}dt();var y=Lt();ht("1uha8ag",n=>{ft(()=>{ut.title="Dashboard - Elastic Git Sync"})});var D=o(e(y),2);{var b=n=>{var f=Rt();p(n,f)},N=n=>{var f=ae(),h=R(f);{var T=S=>{var j=Yt(),A=e(j),G=e(A,!0);t(A),t(j),O(()=>g(G,c(a))),p(S,j)},Ne=S=>{var j=ae(),A=R(j);{var G=$=>{var oe=$t(),L=R(oe),H=e(L),de=e(H),P=e(de),ce=o(e(P),2),Ge=e(ce,!0);t(ce),t(P);var le=o(P,2),$e=e(le);ie($e,{class:"w-6 h-6 text-primary-600"}),t(le),t(de),t(H);var z=o(H,2),ve=e(z),U=e(ve),fe=o(e(U),2),Le=e(fe,!0);t(fe),t(U);var ue=o(U,2),He=e(ue);Re(He,{class:"w-6 h-6 text-blue-600"}),t(ue),t(ve),t(z);var B=o(z,2),me=e(B),Q=e(me),ge=o(e(Q),2),Pe=e(ge,!0);t(ge),t(Q);var pe=o(Q,2),ze=e(pe);ne(ze,{class:"w-6 h-6 text-yellow-600"}),t(pe),t(me),t(B);var xe=o(B,2),_e=e(xe),q=e(_e),he=o(e(q),2),Ue=e(he);t(he),t(q);var ye=o(q,2),Be=e(ye);Ye(Be,{class:"w-6 h-6 text-green-600"}),t(ye),t(_e),t(xe),t(L);var J=o(L,2),be=o(e(J),2),Qe=e(be);{var qe=C=>{var E=kt();p(C,E)},Je=C=>{var E=ae(),Ze=R(E);gt(Ze,1,()=>c(r).recent_syncs,xt,(et,u)=>{var W=Gt(),Se=e(W),Z=e(Se),je=e(Z);_t(je,()=>d(c(u).status),(m,w)=>{w(m,{class:"w-5 h-5 text-gray-400"})});var Ce=o(je,2),Ie=o(e(Ce),2),Te=e(Ie),tt=o(Te);{var rt=m=>{var w=mt();O(X=>g(w,`• ${X??""}`),[()=>Ft(new Date(c(u).started_at),{addSuffix:!0})]),p(m,w)};I(tt,m=>{c(u).started_at&&m(rt)})}t(Ie),t(Ce),t(Z);var Xe=o(Z,2),Oe=e(Xe);{var at=m=>{var w=Nt(),X=e(w),it=e(X);t(X);var te=o(X,2),nt=e(te);t(te);var Ae=o(te,2),ot=e(Ae);t(Ae),t(w),O(()=>{g(it,`+${c(u).changes_summary.added??""}`),g(nt,`~${c(u).changes_summary.modified??""}`),g(ot,`-${c(u).changes_summary.deleted??""}`)}),p(m,w)};I(Oe,m=>{c(u).changes_summary&&m(at)})}var ee=o(Oe,2),st=e(ee,!0);t(ee),t(Xe),t(Se),t(W),O(m=>{g(Te,`${c(u).direction==="elastic_to_git"?"Elastic → Git":c(u).direction==="git_to_elastic"?"Git → Elastic":"Bidirectional"} `),pt(ee,1,`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${m??""}`),g(st,c(u).status)},[()=>_(c(u).status)]),p(et,W)}),p(C,E)};I(Qe,C=>{c(r).recent_syncs.length===0?C(qe):C(Je,!1)})}t(be),t(J);var we=o(J,2),De=o(e(we),2),K=e(De),Ke=e(K);ie(Ke,{class:"w-5 h-5 text-primary-600"}),se(2),t(K);var V=o(K,2),Ve=e(V);Settings(Ve,{class:"w-5 h-5 text-primary-600"}),se(2),t(V);var Me=o(V,2),We=e(Me);ie(We,{class:"w-5 h-5 text-primary-600"}),se(2),t(Me),t(De),t(we),O(()=>{g(Ge,c(r).total_projects),g(Le,c(r).active_syncs),g(Pe,c(r).pending_conflicts),g(Ue,`${c(r).sync_success_rate??""}%`)}),p($,oe)};I(A,$=>{c(r)&&$(G)},!0)}p(S,j)};I(h,S=>{c(a)?S(T):S(Ne,!1)},!0)}p(n,f)};I(D,n=>{c(l)?n(b):n(N,!1)})}t(y),p(s,y),vt()}export{tr as component};
