import"../chunks/CWj6FrbW.js";import{i as Kt}from"../chunks/Dl2LfGm4.js";import{o as Qt,s as p}from"../chunks/O7RWNxBF.js";import{p as Vt,a as v,b as Xt,e as Yt,h as e,d as c,s as A,$ as Zt,g as i,n as P,r as t,i as a,m as Z,c as tt,f as et,t as T,j as te,k as yt}from"../chunks/C9NYA0Nw.js";import{i as f}from"../chunks/D2ldot_M.js";import{e as ee,b as ae,c as ut,a as re,i as se}from"../chunks/z_jCEgha.js";import{h as ie}from"../chunks/k5AYXn5z.js";import{p as S}from"../chunks/BUCyip3L.js";import{P as bt}from"../chunks/B790a_s2.js";import{D as ne}from"../chunks/CsmNXNIe.js";import{S as oe}from"../chunks/DWdZ-gWd.js";import{T as de}from"../chunks/Dr9VXG2L.js";import{T as ht}from"../chunks/DnyxC-7e.js";import{G as wt}from"../chunks/DEjX2dQL.js";import{U as ve}from"../chunks/D8KKMlRR.js";import{R as kt}from"../chunks/NC3V-jhH.js";var le=c('<div class="flex items-center justify-center py-12"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div></div>'),ce=c('<div class="bg-red-50 border border-red-200 rounded-lg p-4"><p class="text-sm text-red-800"> </p></div>'),xe=c('<div class="card p-12 text-center animate-fade-in"><div class="mb-4"><!></div> <h3 class="text-lg font-medium text-gray-900 dark:text-gray-100 mb-2">No projects yet</h3> <p class="text-gray-500 dark:text-gray-400 mb-6">Create your first project to start syncing Elastic Security rules with Git.</p> <a href="/projects/new" class="btn inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 hover:shadow-md transition-all"><!> Create Project</a></div>'),ge=c('<p class="text-sm text-gray-500 dark:text-gray-400 mt-1 line-clamp-2"> </p>'),pe=c('<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">Export Only</span>'),me=c('<div class="flex items-start gap-2"><div class="p-1.5 bg-yellow-100 rounded"><!></div> <div class="min-w-0"><div class="text-xs font-medium text-gray-700 dark:text-gray-300">Test</div> <div class="text-xs text-gray-500 dark:text-gray-400 truncate"> </div> <div class="text-xs text-gray-400 dark:text-gray-500 flex items-center gap-1"><!> </div></div></div>'),_e=c('<div class="flex items-center gap-2 text-gray-400 dark:text-gray-500"><!> <span class="text-xs">No test env</span></div>'),fe=c('<div class="flex items-center gap-2 text-gray-400 dark:text-gray-500"><!> <span class="text-xs text-yellow-600">Elastic to Git</span></div>'),ye=c('<div class="flex items-start gap-2"><div class="p-1.5 bg-green-100 rounded"><!></div> <div class="min-w-0"><div class="text-xs font-medium text-gray-700 dark:text-gray-300">Production</div> <div class="text-xs text-gray-500 dark:text-gray-400 truncate"> </div> <div class="text-xs text-gray-400 dark:text-gray-500 flex items-center gap-1"><!> </div></div></div>'),ue=c('<div class="flex items-center gap-2 text-gray-400 dark:text-gray-500"><!> <span class="text-xs">No prod env</span></div>'),be=c('<div class="card overflow-hidden animate-fade-in"><div class="p-6 border-b border-gray-100 dark:border-gray-800"><div class="flex items-start justify-between"><div class="flex-1"><a class="text-lg font-semibold text-gray-900 dark:text-gray-100 hover:text-blue-600"> </a> <!></div> <div class="flex items-center gap-1.5"><!> <span> </span></div></div></div> <div class="px-6 py-4 bg-gray-50 dark:bg-gray-800"><div class="grid grid-cols-2 gap-4"><!> <!></div></div> <div class="px-6 py-3 text-xs text-gray-500 dark:text-gray-400 border-t border-gray-100 dark:border-gray-800"><div class="flex items-center justify-between"><span><strong>Elastic:</strong> </span> <span><strong>Git:</strong> </span></div></div> <div class="flex items-center gap-2 p-4 border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900"><a class="btn flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 hover:shadow-md transition-all text-sm"><!> Manage</a> <button class="btn flex items-center gap-2 px-3 py-2 text-red-600 hover:bg-red-50 border border-red-200 rounded-lg transition-all text-sm"><!></button></div></div>'),he=c('<div class="grid grid-cols-1 lg:grid-cols-2 gap-6"></div>'),we=c('<div class="space-y-6"><div class="flex items-center justify-between animate-fade-in"><div><h1 class="text-3xl font-bold text-gray-900 dark:text-gray-100">Projects</h1> <p class="mt-1 text-sm text-gray-500 dark:text-gray-400">Manage your Elastic Security rule sync projects</p></div> <a href="/projects/new" class="btn inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 hover:shadow-md transition-all"><!> New Project</a></div> <!></div>');function De(jt,Et){Vt(Et,!1);let C=Z([]),D=Z(!0),R=Z("");Qt(async()=>{await at()});async function at(){try{A(D,!0);const n=await S.collection("projects").getFullList({expand:"elastic_instance,git_repository",sort:"-created"}),o=[];for(const x of n)try{const W=await S.collection("environments").getFullList({filter:`project = "${x.id}"`});o.push({...x,environments:W})}catch{o.push({...x,environments:[]})}A(C,o)}catch(n){A(R,n.message)}finally{A(D,!1)}}function rt(n){var o;return(o=n.environments)==null?void 0:o.find(x=>x.name==="test")}function st(n){var o;return(o=n.environments)==null?void 0:o.find(x=>x.name==="production")}async function Pt(n){if(confirm("Are you sure you want to delete this project and all its environments?"))try{const o=await S.collection("environments").getFullList({filter:`project = "${n}"`});for(const x of o)await S.collection("environments").delete(x.id);await S.collection("projects").delete(n),await at()}catch(o){alert(`Error: ${o.message}`)}}Kt();var I=we();ie("rqn88j",n=>{Yt(()=>{Zt.title="Projects - Elastic Git Sync"})});var O=e(I),it=i(e(O),2),Gt=e(it);bt(Gt,{class:"w-5 h-5"}),P(),t(it),t(O);var Tt=i(O,2);{var St=n=>{var o=le();v(n,o)},Lt=n=>{var o=tt(),x=et(o);{var W=b=>{var h=ce(),L=e(h),z=e(L,!0);t(L),t(h),T(()=>p(z,a(R))),v(b,h)},Nt=b=>{var h=tt(),L=et(h);{var z=w=>{var y=xe(),G=e(y),d=e(G);ne(d,{class:"w-12 h-12 text-gray-400 dark:text-gray-500 mx-auto"}),t(G);var N=i(G,6),k=e(N);bt(k,{class:"w-5 h-5"}),P(),t(N),t(y),v(w,y)},Ut=w=>{var y=he();ee(y,5,()=>a(C),se,(G,d,N)=>{var k=be();ae(k,`animation-delay: ${N*50}ms; opacity: 0;`);var B=e(k),nt=e(B),H=e(nt),U=e(H),Ft=e(U,!0);t(U);var Mt=i(U,2);{var $t=r=>{var s=ge(),l=e(s,!0);t(s),T(()=>p(l,a(d).description)),v(r,s)};f(Mt,r=>{a(d).description&&r($t)})}t(H);var ot=i(H,2),dt=e(ot);{var qt=r=>{var s=pe();v(r,s)};f(dt,r=>{a(d).sync_mode==="export_only"&&r(qt)})}var J=i(dt,2),At=e(J,!0);t(J),t(ot),t(nt),t(B);var K=i(B,2),vt=e(K),lt=e(vt);{var Ct=r=>{const s=yt(()=>rt(a(d)));var l=me(),_=e(l),Y=e(_);ht(Y,{class:"w-4 h-4 text-yellow-600"}),t(_);var m=i(_,2),g=i(e(m),2),u=e(g,!0);t(g);var j=i(g,2),M=e(j);wt(M,{class:"w-3 h-3"});var $=i(M);t(j),t(m),t(l),T(()=>{var E,q;p(u,(E=a(s))==null?void 0:E.elastic_space),p($,` ${((q=a(s))==null?void 0:q.git_branch)??""}`)}),v(r,l)},Dt=r=>{var s=_e(),l=e(s);ht(l,{class:"w-4 h-4"}),P(2),t(s),v(r,s)};f(lt,r=>{rt(a(d))?r(Ct):r(Dt,!1)})}var Rt=i(lt,2);{var It=r=>{var s=fe(),l=e(s);ve(l,{class:"w-4 h-4 text-yellow-500"}),P(2),t(s),v(r,s)},Ot=r=>{var s=tt(),l=et(s);{var _=m=>{const g=yt(()=>st(a(d)));var u=ye(),j=e(u),M=e(j);kt(M,{class:"w-4 h-4 text-green-600"}),t(j);var $=i(j,2),E=i(e($),2),q=e(E,!0);t(E);var pt=i(E,2),mt=e(pt);wt(mt,{class:"w-3 h-3"});var Jt=i(mt);t(pt),t($),t(u),T(()=>{var _t,ft;p(q,(_t=a(g))==null?void 0:_t.elastic_space),p(Jt,` ${((ft=a(g))==null?void 0:ft.git_branch)??""}`)}),v(m,u)},Y=m=>{var g=ue(),u=e(g);kt(u,{class:"w-4 h-4"}),P(2),t(g),v(m,g)};f(l,m=>{st(a(d))?m(_):m(Y,!1)},!0)}v(r,s)};f(Rt,r=>{a(d).sync_mode==="export_only"?r(It):r(Ot,!1)})}t(vt),t(K);var Q=i(K,2),ct=e(Q),V=e(ct),Wt=i(e(V));t(V);var xt=i(V,2),zt=i(e(xt));t(xt),t(ct),t(Q);var gt=i(Q,2),F=e(gt),Bt=e(F);oe(Bt,{class:"w-4 h-4"}),P(),t(F);var X=i(F,2),Ht=e(X);de(Ht,{class:"w-4 h-4"}),t(X),t(gt),t(k),T(()=>{var r,s,l,_;ut(U,"href",`/projects/${a(d).id??""}`),p(Ft,a(d).name),re(J,1,`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium
									${a(d).is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200"}`),p(At,a(d).is_active?"Active":"Inactive"),p(Wt,` ${(((s=(r=a(d).expand)==null?void 0:r.elastic_instance)==null?void 0:s.name)||"Unknown")??""}`),p(zt,` ${(((_=(l=a(d).expand)==null?void 0:l.git_repository)==null?void 0:_.name)||"Unknown")??""}`),ut(F,"href",`/projects/${a(d).id??""}`)}),te("click",X,()=>Pt(a(d).id)),v(G,k)}),t(y),v(w,y)};f(L,w=>{a(C).length===0?w(z):w(Ut,!1)},!0)}v(b,h)};f(x,b=>{a(R)?b(W):b(Nt,!1)},!0)}v(n,o)};f(Tt,n=>{a(D)?n(St):n(Lt,!1)})}t(I),v(jt,I),Xt()}export{De as component};
