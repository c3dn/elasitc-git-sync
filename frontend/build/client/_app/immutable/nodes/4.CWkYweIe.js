import"../chunks/CWj6FrbW.js";import{i as se}from"../chunks/COK2pY8o.js";import{o as ie,s as _}from"../chunks/BnHnlVXU.js";import{p as oe,f as $,a as n,b as le,e as de,d as b,s as p,$ as ne,g as s,h as t,i as a,r as e,m as k,c as q,t as A,j as M,n as B}from"../chunks/BbuzmxRY.js";import{i as N}from"../chunks/XgF_cVEg.js";import{e as ve,i as ce}from"../chunks/Bm_MFDQ1.js";import{h as pe}from"../chunks/BwaF3Q6U.js";import{p as H}from"../chunks/BVZH3wAp.js";import{C as ge}from"../chunks/C4YxXooL.js";import{T as fe}from"../chunks/WFeWt-3y.js";var be=b('<div class="flex items-center justify-center py-12"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"></div></div>'),xe=b('<div class="bg-red-50 border border-red-200 rounded-lg p-4"><p class="text-sm text-red-800"> </p></div>'),ue=b('<div class="bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center"><!> <p class="text-gray-500">No pending conflicts. All syncs are clean!</p></div>'),me=b('<div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6"><div class="flex items-start gap-4"><div class="p-3 bg-yellow-100 rounded-lg"><!></div> <div class="flex-1"><h3 class="text-lg font-semibold text-gray-900 mb-1"> </h3> <p class="text-sm text-gray-600 mb-2"> </p> <p class="text-sm text-gray-500">This rule has been modified in both Elastic and Git. Choose which version to keep.</p></div> <button class="px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors">Resolve</button></div></div>'),he=b('<div class="space-y-4"></div>'),ye=b('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"><div class="bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden"><div class="px-6 py-4 border-b border-gray-200"><h2 class="text-xl font-semibold text-gray-900"> </h2></div> <div class="px-6 py-4 overflow-y-auto max-h-[60vh]"><div class="grid grid-cols-2 gap-6"><div><div class="flex items-center gap-2 mb-3"><h3 class="text-lg font-semibold text-gray-900">Elastic Version</h3> <span class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded">Source</span></div> <div class="bg-gray-50 rounded-lg p-4 border border-gray-200"><pre class="text-xs text-gray-700 whitespace-pre-wrap overflow-x-auto"> </pre></div></div> <div><div class="flex items-center gap-2 mb-3"><h3 class="text-lg font-semibold text-gray-900">Git Version</h3> <span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded">Repository</span></div> <div class="bg-gray-50 rounded-lg p-4 border border-gray-200"><pre class="text-xs text-gray-700 whitespace-pre-wrap overflow-x-auto"> </pre></div></div></div></div> <div class="px-6 py-4 border-t border-gray-200 flex items-center justify-end gap-3"><button class="px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">Cancel</button> <button class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors">Use Git Version</button> <button class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">Use Elastic Version</button></div></div></div>'),_e=b('<div class="space-y-6"><div><h1 class="text-3xl font-bold text-gray-900">Conflicts</h1> <p class="mt-1 text-sm text-gray-500">Resolve synchronization conflicts between Elastic and Git</p></div> <!></div> <!>',1);function Ne(K,Q){oe(Q,!1);let O=k([]),V=k(!0),z=k(""),v=k(null),J=k(!1);ie(async()=>{await D()});async function D(){try{p(V,!0),p(O,await H.collection("conflicts").getFullList({filter:'resolution = "pending"',sort:"-created"}))}catch(r){p(z,r.message)}finally{p(V,!1)}}function W(r){p(v,r),p(J,!0)}function I(){p(v,null),p(J,!1)}async function L(r){if(a(v))try{if(!(await fetch(`${H.baseUrl}/api/conflict/resolve`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({conflict_id:a(v).id,resolution:r})})).ok)throw new Error("Failed to resolve conflict");I(),await D()}catch(i){alert(`Error: ${i.message}`)}}se();var P=_e();pe("fz0r3g",r=>{de(()=>{ne.title="Conflicts - Elastic Git Sync"})});var U=$(P),X=s(t(U),2);{var Y=r=>{var i=be();n(r,i)},Z=r=>{var i=q(),E=$(i);{var w=c=>{var o=xe(),g=t(o),f=t(g,!0);e(g),e(o),A(()=>_(f,a(z))),n(c,o)},S=c=>{var o=q(),g=$(o);{var f=l=>{var d=ue(),x=t(d);ge(x,{class:"w-12 h-12 text-green-600 mx-auto mb-4"}),B(2),e(d),n(l,d)},j=l=>{var d=he();ve(d,5,()=>a(O),ce,(x,u)=>{var m=me(),G=t(m),h=t(G),R=t(h);fe(R,{class:"w-6 h-6 text-yellow-600"}),e(h);var y=s(h,2),C=t(y),F=t(C,!0);e(C);var T=s(C,2),re=t(T);e(T),B(2),e(y);var ae=s(y,2);e(G),e(m),A(()=>{_(F,a(u).rule_name),_(re,`Rule ID: ${a(u).rule_id??""}`)}),M("click",ae,()=>W(a(u))),n(x,m)}),e(d),n(l,d)};N(g,l=>{a(O).length===0?l(f):l(j,!1)},!0)}n(c,o)};N(E,c=>{a(z)?c(w):c(S,!1)},!0)}n(r,i)};N(X,r=>{a(V)?r(Y):r(Z,!1)})}e(U);var ee=s(U,2);{var te=r=>{var i=ye(),E=t(i),w=t(E),S=t(w),c=t(S);e(S),e(w);var o=s(w,2),g=t(o),f=t(g),j=s(t(f),2),l=t(j),d=t(l,!0);e(l),e(j),e(f);var x=s(f,2),u=s(t(x),2),m=t(u),G=t(m,!0);e(m),e(u),e(x),e(g),e(o);var h=s(o,2),R=t(h),y=s(R,2),C=s(y,2);e(h),e(E),e(i),A((F,T)=>{_(c,`Resolve Conflict: ${a(v).rule_name??""}`),_(d,F),_(G,T)},[()=>JSON.stringify(a(v).elastic_version,null,2),()=>JSON.stringify(a(v).git_version,null,2)]),M("click",R,I),M("click",y,()=>L("use_git")),M("click",C,()=>L("use_elastic")),n(r,i)};N(ee,r=>{a(J)&&a(v)&&r(te)})}n(K,P),le()}export{Ne as component};
