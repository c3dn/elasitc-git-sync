import"../chunks/CWj6FrbW.js";import{i as Ke}from"../chunks/Dl2LfGm4.js";import{o as Qe,s as m}from"../chunks/O7RWNxBF.js";import{p as Ve,a as v,b as Xe,e as Ye,h as t,d as c,s as A,$ as Ze,g as i,n as P,r as e,i as a,m as Z,c as ee,f as te,t as T,j as et,k as ye}from"../chunks/C9NYA0Nw.js";import{i as f}from"../chunks/D2ldot_M.js";import{e as tt,b as at,c as ue,a as rt,i as st}from"../chunks/z_jCEgha.js";import{h as it}from"../chunks/k5AYXn5z.js";import{p as S}from"../chunks/BUCyip3L.js";import{P as be}from"../chunks/B790a_s2.js";import{D as dt}from"../chunks/CsmNXNIe.js";import{S as nt}from"../chunks/DWdZ-gWd.js";import{T as ot}from"../chunks/Dr9VXG2L.js";import{T as he}from"../chunks/DnyxC-7e.js";import{G as we}from"../chunks/DEjX2dQL.js";import{U as vt}from"../chunks/D8KKMlRR.js";import{R as ke}from"../chunks/NC3V-jhH.js";var lt=c('<div class="flex items-center justify-center py-12"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div></div>'),ct=c('<div class="bg-red-50 border border-red-200 rounded-lg p-4"><p class="text-sm text-red-800"> </p></div>'),xt=c('<div class="card p-12 text-center animate-fade-in"><div class="mb-4"><!></div> <h3 class="text-lg font-medium text-gray-900 dark:text-gray-100 mb-2">No projects yet</h3> <p class="text-gray-500 dark:text-gray-400 mb-6">Create your first project to start syncing Elastic Security rules with Git.</p> <a href="/projects/new" class="btn inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 hover:shadow-md transition-all"><!> Create Project</a></div>'),gt=c('<p class="text-sm text-gray-500 dark:text-gray-400 mt-1 line-clamp-2"> </p>'),mt=c('<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-400">Export Only</span>'),pt=c('<div class="flex items-start gap-2"><div class="p-1.5 bg-yellow-100 rounded"><!></div> <div class="min-w-0"><div class="text-xs font-medium text-gray-700 dark:text-gray-300">Test</div> <div class="text-xs text-gray-500 dark:text-gray-400 truncate"> </div> <div class="text-xs text-gray-400 dark:text-gray-500 flex items-center gap-1"><!> </div></div></div>'),_t=c('<div class="flex items-center gap-2 text-gray-400 dark:text-gray-500"><!> <span class="text-xs">No test env</span></div>'),ft=c('<div class="flex items-center gap-2 text-gray-400 dark:text-gray-500"><!> <span class="text-xs text-emerald-600 dark:text-emerald-400">Elastic â†’ Git</span></div>'),yt=c('<div class="flex items-start gap-2"><div class="p-1.5 bg-green-100 rounded"><!></div> <div class="min-w-0"><div class="text-xs font-medium text-gray-700 dark:text-gray-300">Production</div> <div class="text-xs text-gray-500 dark:text-gray-400 truncate"> </div> <div class="text-xs text-gray-400 dark:text-gray-500 flex items-center gap-1"><!> </div></div></div>'),ut=c('<div class="flex items-center gap-2 text-gray-400 dark:text-gray-500"><!> <span class="text-xs">No prod env</span></div>'),bt=c('<div class="card overflow-hidden animate-fade-in"><div class="p-6 border-b border-gray-100 dark:border-gray-800"><div class="flex items-start justify-between"><div class="flex-1"><a class="text-lg font-semibold text-gray-900 dark:text-gray-100 hover:text-blue-600"> </a> <!></div> <div class="flex items-center gap-1.5"><!> <span> </span></div></div></div> <div class="px-6 py-4 bg-gray-50 dark:bg-gray-800"><div class="grid grid-cols-2 gap-4"><!> <!></div></div> <div class="px-6 py-3 text-xs text-gray-500 dark:text-gray-400 border-t border-gray-100 dark:border-gray-800"><div class="flex items-center justify-between"><span><strong>Elastic:</strong> </span> <span><strong>Git:</strong> </span></div></div> <div class="flex items-center gap-2 p-4 border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900"><a class="btn flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 hover:shadow-md transition-all text-sm"><!> Manage</a> <button class="btn flex items-center gap-2 px-3 py-2 text-red-600 hover:bg-red-50 border border-red-200 rounded-lg transition-all text-sm"><!></button></div></div>'),ht=c('<div class="grid grid-cols-1 lg:grid-cols-2 gap-6"></div>'),wt=c('<div class="space-y-6"><div class="flex items-center justify-between animate-fade-in"><div><h1 class="text-3xl font-bold text-gray-900 dark:text-gray-100">Projects</h1> <p class="mt-1 text-sm text-gray-500 dark:text-gray-400">Manage your Elastic Security rule sync projects</p></div> <a href="/projects/new" class="btn inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 hover:shadow-md transition-all"><!> New Project</a></div> <!></div>');function Dt(je,Ee){Ve(Ee,!1);let C=Z([]),D=Z(!0),R=Z("");Qe(async()=>{await ae()});async function ae(){try{A(D,!0);const d=await S.collection("projects").getFullList({expand:"elastic_instance,git_repository",sort:"-created"}),n=[];for(const x of d)try{const W=await S.collection("environments").getFullList({filter:`project = "${x.id}"`});n.push({...x,environments:W})}catch{n.push({...x,environments:[]})}A(C,n)}catch(d){A(R,d.message)}finally{A(D,!1)}}function re(d){var n;return(n=d.environments)==null?void 0:n.find(x=>x.name==="test")}function se(d){var n;return(n=d.environments)==null?void 0:n.find(x=>x.name==="production")}async function Pe(d){if(confirm("Are you sure you want to delete this project and all its environments?"))try{const n=await S.collection("environments").getFullList({filter:`project = "${d}"`});for(const x of n)await S.collection("environments").delete(x.id);await S.collection("projects").delete(d),await ae()}catch(n){alert(`Error: ${n.message}`)}}Ke();var I=wt();it("rqn88j",d=>{Ye(()=>{Ze.title="Projects - Elastic Git Sync"})});var O=t(I),ie=i(t(O),2),Ge=t(ie);be(Ge,{class:"w-5 h-5"}),P(),e(ie),e(O);var Te=i(O,2);{var Se=d=>{var n=lt();v(d,n)},Le=d=>{var n=ee(),x=te(n);{var W=b=>{var h=ct(),L=t(h),z=t(L,!0);e(L),e(h),T(()=>m(z,a(R))),v(b,h)},Ne=b=>{var h=ee(),L=te(h);{var z=w=>{var y=xt(),G=t(y),o=t(G);dt(o,{class:"w-12 h-12 text-gray-400 dark:text-gray-500 mx-auto"}),e(G);var N=i(G,6),k=t(N);be(k,{class:"w-5 h-5"}),P(),e(N),e(y),v(w,y)},Ue=w=>{var y=ht();tt(y,5,()=>a(C),st,(G,o,N)=>{var k=bt();at(k,`animation-delay: ${N*50}ms; opacity: 0;`);var B=t(k),de=t(B),H=t(de),U=t(H),Fe=t(U,!0);e(U);var Me=i(U,2);{var $e=r=>{var s=gt(),l=t(s,!0);e(s),T(()=>m(l,a(o).description)),v(r,s)};f(Me,r=>{a(o).description&&r($e)})}e(H);var ne=i(H,2),oe=t(ne);{var qe=r=>{var s=mt();v(r,s)};f(oe,r=>{a(o).sync_mode==="export_only"&&r(qe)})}var J=i(oe,2),Ae=t(J,!0);e(J),e(ne),e(de),e(B);var K=i(B,2),ve=t(K),le=t(ve);{var Ce=r=>{const s=ye(()=>re(a(o)));var l=pt(),_=t(l),Y=t(_);he(Y,{class:"w-4 h-4 text-yellow-600"}),e(_);var p=i(_,2),g=i(t(p),2),u=t(g,!0);e(g);var j=i(g,2),M=t(j);we(M,{class:"w-3 h-3"});var $=i(M);e(j),e(p),e(l),T(()=>{var E,q;m(u,(E=a(s))==null?void 0:E.elastic_space),m($,` ${((q=a(s))==null?void 0:q.git_branch)??""}`)}),v(r,l)},De=r=>{var s=_t(),l=t(s);he(l,{class:"w-4 h-4"}),P(2),e(s),v(r,s)};f(le,r=>{re(a(o))?r(Ce):r(De,!1)})}var Re=i(le,2);{var Ie=r=>{var s=ft(),l=t(s);vt(l,{class:"w-4 h-4 text-emerald-500"}),P(2),e(s),v(r,s)},Oe=r=>{var s=ee(),l=te(s);{var _=p=>{const g=ye(()=>se(a(o)));var u=yt(),j=t(u),M=t(j);ke(M,{class:"w-4 h-4 text-green-600"}),e(j);var $=i(j,2),E=i(t($),2),q=t(E,!0);e(E);var me=i(E,2),pe=t(me);we(pe,{class:"w-3 h-3"});var Je=i(pe);e(me),e($),e(u),T(()=>{var _e,fe;m(q,(_e=a(g))==null?void 0:_e.elastic_space),m(Je,` ${((fe=a(g))==null?void 0:fe.git_branch)??""}`)}),v(p,u)},Y=p=>{var g=ut(),u=t(g);ke(u,{class:"w-4 h-4"}),P(2),e(g),v(p,g)};f(l,p=>{se(a(o))?p(_):p(Y,!1)},!0)}v(r,s)};f(Re,r=>{a(o).sync_mode==="export_only"?r(Ie):r(Oe,!1)})}e(ve),e(K);var Q=i(K,2),ce=t(Q),V=t(ce),We=i(t(V));e(V);var xe=i(V,2),ze=i(t(xe));e(xe),e(ce),e(Q);var ge=i(Q,2),F=t(ge),Be=t(F);nt(Be,{class:"w-4 h-4"}),P(),e(F);var X=i(F,2),He=t(X);ot(He,{class:"w-4 h-4"}),e(X),e(ge),e(k),T(()=>{var r,s,l,_;ue(U,"href",`/projects/${a(o).id??""}`),m(Fe,a(o).name),rt(J,1,`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium
									${a(o).is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200"}`),m(Ae,a(o).is_active?"Active":"Inactive"),m(We,` ${(((s=(r=a(o).expand)==null?void 0:r.elastic_instance)==null?void 0:s.name)||"Unknown")??""}`),m(ze,` ${(((_=(l=a(o).expand)==null?void 0:l.git_repository)==null?void 0:_.name)||"Unknown")??""}`),ue(F,"href",`/projects/${a(o).id??""}`)}),et("click",X,()=>Pe(a(o).id)),v(G,k)}),e(y),v(w,y)};f(L,w=>{a(C).length===0?w(z):w(Ue,!1)},!0)}v(b,h)};f(x,b=>{a(R)?b(W):b(Ne,!1)},!0)}v(d,n)};f(Te,d=>{a(D)?d(Se):d(Le,!1)})}e(I),v(je,I),Xe()}export{Dt as component};
