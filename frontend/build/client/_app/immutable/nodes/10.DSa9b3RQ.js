import"../chunks/CWj6FrbW.js";import{s as g,o as $r}from"../chunks/O7RWNxBF.js";import{c as ve,f as _,a as n,b7 as jr,p as fr,l as D,R as qt,S as Sr,s as l,i as e,b as mr,h as r,g as a,r as t,t as m,d as o,U as Se,n as te,o as je,T as Cr,$ as Rr,j as xt,az as Er}from"../chunks/C9NYA0Nw.js";import{i as d}from"../chunks/D2ldot_M.js";import{I as Gt,s as Ut,r as pr,c as Tr,e as tr,f as Nr,a as _t,i as rr,b as tt}from"../chunks/rMS1oNTx.js";import{h as Pr}from"../chunks/k5AYXn5z.js";import{l as Dt,s as zt,a as Mr,b as Fr}from"../chunks/Cs0PMOxO.js";import{p as Ar}from"../chunks/2Ejqapzg.js";import{g as Lr}from"../chunks/--SkU8XW.js";import{a as ut,p as Me}from"../chunks/BUCyip3L.js";import{b as Or}from"../chunks/DkcqxK1V.js";import"../chunks/Dl2LfGm4.js";import{S as qr}from"../chunks/CMzP7FxD.js";import{U as ar}from"../chunks/zdIQ9pKd.js";import{L as ft}from"../chunks/suUg0HP9.js";import{T as yr}from"../chunks/DVBk0H5N.js";import{A as Gr}from"../chunks/NOXAU2LB.js";import{P as Ur,R as xr}from"../chunks/CUX4yob5.js";import{T as Dr}from"../chunks/Bv-fdLbk.js";import{D as zr}from"../chunks/CEdrxlJt.js";import{E as er}from"../chunks/DXfXwPrm.js";import{F as Jr}from"../chunks/BlCS-srp.js";import{G as gr,D as Br}from"../chunks/xUIdyWZf.js";import{C as _r}from"../chunks/BeHt4r-J.js";import{T as Vr}from"../chunks/ChWmmJ1c.js";import{C as ur}from"../chunks/8Q2aHwtb.js";import{R as Ir}from"../chunks/Cx4sQyjC.js";import{C as Hr}from"../chunks/CyniT6t_.js";import{G as Qr}from"../chunks/Ll8lceZU.js";import{A as Wr}from"../chunks/BdwfjclZ.js";import{C as Xr}from"../chunks/DJoU24lj.js";function Kr(ce,w){const I=Dt(w,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"}],["circle",{cx:"12",cy:"12",r:"3"}]];Gt(ce,zt({name:"eye"},()=>I,{get iconNode(){return T},children:(re,h)=>{var $=ve(),N=_($);Ut(N,w,"default",{}),n(re,$)},$$slots:{default:!0}}))}function Yr(ce,w){const I=Dt(w,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=[["path",{d:"M10 10.5 8 13l2 2.5"}],["path",{d:"m14 10.5 2 2.5-2 2.5"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2z"}]];Gt(ce,zt({name:"folder-code"},()=>I,{get iconNode(){return T},children:(re,h)=>{var $=ve(),N=_($);Ut(N,w,"default",{}),n(re,$)},$$slots:{default:!0}}))}function Zr(ce,w){const I=Dt(w,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5"}],["path",{d:"m9 11 3 3L22 4"}]];Gt(ce,zt({name:"square-check-big"},()=>I,{get iconNode(){return T},children:(re,h)=>{var $=ve(),N=_($);Ut(N,w,"default",{}),n(re,$)},$$slots:{default:!0}}))}function ea(ce,w){const I=Dt(w,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}]];Gt(ce,zt({name:"square"},()=>I,{get iconNode(){return T},children:(re,h)=>{var $=ve(),N=_($);Ut(N,w,"default",{}),n(re,$)},$$slots:{default:!0}}))}function ta(ce,w){const I=Dt(w,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]];Gt(ce,zt({name:"x"},()=>I,{get iconNode(){return T},children:(re,h)=>{var $=ve(),N=_($);Ut(N,w,"default",{}),n(re,$)},$$slots:{default:!0}}))}var ra=o("<!> Deselect All",1),aa=o("<!> Select All",1),sa=o('<div class="flex items-center justify-center py-12"><!> <span class="ml-2 text-sm text-gray-500 dark:text-gray-400">Loading rules from Elastic...</span></div>'),na=o('<div class="flex items-center gap-3 py-8 justify-center"><!> <span class="text-sm text-red-600"> </span></div>'),oa=o('<div class="text-center py-8 text-sm text-gray-500 dark:text-gray-400"><!></div>'),ia=o('<span class="w-2 h-2 rounded-full bg-green-500 flex-shrink-0" title="Enabled"></span>'),da=o('<span class="w-2 h-2 rounded-full bg-gray-300 flex-shrink-0" title="Disabled"></span>'),la=o('<label class="flex items-center gap-3 py-2.5 px-3 hover:bg-gray-50 dark:hover:bg-gray-800 rounded-lg cursor-pointer transition-colors border-b border-gray-50 dark:border-gray-800 last:border-0"><input type="checkbox" class="w-4 h-4 rounded border-gray-300 dark:border-gray-600 text-yellow-600 focus:ring-yellow-500"/> <div class="flex-1 min-w-0"><div class="font-medium text-sm text-gray-900 dark:text-gray-100 truncate"> </div> <div class="text-xs text-gray-400 dark:text-gray-500 truncate"> </div></div> <span> </span> <span class="text-xs bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 px-2 py-0.5 rounded flex-shrink-0"> </span> <!></label>'),va=o('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"><div class="bg-white dark:bg-gray-900 rounded-lg shadow-xl max-w-3xl w-full max-h-[85vh] overflow-hidden flex flex-col"><div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between flex-shrink-0"><div><h2 class="text-xl font-semibold text-gray-900 dark:text-gray-100">Select Rules to Export</h2> <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">Export to branch: <code class="text-xs bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded"> </code></p></div> <button class="text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 transition-colors"><!></button></div> <div class="px-6 py-3 border-b border-gray-100 dark:border-gray-800 flex items-center gap-3 flex-shrink-0 flex-wrap"><div class="relative flex-1 min-w-[200px]"><!> <input type="text" placeholder="Search rules..." class="w-full pl-9 pr-3 py-2 text-sm border border-gray-200 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:border-transparent"/></div> <select class="text-sm border border-gray-200 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-yellow-500"><option>All Severities</option><option>Critical</option><option>High</option><option>Medium</option><option>Low</option></select> <button class="inline-flex items-center gap-1.5 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors"><!></button></div> <div class="flex-1 overflow-y-auto px-6 py-2 min-h-0"><!></div> <div class="px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between flex-shrink-0 bg-gray-50 dark:bg-gray-800"><span class="text-sm text-gray-500 dark:text-gray-400"> </span> <div class="flex items-center gap-3"><button class="px-4 py-2 text-sm text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">Cancel</button> <button class="px-4 py-2 text-sm text-yellow-700 border border-yellow-300 rounded-lg hover:bg-yellow-50 transition-colors font-medium"> </button> <button class="inline-flex items-center gap-2 px-4 py-2 text-sm bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed"><!> </button></div></div></div></div>');function ca(ce,w){fr(w,!0);let I=D(qt([])),T=D(qt(new Set)),re=D(!1),h=D(""),$=D(""),N=D("all"),Ce=Se(()=>e(I).filter(c=>{const x=!e($)||c.name.toLowerCase().includes(e($).toLowerCase())||c.rule_id.toLowerCase().includes(e($).toLowerCase()),Ee=e(N)==="all"||c.severity===e(N);return x&&Ee})),H=Se(()=>e(T).size),Re=Se(()=>e(Ce).length>0&&e(Ce).every(c=>e(T).has(c.rule_id)));Sr(()=>{w.open&&Ie()});async function Ie(){l(re,!0),l(h,""),l($,""),l(N,"all");try{const x=await(await ut(`${Me.baseUrl}/api/rules/list`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_id:w.projectId,space:w.space})})).json();x.success?(l(I,x.rules,!0),l(T,new Set(e(I).map(Ee=>Ee.rule_id)),!0)):l(h,x.message||"Failed to load rules",!0)}catch(c){l(h,c.message,!0)}finally{l(re,!1)}}function rt(c){const x=new Set(e(T));x.has(c)?x.delete(c):x.add(c),l(T,x,!0)}function at(){if(e(Re)){const c=new Set(e(T));for(const x of e(Ce))c.delete(x.rule_id);l(T,c,!0)}else{const c=new Set(e(T));for(const x of e(Ce))c.add(x.rule_id);l(T,c,!0)}}function st(){w.onexport(Array.from(e(T)))}function mt(){w.onexport(null)}function Jt(c){switch(c){case"critical":return"bg-red-100 text-red-700";case"high":return"bg-orange-100 text-orange-700";case"medium":return"bg-yellow-100 text-yellow-700";case"low":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-600"}}var He=ve(),Qe=_(He);{var ae=c=>{var x=va();x.__keydown=j=>j.key==="Escape"&&w.onclose();var Ee=r(x);Ee.__click=j=>j.stopPropagation();var yt=r(Ee),bt=r(yt),Bt=a(r(bt),2),Ke=a(r(Bt)),ht=r(Ke,!0);t(Ke),t(Bt),t(bt);var kt=a(bt,2);kt.__click=function(...j){var G;(G=w.onclose)==null||G.apply(this,j)};var sr=r(kt);ta(sr,{class:"w-5 h-5"}),t(kt),t(yt);var nt=a(yt,2),ot=r(nt),wt=r(ot);qr(wt,{class:"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500"});var Vt=a(wt,2);pr(Vt),t(ot);var it=a(ot,2),$t=r(it);$t.value=$t.__value="all";var jt=a($t);jt.value=jt.__value="critical";var St=a(jt);St.value=St.__value="high";var dt=a(St);dt.value=dt.__value="medium";var Ct=a(dt);Ct.value=Ct.__value="low",t(it);var lt=a(it,2);lt.__click=at;var It=r(lt);{var Rt=j=>{var G=ra(),Ue=_(G);Zr(Ue,{class:"w-4 h-4"}),te(),n(j,G)},Et=j=>{var G=aa(),Ue=_(G);ea(Ue,{class:"w-4 h-4"}),te(),n(j,G)};d(It,j=>{e(Re)?j(Rt):j(Et,!1)})}t(lt),t(nt);var Ye=a(nt,2),Tt=r(Ye);{var nr=j=>{var G=sa(),Ue=r(G);ft(Ue,{class:"w-6 h-6 animate-spin text-yellow-600"}),te(2),t(G),n(j,G)},or=j=>{var G=ve(),Ue=_(G);{var s=y=>{var F=na(),L=r(F);yr(L,{class:"w-5 h-5 text-red-500"});var X=a(L,2),be=r(X,!0);t(X),t(F),m(()=>g(be,e(h))),n(y,F)},i=y=>{var F=ve(),L=_(F);{var X=ge=>{var Te=oa(),De=r(Te);{var We=K=>{var se=je("No rules match your filter.");n(K,se)},le=K=>{var se=je("No rules found in Elastic.");n(K,se)};d(De,K=>{e($)||e(N)!=="all"?K(We):K(le,!1)})}t(Te),n(ge,Te)},be=ge=>{var Te=ve(),De=_(Te);tr(De,17,()=>e(Ce),rr,(We,le)=>{var K=la(),se=r(K);pr(se),se.__change=()=>rt(e(le).rule_id);var Fe=a(se,2),Ze=r(Fe),lr=r(Ze,!0);t(Ze);var Kt=a(Ze,2),Mt=r(Kt,!0);t(Kt),t(Fe);var gt=a(Fe,2),vr=r(gt,!0);t(gt);var Ft=a(gt,2),Yt=r(Ft,!0);t(Ft);var cr=a(Ft,2);{var Zt=he=>{var et=ia();n(he,et)},At=he=>{var et=da();n(he,et)};d(cr,he=>{e(le).enabled?he(Zt):he(At,!1)})}t(K),m((he,et)=>{Nr(se,he),g(lr,e(le).name),g(Mt,e(le).rule_id),_t(gt,1,`text-xs px-2 py-0.5 rounded font-medium flex-shrink-0 ${et??""}`),g(vr,e(le).severity),g(Yt,e(le).type)},[()=>e(T).has(e(le).rule_id),()=>Jt(e(le).severity)]),n(We,K)}),n(ge,Te)};d(L,ge=>{e(Ce).length===0?ge(X):ge(be,!1)},!0)}n(y,F)};d(Ue,y=>{e(h)?y(s):y(i,!1)},!0)}n(j,G)};d(Tt,j=>{e(re)?j(nr):j(or,!1)})}t(Ye);var Ht=a(Ye,2),Nt=r(Ht),ir=r(Nt);t(Nt);var Qt=a(Nt,2),Pt=r(Qt);Pt.__click=function(...j){var G;(G=w.onclose)==null||G.apply(this,j)};var vt=a(Pt,2);vt.__click=mt;var Wt=r(vt);t(vt);var ct=a(vt,2);ct.__click=st;var Xt=r(ct);ar(Xt,{class:"w-4 h-4"});var dr=a(Xt);t(ct),t(Qt),t(Ht),t(Ee),t(x),m(()=>{g(ht,w.branch),g(ir,`${e(H)??""} of ${e(I).length??""} rules selected`),g(Wt,`Export All (${e(I).length??""})`),ct.disabled=e(H)===0,g(dr,` Export Selected (${e(H)??""})`)}),Or(Vt,()=>e($),j=>l($,j)),Tr(it,()=>e(N),j=>l(N,j)),n(c,x)};d(Qe,c=>{w.open&&c(ae)})}n(ce,He),mr()}jr(["keydown","click","change"]);var ga=o('<h1 class="text-3xl font-bold text-gray-900 dark:text-gray-100">Loading...</h1>'),pa=o('<p class="mt-1 text-sm text-gray-500 dark:text-gray-400"> </p>'),xa=o('<div class="flex items-center gap-3"><h1 class="text-3xl font-bold text-gray-900 dark:text-gray-100"> </h1> <span> </span></div> <!>',1),_a=o('<div class="flex items-center gap-2"><a class="inline-flex items-center gap-2 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors"><!> Edit</a> <button class="inline-flex items-center gap-2 px-4 py-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg transition-colors"><!></button></div>'),ua=o('<div class="alert bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4"><p class="text-sm text-red-800 dark:text-red-200"> </p></div>'),fa=o('<div class="alert bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4"><p class="text-sm text-green-800 dark:text-green-200"> </p></div>'),ma=o('<div class="flex items-center justify-center py-12"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div></div>'),ya=o('<a target="_blank" class="inline-flex items-center gap-2 px-3 py-1.5 bg-orange-50 dark:bg-orange-900/20 text-orange-700 dark:text-orange-400 rounded-lg text-sm hover:bg-orange-100 dark:hover:bg-orange-900/30 transition-colors"><!> <span class="font-medium"> </span> <!></a>'),ba=o('<a target="_blank" class="inline-flex items-center gap-2 px-3 py-1.5 bg-purple-50 dark:bg-purple-900/20 text-purple-700 dark:text-purple-400 rounded-lg text-sm hover:bg-purple-100 dark:hover:bg-purple-900/30 transition-colors"><!> <span class="font-medium"> </span> <!></a> <a target="_blank" class="inline-flex items-center gap-2 px-3 py-1.5 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-400 rounded-lg text-sm hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors"><!> <span class="font-medium">Merge Requests</span> <!></a>',1),ha=o('<div class="hidden sm:block w-px h-5 bg-gray-200 dark:bg-gray-700"></div> <div class="inline-flex items-center gap-1.5 text-xs text-gray-500 dark:text-gray-400"><!> </div>',1),ka=o('<p class="text-xs text-gray-500 dark:text-gray-400"> </p>'),wa=o("<!> Syncing...",1),$a=o("<!> Export to Git",1),ja=o('<div class="space-y-4"><div class="flex items-center gap-4 text-sm"><div class="flex items-center gap-2"><span class="text-gray-500 dark:text-gray-400">Rules:</span> <span class="font-semibold text-gray-900 dark:text-gray-100"> </span></div> <div class="flex items-center gap-2"><span class="text-gray-500 dark:text-gray-400">Branch:</span> <span class="font-mono text-xs bg-gray-100 dark:bg-gray-800 px-2 py-0.5 rounded"> </span></div></div> <button class="btn w-full inline-flex items-center justify-center gap-2 px-4 py-2.5 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 hover:shadow-md transition-all disabled:opacity-50 text-sm font-medium"><!></button></div>'),Sa=o('<p class="text-sm text-emerald-700 dark:text-emerald-400">No environment configured</p>'),Ca=o('<div class="max-w-md"><div class="bg-emerald-50 dark:bg-emerald-900/10 border border-emerald-200 dark:border-emerald-800/50 rounded-xl p-5"><div class="flex items-center gap-3 mb-4"><div class="p-2.5 bg-emerald-100 dark:bg-emerald-900/30 rounded-lg"><!></div> <div><h3 class="font-semibold text-gray-900 dark:text-gray-100">Export to Git</h3> <!></div></div> <!></div></div>'),Ra=o('<p class="text-xs text-gray-500 dark:text-gray-400 truncate"> </p>'),Ea=o("<!> Syncing...",1),Ta=o("<!> Export",1),Na=o('<div class="space-y-3"><div class="flex items-center justify-between text-sm"><span class="text-gray-500 dark:text-gray-400">Rules</span> <span class="font-semibold text-gray-900 dark:text-gray-100"> </span></div> <div class="flex items-center justify-between text-sm"><span class="text-gray-500 dark:text-gray-400">Branch</span> <span class="font-mono text-xs bg-white dark:bg-gray-800 border border-yellow-200 dark:border-yellow-800/50 px-2 py-0.5 rounded"> </span></div> <button class="btn w-full inline-flex items-center justify-center gap-2 px-4 py-2.5 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 hover:shadow-md transition-all disabled:opacity-50 text-sm font-medium"><!></button></div>'),Pa=o('<p class="text-sm text-yellow-700 dark:text-yellow-400">Not configured</p>'),Ma=o("<!> Creating...",1),Fa=o("<!> Create MR",1),Aa=o('<a target="_blank" class="block text-center text-xs text-blue-600 dark:text-blue-400 hover:underline">View open MRs <!></a>'),La=o('<div class="space-y-3"><div class="flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400"><!> <span class="font-mono text-xs truncate"> </span> <!> <span class="font-mono text-xs truncate"> </span></div> <button class="btn w-full inline-flex items-center justify-center gap-2 px-4 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 hover:shadow-md transition-all disabled:opacity-50 text-sm font-medium"><!></button> <!></div>'),Oa=o('<p class="text-sm text-blue-700 dark:text-blue-400">Configure both environments</p>'),qa=o('<p class="text-xs text-gray-500 dark:text-gray-400 truncate"> </p>'),Ga=o("<!> Syncing...",1),Ua=o("<!> Import",1),Da=o('<div class="space-y-3"><div class="flex items-center justify-between text-sm"><span class="text-gray-500 dark:text-gray-400">Rules</span> <span class="font-semibold text-gray-900 dark:text-gray-100"> </span></div> <div class="flex items-center justify-between text-sm"><span class="text-gray-500 dark:text-gray-400">Branch</span> <span class="font-mono text-xs bg-white dark:bg-gray-800 border border-green-200 dark:border-green-800/50 px-2 py-0.5 rounded"> </span></div> <button class="btn w-full inline-flex items-center justify-center gap-2 px-4 py-2.5 bg-green-600 text-white rounded-lg hover:bg-green-700 hover:shadow-md transition-all disabled:opacity-50 text-sm font-medium"><!></button></div>'),za=o('<p class="text-sm text-green-700 dark:text-green-400">Not configured</p>'),Ja=o('<div class="flex items-start gap-3"><div class="flex-1 min-w-0"><div class="flex items-center gap-2 mb-3"><span class="flex-shrink-0 w-6 h-6 bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400 rounded-full flex items-center justify-center text-xs font-bold">1</span> <div class="flex-1 h-px bg-gray-200 dark:bg-gray-700"></div></div> <div class="bg-yellow-50 dark:bg-yellow-900/10 border border-yellow-200 dark:border-yellow-800/50 rounded-xl p-4"><div class="flex items-center gap-2 mb-3"><div class="p-2 bg-yellow-100 dark:bg-yellow-900/30 rounded-lg"><!></div> <div class="min-w-0"><h3 class="font-semibold text-sm text-gray-900 dark:text-gray-100">Export to Git</h3> <!></div></div> <!></div></div> <div class="flex items-center pt-10 flex-shrink-0"><!></div> <div class="flex-1 min-w-0"><div class="flex items-center gap-2 mb-3"><span class="flex-shrink-0 w-6 h-6 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-full flex items-center justify-center text-xs font-bold">2</span> <div class="flex-1 h-px bg-gray-200 dark:bg-gray-700"></div></div> <div class="bg-blue-50 dark:bg-blue-900/10 border border-blue-200 dark:border-blue-800/50 rounded-xl p-4"><div class="flex items-center gap-2 mb-3"><div class="p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg"><!></div> <div class="min-w-0"><h3 class="font-semibold text-sm text-gray-900 dark:text-gray-100">Merge Request</h3> <p class="text-xs text-gray-500 dark:text-gray-400">Review & Approve</p></div></div> <!></div></div> <div class="flex items-center pt-10 flex-shrink-0"><!></div> <div class="flex-1 min-w-0"><div class="flex items-center gap-2 mb-3"><span class="flex-shrink-0 w-6 h-6 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-full flex items-center justify-center text-xs font-bold">3</span> <div class="flex-1 h-px bg-transparent"></div></div> <div class="bg-green-50 dark:bg-green-900/10 border border-green-200 dark:border-green-800/50 rounded-xl p-4"><div class="flex items-center gap-2 mb-3"><div class="p-2 bg-green-100 dark:bg-green-900/30 rounded-lg"><!></div> <div class="min-w-0"><h3 class="font-semibold text-sm text-gray-900 dark:text-gray-100">Production</h3> <!></div></div> <!></div></div></div>'),Ba=o("<span> </span>"),Va=o('<div class="flex items-center justify-between px-6 py-2.5"><div class="flex items-center gap-2 min-w-0"><span> </span> <span class="text-sm text-gray-900 dark:text-gray-100 truncate"> </span></div> <span class="text-xs text-gray-400 dark:text-gray-500 flex-shrink-0 ml-2"> </span></div>'),Ia=o('<div class="px-6 py-2.5 text-center"><a class="text-xs font-medium text-amber-600 hover:text-amber-700 dark:text-amber-400"> </a></div>'),Ha=o('<div class="border-t border-gray-100 dark:border-gray-800 divide-y divide-gray-100 dark:divide-gray-800"><!> <!></div>'),Qa=o('<div class="card animate-fade-in border-l-4 border-l-amber-400" style="animation-delay: 150ms; opacity: 0;"><div class="flex items-center justify-between px-6 py-4"><div class="flex items-center gap-3"><div class="p-2 bg-amber-100 dark:bg-amber-900/30 rounded-lg"><!></div> <div><h2 class="text-lg font-semibold text-gray-900 dark:text-gray-100"> </h2> <div class="flex items-center gap-2 mt-1 flex-wrap"></div></div></div> <a class="inline-flex items-center gap-2 px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 hover:shadow-md transition-all text-sm font-medium"><!> Review Changes</a></div> <!></div>'),Wa=o('<div class="px-6 py-10 text-center"><!> <p class="text-sm text-gray-500 dark:text-gray-400">No sync jobs yet.</p> <p class="text-xs text-gray-400 dark:text-gray-500 mt-1">Start by exporting rules from your environment.</p></div>'),Xa=o("<!> ",1),Ka=o("<!> ",1),Ya=o("<!> ",1),Za=o('<p class="text-xs text-gray-500 dark:text-gray-400 mt-0.5"><!> <!> <!> <!> <!> <!> <!></p>'),es=o('<div class="flex items-center justify-between px-6 py-3 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors"><div class="flex items-center gap-3 min-w-0"><div><!></div> <div class="min-w-0"><div class="flex items-center gap-2"><span class="text-sm font-medium text-gray-900 dark:text-gray-100"><!></span> <span> </span></div> <!></div></div> <div class="text-xs text-gray-500 dark:text-gray-400 flex-shrink-0 ml-4"> </div></div>'),ts=o('<div class="px-6 py-3 border-t border-gray-100 dark:border-gray-800"><a href="/history" class="text-xs font-medium text-primary-600 hover:text-primary-700">View all sync history →</a></div>'),rs=o('<div class="divide-y divide-gray-100 dark:divide-gray-800"></div> <!>',1),as=o('<div class="card animate-fade-in" style="animation-delay: 50ms; opacity: 0;"><div class="flex items-center gap-4 px-6 py-3 flex-wrap"><!> <!> <div class="hidden sm:block w-px h-5 bg-gray-200 dark:bg-gray-700"></div> <div class="inline-flex items-center gap-1.5 text-xs text-gray-500 dark:text-gray-400"><!> <span class="font-mono"> </span></div> <!></div></div> <div class="card p-6 animate-fade-in" style="animation-delay: 100ms; opacity: 0;"><h2 class="text-lg font-semibold text-gray-900 dark:text-gray-100 mb-6">Sync Workflow</h2> <!></div> <!> <div class="card animate-fade-in" style="animation-delay: 200ms; opacity: 0;"><div class="flex items-center justify-between px-6 py-4 border-b border-gray-200 dark:border-gray-700"><h2 class="text-lg font-semibold text-gray-900 dark:text-gray-100">Recent Syncs</h2> <button class="p-1.5 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors"><!></button></div> <!></div>',1),ss=o('<div class="space-y-6"><div class="flex items-center justify-between animate-fade-in"><div><a href="/projects" class="inline-flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 mb-2 transition-colors duration-200"><!> Back to Projects</a> <!></div> <!></div> <!> <!> <!></div> <!>',1);function Ls(ce,w){fr(w,!0);const I=()=>Fr(Ar,"$page",T),[T,re]=Mr();let h=D(null),$=D(qt([])),N=D(qt([])),Ce=D(!0),H=D(""),Re=D(""),Ie=D(!1),rt=D(!1),at=D(!1),st=D(!1),mt=D(0),Jt=D(0),He=D(qt([])),Qe=D(0),ae=Se(()=>I().params.id),c=Se(()=>e($).find(s=>s.name==="test")),x=Se(()=>e($).find(s=>s.name==="production")),Ee=Se(()=>{var s;return((s=e(h))==null?void 0:s.sync_mode)==="export_only"});$r(async()=>{await yt()});async function yt(){try{l(Ce,!0),await Promise.all([bt(),Bt(),Ke(),ht(),kt()])}finally{l(Ce,!1)}}async function bt(){try{l(h,await Me.collection("projects").getOne(e(ae),{expand:"elastic_instance,git_repository"}),!0)}catch(s){l(H,s.message,!0)}}async function Bt(){try{l($,await Me.collection("environments").getFullList({filter:`project = "${e(ae)}"`}),!0)}catch(s){console.error("Failed to load environments:",s)}}async function Ke(){try{const s=await Me.collection("sync_jobs").getList(1,10,{filter:`project = "${e(ae)}"`,sort:"-created"});l(N,s.items,!0)}catch(s){console.error("Failed to load sync jobs:",s)}}async function ht(){try{const s=await ut(`${Me.baseUrl}/api/project/${e(ae)}/metrics`);if(s.ok){const i=await s.json();l(mt,i.test_rules||0,!0),l(Jt,i.prod_rules||0,!0)}}catch(s){console.error("Failed to load metrics:",s)}}async function kt(){try{const s=await ut(`${Me.baseUrl}/api/review/pending?project_id=${e(ae)}&status=pending`);if(s.ok){const i=await s.json();l(He,i.changes||[],!0),l(Qe,i.total||e(He).length,!0)}}catch(s){console.error("Failed to load pending changes:",s)}}function sr(){const s={};for(const i of e(He)){const y=i.change_type||"modified_rule";s[y]=(s[y]||0)+1}return s}function nt(s){return{new_rule:"New",modified_rule:"Modified",deleted_rule:"Deleted",rule_enabled:"Enabled",rule_disabled:"Disabled",exception_added:"Exception added",exception_removed:"Exception removed",exception_modified:"Exception modified",severity_changed:"Severity changed",tags_changed:"Tags changed",query_changed:"Query changed"}[s]||s.replace(/_/g," ")}function ot(s){switch(s){case"new_rule":return"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400";case"deleted_rule":return"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400";case"rule_enabled":return"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400";case"rule_disabled":return"bg-gray-100 text-gray-700 dark:bg-gray-900/30 dark:text-gray-400";default:return"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400"}}function wt(){l(st,!0)}async function Vt(s){if(l(st,!1),!!e(c))try{l(Ie,!0),l(H,""),l(Re,"");const i={project_id:e(ae),environment_id:e(c).id,direction:"elastic_to_git",branch:e(c).git_branch,space:e(c).elastic_space};s!==null&&(i.rule_ids=s);const F=await(await ut(`${Me.baseUrl}/api/sync/trigger`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)})).json();F.success?(l(Re,F.message,!0),await Ke(),await ht()):l(H,F.message||"Failed to sync",!0)}catch(i){l(H,i.message,!0)}finally{l(Ie,!1)}}async function it(){if(!(!e(c)||!e(x)))try{l(at,!0),l(H,""),l(Re,"");const i=await(await ut(`${Me.baseUrl}/api/merge-request/create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_id:e(ae),source_branch:e(c).git_branch,target_branch:e(x).git_branch,title:`[Elastic Git Sync] Promote rules from ${e(c).elastic_space} to ${e(x).elastic_space}`})})).json();if(i.success&&i.url){let y="Merge Request created!";i.conflicts_resolved&&(y+=` (${i.conflicts_count||"all"} conflicts auto-resolved)`),y+=" Opening in new tab...",l(Re,y,!0),window.open(i.url,"_blank")}else l(H,i.message||"Failed to create Merge Request",!0)}catch(s){l(H,s.message,!0)}finally{l(at,!1)}}async function $t(){if(e(x))try{l(rt,!0),l(H,""),l(Re,"");const i=await(await ut(`${Me.baseUrl}/api/sync/trigger`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_id:e(ae),environment_id:e(x).id,direction:"git_to_elastic",branch:e(x).git_branch,space:e(x).elastic_space})})).json();i.success?(l(Re,i.message,!0),await Ke(),await ht()):l(H,i.message||"Failed to sync",!0)}catch(s){l(H,s.message,!0)}finally{l(rt,!1)}}async function jt(){if(confirm("Are you sure you want to delete this project? This cannot be undone."))try{for(const s of e($))await Me.collection("environments").delete(s.id);await Me.collection("projects").delete(e(ae)),Lr("/projects")}catch(s){l(H,s.message,!0)}}function St(s){switch(s){case"completed":return"text-green-600";case"failed":return"text-red-600";case"running":return"text-blue-600";default:return"text-gray-600 dark:text-gray-400"}}function dt(s){switch(s){case"completed":return"bg-green-100";case"failed":return"bg-red-100";case"running":return"bg-blue-100";default:return"bg-gray-100 dark:bg-gray-800"}}function Ct(s){if(!s)return"Never";const i=new Date(s),F=new Date().getTime()-i.getTime(),L=Math.floor(F/6e4);if(L<1)return"Just now";if(L<60)return`${L}m ago`;const X=Math.floor(L/60);return X<24?`${X}h ago`:`${Math.floor(X/24)}d ago`}function lt(s){return(s==null?void 0:s.replace(/\.git$/,""))||""}var It=ss();Pr("ffmenf",s=>{Cr(()=>{var i;Rr.title=`${(((i=e(h))==null?void 0:i.name)||"Project")??""} - Elastic Git Sync`})});var Rt=_(It),Et=r(Rt),Ye=r(Et),Tt=r(Ye),nr=r(Tt);Gr(nr,{class:"w-4 h-4 transition-transform duration-200 hover:-translate-x-1"}),te(),t(Tt);var or=a(Tt,2);{var Ht=s=>{var i=ga();n(s,i)},Nt=s=>{var i=ve(),y=_(i);{var F=L=>{var X=xa(),be=_(X),ge=r(be),Te=r(ge,!0);t(ge);var De=a(ge,2),We=r(De,!0);t(De),t(be);var le=a(be,2);{var K=se=>{var Fe=pa(),Ze=r(Fe,!0);t(Fe),m(()=>g(Ze,e(h).description)),n(se,Fe)};d(le,se=>{e(h).description&&se(K)})}m(()=>{g(Te,e(h).name),_t(De,1,`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${e(Ee)?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-primary-100 text-primary-700"}`),g(We,e(Ee)?"Export Only":"Full Workflow")}),n(L,X)};d(y,L=>{e(h)&&L(F)},!0)}n(s,i)};d(or,s=>{e(Ce)?s(Ht):s(Nt,!1)})}t(Ye);var ir=a(Ye,2);{var Qt=s=>{var i=_a(),y=r(i),F=r(y);Ur(F,{class:"w-4 h-4"}),te(),t(y);var L=a(y,2),X=r(L);Dr(X,{class:"w-4 h-4"}),t(L),t(i),m(()=>tt(y,"href",`/projects/${e(ae)??""}/edit`)),xt("click",L,jt),n(s,i)};d(ir,s=>{e(h)&&s(Qt)})}t(Et);var Pt=a(Et,2);{var vt=s=>{var i=ua(),y=r(i),F=r(y,!0);t(y),t(i),m(()=>g(F,e(H))),n(s,i)};d(Pt,s=>{e(H)&&s(vt)})}var Wt=a(Pt,2);{var ct=s=>{var i=fa(),y=r(i),F=r(y,!0);t(y),t(i),m(()=>g(F,e(Re))),n(s,i)};d(Wt,s=>{e(Re)&&s(ct)})}var Xt=a(Wt,2);{var dr=s=>{var i=ma();n(s,i)},j=s=>{var i=ve(),y=_(i);{var F=L=>{var X=as(),be=_(X),ge=r(be),Te=r(ge);{var De=k=>{const b=Se(()=>e(h).expand.elastic_instance.url);var S=ya(),P=r(S);zr(P,{class:"w-3.5 h-3.5"});var A=a(P,2),M=r(A,!0);t(A);var C=a(A,2);er(C,{class:"w-3 h-3 opacity-50"}),t(S),m(()=>{tt(S,"href",`${e(b)??""}/app/security/rules`),g(M,e(h).expand.elastic_instance.name)}),n(k,S)};d(Te,k=>{var b;(b=e(h).expand)!=null&&b.elastic_instance&&k(De)})}var We=a(Te,2);{var le=k=>{const b=Se(()=>lt(e(h).expand.git_repository.url));var S=ba(),P=_(S),A=r(P);Jr(A,{class:"w-3.5 h-3.5"});var M=a(A,2),C=r(M,!0);t(M);var pe=a(M,2);er(pe,{class:"w-3 h-3 opacity-50"}),t(P);var ne=a(P,2),xe=r(ne);gr(xe,{class:"w-3.5 h-3.5"});var Ae=a(xe,4);er(Ae,{class:"w-3 h-3 opacity-50"}),t(ne),m(()=>{tt(P,"href",e(b)),g(C,e(h).expand.git_repository.name),tt(ne,"href",`${e(b)??""}/-/merge_requests`)}),n(k,S)};d(We,k=>{var b;(b=e(h).expand)!=null&&b.git_repository&&k(le)})}var K=a(We,4),se=r(K);Yr(se,{class:"w-3.5 h-3.5"});var Fe=a(se,2),Ze=r(Fe,!0);t(Fe),t(K);var lr=a(K,2);{var Kt=k=>{var b=ha(),S=a(_(b),2),P=r(S);_r(P,{class:"w-3.5 h-3.5"});var A=a(P);t(S),m(M=>g(A,` Last sync ${M??""}`),[()=>Ct(e(N)[0].created)]),n(k,b)};d(lr,k=>{e(N).length>0&&k(Kt)})}t(ge),t(be);var Mt=a(be,2),gt=a(r(Mt),2);{var vr=k=>{var b=Ca(),S=r(b),P=r(S),A=r(P),M=r(A);ar(M,{class:"w-5 h-5 text-emerald-600"}),t(A);var C=a(A,2),pe=a(r(C),2);{var ne=Y=>{var B=ka(),_e=r(B);t(B),m(()=>g(_e,`${e(c).elastic_space??""} → ${e(c).git_branch??""}`)),n(Y,B)};d(pe,Y=>{e(c)&&Y(ne)})}t(C),t(P);var xe=a(P,2);{var Ae=Y=>{var B=ja(),_e=r(B),Q=r(_e),ue=a(r(Q),2),fe=r(ue,!0);t(ue),t(Q);var ke=a(Q,2),we=a(r(ke),2),Z=r(we,!0);t(we),t(ke),t(_e);var z=a(_e,2),oe=r(z);{var ee=u=>{var v=wa(),J=_(v);ft(J,{class:"w-4 h-4 animate-spin"}),te(),n(u,v)},Le=u=>{var v=$a(),J=_(v);ar(J,{class:"w-4 h-4"}),te(),n(u,v)};d(oe,u=>{e(Ie)?u(ee):u(Le,!1)})}t(z),t(B),m(()=>{g(fe,e(mt)),g(Z,e(c).git_branch),z.disabled=e(Ie)}),xt("click",z,wt),n(Y,B)},ze=Y=>{var B=Sa();n(Y,B)};d(xe,Y=>{e(c)?Y(Ae):Y(ze,!1)})}t(S),t(b),n(k,b)},Ft=k=>{var b=Ja(),S=r(b),P=a(r(S),2),A=r(P),M=r(A),C=r(M);Vr(C,{class:"w-4 h-4 text-yellow-600"}),t(M);var pe=a(M,2),ne=a(r(pe),2);{var xe=f=>{var R=Ra(),V=r(R,!0);t(R),m(()=>g(V,e(c).elastic_space)),n(f,R)};d(ne,f=>{e(c)&&f(xe)})}t(pe),t(A);var Ae=a(A,2);{var ze=f=>{var R=Na(),V=r(R),qe=a(r(V),2),Be=r(qe,!0);t(qe),t(V);var Ne=a(V,2),p=a(r(Ne),2),E=r(p,!0);t(p),t(Ne);var U=a(Ne,2),de=r(U);{var Pe=q=>{var me=Ea(),Ve=_(me);ft(Ve,{class:"w-4 h-4 animate-spin"}),te(),n(q,me)},W=q=>{var me=Ta(),Ve=_(me);ar(Ve,{class:"w-4 h-4"}),te(),n(q,me)};d(de,q=>{e(Ie)?q(Pe):q(W,!1)})}t(U),t(R),m(()=>{g(Be,e(mt)),g(E,e(c).git_branch),U.disabled=e(Ie)}),xt("click",U,wt),n(f,R)},Y=f=>{var R=Pa();n(f,R)};d(Ae,f=>{e(c)?f(ze):f(Y,!1)})}t(P),t(S);var B=a(S,2),_e=r(B);ur(_e,{class:"w-6 h-6 text-gray-300 dark:text-gray-600"}),t(B);var Q=a(B,2),ue=a(r(Q),2),fe=r(ue),ke=r(fe),we=r(ke);gr(we,{class:"w-4 h-4 text-blue-600"}),t(ke),te(2),t(fe);var Z=a(fe,2);{var z=f=>{var R=La(),V=r(R),qe=r(V);Qr(qe,{class:"w-3.5 h-3.5 flex-shrink-0"});var Be=a(qe,2),Ne=r(Be,!0);t(Be);var p=a(Be,2);Wr(p,{class:"w-3.5 h-3.5 flex-shrink-0 text-gray-400 dark:text-gray-500"});var E=a(p,2),U=r(E,!0);t(E),t(V);var de=a(V,2),Pe=r(de);{var W=Ge=>{var ye=Ma(),Ot=_(ye);ft(Ot,{class:"w-4 h-4 animate-spin"}),te(),n(Ge,ye)},q=Ge=>{var ye=Fa(),Ot=_(ye);gr(Ot,{class:"w-4 h-4"}),te(),n(Ge,ye)};d(Pe,Ge=>{e(at)?Ge(W):Ge(q,!1)})}t(de);var me=a(de,2);{var Ve=Ge=>{var ye=Aa(),Ot=a(r(ye));er(Ot,{class:"w-3 h-3 inline"}),t(ye),m(wr=>tt(ye,"href",`${wr??""}/-/merge_requests`),[()=>lt(e(h).expand.git_repository.url)]),n(Ge,ye)};d(me,Ge=>{var ye;(ye=e(h).expand)!=null&&ye.git_repository&&Ge(Ve)})}t(R),m(()=>{g(Ne,e(c).git_branch),g(U,e(x).git_branch),de.disabled=e(at)}),xt("click",de,it),n(f,R)},oe=f=>{var R=Oa();n(f,R)};d(Z,f=>{e(c)&&e(x)?f(z):f(oe,!1)})}t(ue),t(Q);var ee=a(Q,2),Le=r(ee);ur(Le,{class:"w-6 h-6 text-gray-300 dark:text-gray-600"}),t(ee);var u=a(ee,2),v=a(r(u),2),J=r(v),ie=r(J),Je=r(ie);Ir(Je,{class:"w-4 h-4 text-green-600"}),t(ie);var O=a(ie,2),$e=a(r(O),2);{var Xe=f=>{var R=qa(),V=r(R,!0);t(R),m(()=>g(V,e(x).elastic_space)),n(f,R)};d($e,f=>{e(x)&&f(Xe)})}t(O),t(J);var Lt=a(J,2);{var pt=f=>{var R=Da(),V=r(R),qe=a(r(V),2),Be=r(qe,!0);t(qe),t(V);var Ne=a(V,2),p=a(r(Ne),2),E=r(p,!0);t(p),t(Ne);var U=a(Ne,2),de=r(U);{var Pe=q=>{var me=Ga(),Ve=_(me);ft(Ve,{class:"w-4 h-4 animate-spin"}),te(),n(q,me)},W=q=>{var me=Ua(),Ve=_(me);Br(Ve,{class:"w-4 h-4"}),te(),n(q,me)};d(de,q=>{e(rt)?q(Pe):q(W,!1)})}t(U),t(R),m(()=>{g(Be,e(Jt)),g(E,e(x).git_branch),U.disabled=e(rt)}),xt("click",U,$t),n(f,R)},Oe=f=>{var R=za();n(f,R)};d(Lt,f=>{e(x)?f(pt):f(Oe,!1)})}t(v),t(u),t(b),n(k,b)};d(gt,k=>{e(Ee)?k(vr):k(Ft,!1)})}t(Mt);var Yt=a(Mt,2);{var cr=k=>{const b=Se(sr);var S=Qa(),P=r(S),A=r(P),M=r(A),C=r(M);yr(C,{class:"w-5 h-5 text-amber-600"}),t(M);var pe=a(M,2),ne=r(pe),xe=r(ne);t(ne);var Ae=a(ne,2);tr(Ae,21,()=>Object.entries(e(b)),rr,(Q,ue)=>{var fe=Se(()=>Er(e(ue),2));let ke=()=>e(fe)[0],we=()=>e(fe)[1];var Z=Ba(),z=r(Z);t(Z),m((oe,ee)=>{_t(Z,1,`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium ${oe??""}`),g(z,`${we()??""} ${ee??""}`)},[()=>ot(ke()),()=>nt(ke())]),n(Q,Z)}),t(Ae),t(pe),t(A);var ze=a(A,2),Y=r(ze);Kr(Y,{class:"w-4 h-4"}),te(),t(ze),t(P);var B=a(P,2);{var _e=Q=>{var ue=Ha(),fe=r(ue);tr(fe,17,()=>e(He).slice(0,5),rr,(Z,z)=>{var oe=Va(),ee=r(oe),Le=r(ee),u=r(Le,!0);t(Le);var v=a(Le,2),J=r(v,!0);t(v),t(ee);var ie=a(ee,2),Je=r(ie,!0);t(ie),t(oe),m((O,$e,Xe)=>{_t(Le,1,`inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium ${O??""}`),g(u,$e),g(J,e(z).rule_name),g(Je,Xe)},[()=>ot(e(z).change_type),()=>nt(e(z).change_type),()=>e(z).rule_id.substring(0,8)]),n(Z,oe)});var ke=a(fe,2);{var we=Z=>{var z=Ia(),oe=r(z),ee=r(oe);t(oe),t(z),m(()=>{tt(oe,"href",`/review?project_id=${e(ae)??""}`),g(ee,`View all ${e(Qe)??""} pending changes →`)}),n(Z,z)};d(ke,Z=>{e(Qe)>5&&Z(we)})}t(ue),n(Q,ue)};d(B,Q=>{e(He).length>0&&Q(_e)})}t(S),m(()=>{g(xe,`${e(Qe)??""} ${e(Qe)===1?"Change":"Changes"} Pending Review`),tt(ze,"href",`/review?project_id=${e(ae)??""}`)}),n(k,S)};d(Yt,k=>{e(Qe)>0&&k(cr)})}var Zt=a(Yt,2),At=r(Zt),he=a(r(At),2),et=r(he);xr(et,{class:"w-4 h-4"}),t(he),t(At);var br=a(At,2);{var hr=k=>{var b=Wa(),S=r(b);xr(S,{class:"w-8 h-8 text-gray-300 dark:text-gray-600 mx-auto mb-2"}),te(4),t(b),n(k,b)},kr=k=>{var b=rs(),S=_(b);tr(S,21,()=>e(N).slice(0,8),rr,(M,C)=>{var pe=es(),ne=r(pe),xe=r(ne),Ae=r(xe);{var ze=u=>{Hr(u,{class:"w-4 h-4 text-green-600"})},Y=u=>{var v=ve(),J=_(v);{var ie=O=>{Xr(O,{class:"w-4 h-4 text-red-600"})},Je=O=>{var $e=ve(),Xe=_($e);{var Lt=Oe=>{ft(Oe,{class:"w-4 h-4 text-blue-600 animate-spin"})},pt=Oe=>{_r(Oe,{class:"w-4 h-4 text-yellow-600"})};d(Xe,Oe=>{e(C).status==="running"?Oe(Lt):Oe(pt,!1)},!0)}n(O,$e)};d(J,O=>{e(C).status==="failed"?O(ie):O(Je,!1)},!0)}n(u,v)};d(Ae,u=>{e(C).status==="completed"?u(ze):u(Y,!1)})}t(xe);var B=a(xe,2),_e=r(B),Q=r(_e),ue=r(Q);{var fe=u=>{var v=je("Export to Git");n(u,v)},ke=u=>{var v=ve(),J=_(v);{var ie=O=>{var $e=je("Import from Git");n(O,$e)},Je=O=>{var $e=je("Bidirectional");n(O,$e)};d(J,O=>{e(C).direction==="git_to_elastic"?O(ie):O(Je,!1)},!0)}n(u,v)};d(ue,u=>{e(C).direction==="elastic_to_git"?u(fe):u(ke,!1)})}t(Q);var we=a(Q,2),Z=r(we,!0);t(we),t(_e);var z=a(_e,2);{var oe=u=>{const v=Se(()=>typeof e(C).changes_summary=="string"?JSON.parse(e(C).changes_summary):e(C).changes_summary);var J=Za(),ie=r(J);{var Je=p=>{var E=je();m(()=>g(E,`${e(v).changes_detected??""} ${e(v).changes_detected===1?"change":"changes"} detected`)),n(p,E)};d(ie,p=>{e(v).changes_detected&&p(Je)})}var O=a(ie,2);{var $e=p=>{var E=Xa(),U=_(E);{var de=W=>{var q=je(",");n(W,q)};d(U,W=>{e(v).changes_detected&&W(de)})}var Pe=a(U);m(()=>g(Pe,`${e(v).pending_created??""} pending review`)),n(p,E)};d(O,p=>{e(v).pending_created&&p($e)})}var Xe=a(O,2);{var Lt=p=>{var E=Ka(),U=_(E);{var de=W=>{var q=je(",");n(W,q)};d(U,W=>{(e(v).changes_detected||e(v).pending_created)&&W(de)})}var Pe=a(U);m(()=>g(Pe,`${e(v).exported??""} exported`)),n(p,E)};d(Xe,p=>{e(v).exported&&p(Lt)})}var pt=a(Xe,2);{var Oe=p=>{var E=Ya(),U=_(E);{var de=W=>{var q=je(",");n(W,q)};d(U,W=>{(e(v).changes_detected||e(v).pending_created||e(v).exported)&&W(de)})}var Pe=a(U);m(()=>g(Pe,`${e(v).imported??""} imported`)),n(p,E)};d(pt,p=>{e(v).imported&&p(Oe)})}var f=a(pt,2);{var R=p=>{var E=je();m(()=>g(E,`, ${e(v).deleted??""} deleted`)),n(p,E)};d(f,p=>{e(v).deleted&&p(R)})}var V=a(f,2);{var qe=p=>{var E=je();m(()=>g(E,`, ${e(v).errors??""} ${e(v).errors===1?"error":"errors"}`)),n(p,E)};d(V,p=>{e(v).errors&&p(qe)})}var Be=a(V,2);{var Ne=p=>{var E=je("No changes");n(p,E)};d(Be,p=>{!e(v).changes_detected&&!e(v).pending_created&&!e(v).exported&&!e(v).imported&&!e(v).deleted&&p(Ne)})}t(J),n(u,J)};d(z,u=>{e(C).changes_summary&&u(oe)})}t(B),t(ne);var ee=a(ne,2),Le=r(ee,!0);t(ee),t(pe),m((u,v,J,ie)=>{_t(xe,1,`p-1.5 rounded-lg ${u??""}`),_t(we,1,`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${v??""} ${J??""}`),g(Z,e(C).status),g(Le,ie)},[()=>dt(e(C).status),()=>dt(e(C).status),()=>St(e(C).status),()=>Ct(e(C).created)]),n(M,pe)}),t(S);var P=a(S,2);{var A=M=>{var C=ts();n(M,C)};d(P,M=>{e(N).length>8&&M(A)})}n(k,b)};d(br,k=>{e(N).length===0?k(hr):k(kr,!1)})}t(Zt),m(()=>g(Ze,e(h).git_path||"/")),xt("click",he,Ke),n(L,X)};d(y,L=>{e(h)&&L(F)},!0)}n(s,i)};d(Xt,s=>{e(Ce)?s(dr):s(j,!1)})}t(Rt);var G=a(Rt,2);{var Ue=s=>{ca(s,{get open(){return e(st)},get projectId(){return e(ae)},get space(){return e(c).elastic_space},get branch(){return e(c).git_branch},onexport:Vt,onclose:()=>l(st,!1)})};d(G,s=>{e(c)&&s(Ue)})}n(ce,It),mr(),re()}export{Ls as component};
