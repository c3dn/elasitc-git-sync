import"../chunks/CWj6FrbW.js";import{i as Ue}from"../chunks/DBRSZtkI.js";import{o as Ve,s as x}from"../chunks/CdzGu8ER.js";import{c as ie,f as ne,a as l,p as ze,b as De,e as We,g as t,d as p,s as V,$ as Be,i as s,n as S,r as e,h as a,m as re,t as A,j as He,N as xe}from"../chunks/CbRa-Z4u.js";import{i as h}from"../chunks/CoDRCLiZ.js";import{I as Je,s as Ke,e as Oe,d as Qe,a as _e,b as Xe,i as Ye}from"../chunks/DZIrD1K_.js";import{h as Ze}from"../chunks/Bj3l4WMm.js";import{p as L}from"../chunks/VVSrSIoj.js";import{P as fe}from"../chunks/CYWbWdYt.js";import{l as et,s as tt}from"../chunks/BjUZiTXz.js";import{S as at}from"../chunks/DSPhBg84.js";import{T as st}from"../chunks/IMcaUzhR.js";import{T as ge,R as ue}from"../chunks/BWueu3Tx.js";import{G as be}from"../chunks/DYmn1PNj.js";function rt(z,F){const w=et(F,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5"}],["path",{d:"M3 12A9 3 0 0 0 21 12"}]];Je(z,tt({name:"database"},()=>w,{get iconNode(){return j},children:($,D)=>{var P=ie(),I=ne(P);Ke(I,F,"default",{}),l($,P)},$$slots:{default:!0}}))}var it=p('<div class="flex items-center justify-center py-12"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div></div>'),nt=p('<div class="bg-red-50 border border-red-200 rounded-lg p-4"><p class="text-sm text-red-800"> </p></div>'),ot=p('<div class="card p-12 text-center animate-fade-in"><div class="mb-4"><!></div> <h3 class="text-lg font-medium text-gray-900 mb-2">No projects yet</h3> <p class="text-gray-500 mb-6">Create your first project to start syncing Elastic Security rules with Git.</p> <a href="/projects/new" class="btn inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 hover:shadow-md transition-all"><!> Create Project</a></div>'),vt=p('<p class="text-sm text-gray-500 mt-1 line-clamp-2"> </p>'),dt=p('<div class="flex items-start gap-2"><div class="p-1.5 bg-yellow-100 rounded"><!></div> <div class="min-w-0"><div class="text-xs font-medium text-gray-700">Test</div> <div class="text-xs text-gray-500 truncate"> </div> <div class="text-xs text-gray-400 flex items-center gap-1"><!> </div></div></div>'),lt=p('<div class="flex items-center gap-2 text-gray-400"><!> <span class="text-xs">No test env</span></div>'),ct=p('<div class="flex items-start gap-2"><div class="p-1.5 bg-green-100 rounded"><!></div> <div class="min-w-0"><div class="text-xs font-medium text-gray-700">Production</div> <div class="text-xs text-gray-500 truncate"> </div> <div class="text-xs text-gray-400 flex items-center gap-1"><!> </div></div></div>'),pt=p('<div class="flex items-center gap-2 text-gray-400"><!> <span class="text-xs">No prod env</span></div>'),mt=p('<div class="card overflow-hidden animate-fade-in"><div class="p-6 border-b border-gray-100"><div class="flex items-start justify-between"><div class="flex-1"><a class="text-lg font-semibold text-gray-900 hover:text-blue-600"> </a> <!></div> <span> </span></div></div> <div class="px-6 py-4 bg-gray-50"><div class="grid grid-cols-2 gap-4"><!> <!></div></div> <div class="px-6 py-3 text-xs text-gray-500 border-t border-gray-100"><div class="flex items-center justify-between"><span><strong>Elastic:</strong> </span> <span><strong>Git:</strong> </span></div></div> <div class="flex items-center gap-2 p-4 border-t border-gray-200 bg-white"><a class="btn flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 hover:shadow-md transition-all text-sm"><!> Manage</a> <button class="btn flex items-center gap-2 px-3 py-2 text-red-600 hover:bg-red-50 border border-red-200 rounded-lg transition-all text-sm"><!></button></div></div>'),xt=p('<div class="grid grid-cols-1 lg:grid-cols-2 gap-6"></div>'),_t=p('<div class="space-y-6"><div class="flex items-center justify-between animate-fade-in"><div><h1 class="text-3xl font-bold text-gray-900">Projects</h1> <p class="mt-1 text-sm text-gray-500">Manage your Elastic Security rule sync projects</p></div> <a href="/projects/new" class="btn inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 hover:shadow-md transition-all"><!> New Project</a></div> <!></div>');function Gt(z,F){ze(F,!1);let w=re([]),j=re(!0),$=re("");Ve(async()=>{await D()});async function D(){try{V(j,!0);const n=await L.collection("projects").getFullList({expand:"elastic_instance,git_repository",sort:"-created"}),o=[];for(const c of n)try{const H=await L.collection("environments").getFullList({filter:`project = "${c.id}"`});o.push({...c,environments:H})}catch{o.push({...c,environments:[]})}V(w,o)}catch(n){V($,n.message)}finally{V(j,!1)}}function P(n){var o;return(o=n.environments)==null?void 0:o.find(c=>c.name==="test")}function I(n){var o;return(o=n.environments)==null?void 0:o.find(c=>c.name==="production")}async function ye(n){if(confirm("Are you sure you want to delete this project and all its environments?"))try{const o=await L.collection("environments").getFullList({filter:`project = "${n}"`});for(const c of o)await L.collection("environments").delete(c.id);await L.collection("projects").delete(n),await D()}catch(o){alert(`Error: ${o.message}`)}}Ue();var W=_t();Ze("rqn88j",n=>{We(()=>{Be.title="Projects - Elastic Git Sync"})});var B=t(W),oe=s(t(B),2),he=t(oe);fe(he,{class:"w-5 h-5"}),S(),e(oe),e(B);var we=s(B,2);{var je=n=>{var o=it();l(n,o)},$e=n=>{var o=ie(),c=ne(o);{var H=g=>{var u=nt(),q=t(u),J=t(q,!0);e(q),e(u),A(()=>x(J,a($))),l(g,u)},Pe=g=>{var u=ie(),q=ne(u);{var J=b=>{var _=ot(),E=t(_),v=t(E);rt(v,{class:"w-12 h-12 text-gray-400 mx-auto"}),e(E);var C=s(E,6),y=t(C);fe(y,{class:"w-5 h-5"}),S(),e(C),e(_),l(b,_)},Ee=b=>{var _=xt();Oe(_,5,()=>a(w),Ye,(E,v,C)=>{var y=mt();Qe(y,`animation-delay: ${C*50}ms; opacity: 0;`);var K=t(y),ve=t(K),O=t(ve),R=t(O),Ne=t(R,!0);e(R);var Te=s(R,2);{var ke=r=>{var i=vt(),d=t(i,!0);e(i),A(()=>x(d,a(v).description)),l(r,i)};h(Te,r=>{a(v).description&&r(ke)})}e(O);var Q=s(O,2),Ge=t(Q,!0);e(Q),e(ve),e(K);var X=s(K,2),de=t(X),le=t(de);{var Me=r=>{const i=xe(()=>P(a(v)));var d=dt(),m=t(d),te=t(m);ge(te,{class:"w-4 h-4 text-yellow-600"}),e(m);var N=s(m,2),f=s(t(N),2),ae=t(f,!0);e(f);var T=s(f,2),k=t(T);be(k,{class:"w-3 h-3"});var se=s(k);e(T),e(N),e(d),A(()=>{var G,M;x(ae,(G=a(i))==null?void 0:G.elastic_space),x(se,` ${((M=a(i))==null?void 0:M.git_branch)??""}`)}),l(r,d)},Se=r=>{var i=lt(),d=t(i);ge(d,{class:"w-4 h-4"}),S(2),e(i),l(r,i)};h(le,r=>{P(a(v))?r(Me):r(Se,!1)})}var Ae=s(le,2);{var Le=r=>{const i=xe(()=>I(a(v)));var d=ct(),m=t(d),te=t(m);ue(te,{class:"w-4 h-4 text-green-600"}),e(m);var N=s(m,2),f=s(t(N),2),ae=t(f,!0);e(f);var T=s(f,2),k=t(T);be(k,{class:"w-3 h-3"});var se=s(k);e(T),e(N),e(d),A(()=>{var G,M;x(ae,(G=a(i))==null?void 0:G.elastic_space),x(se,` ${((M=a(i))==null?void 0:M.git_branch)??""}`)}),l(r,d)},Fe=r=>{var i=pt(),d=t(i);ue(d,{class:"w-4 h-4"}),S(2),e(i),l(r,i)};h(Ae,r=>{I(a(v))?r(Le):r(Fe,!1)})}e(de),e(X);var Y=s(X,2),ce=t(Y),Z=t(ce),Ie=s(t(Z));e(Z);var pe=s(Z,2),qe=s(t(pe));e(pe),e(ce),e(Y);var me=s(Y,2),U=t(me),Ce=t(U);at(Ce,{class:"w-4 h-4"}),S(),e(U);var ee=s(U,2),Re=t(ee);st(Re,{class:"w-4 h-4"}),e(ee),e(me),e(y),A(()=>{var r,i,d,m;_e(R,"href",`/projects/${a(v).id??""}`),x(Ne,a(v).name),Xe(Q,1,`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium
								${a(v).is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`),x(Ge,a(v).is_active?"Active":"Inactive"),x(Ie,` ${(((i=(r=a(v).expand)==null?void 0:r.elastic_instance)==null?void 0:i.name)||"Unknown")??""}`),x(qe,` ${(((m=(d=a(v).expand)==null?void 0:d.git_repository)==null?void 0:m.name)||"Unknown")??""}`),_e(U,"href",`/projects/${a(v).id??""}`)}),He("click",ee,()=>ye(a(v).id)),l(E,y)}),e(_),l(b,_)};h(q,b=>{a(w).length===0?b(J):b(Ee,!1)},!0)}l(g,u)};h(c,g=>{a($)?g(H):g(Pe,!1)},!0)}l(n,o)};h(we,n=>{a(j)?n(je):n($e,!1)})}e(W),l(z,W),De()}export{Gt as component};
