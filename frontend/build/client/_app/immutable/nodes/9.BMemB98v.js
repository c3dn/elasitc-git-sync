import"../chunks/CWj6FrbW.js";import{o as ka,s as _}from"../chunks/BCkVnCXK.js";import{c as W,f as b,a as n,p as Ma,O as K,P as jt,b as Pa,R as Ra,h as a,d as v,s as c,i as e,$ as Ta,n as Q,r as t,g as r,S as ce,t as k,j as ye,k as he}from"../chunks/Dwc5JcvW.js";import{i as g}from"../chunks/BGM91MK6.js";import{I as ve,s as pe,a as be,e as Na,b as Ca,i as Sa}from"../chunks/De-PL9gO.js";import{h as Ga}from"../chunks/--Il8l-M.js";import{l as ge,s as _e,a as Ea,b as Oa}from"../chunks/uIwwuFdP.js";import{p as Fa}from"../chunks/CV6U0ayt.js";import{g as qa}from"../chunks/DrRDPxfg.js";import{p as ee}from"../chunks/BXxF3ZQE.js";import{A as za}from"../chunks/DLRuoQZd.js";import{P as Ja,R as La}from"../chunks/CBtbhsoy.js";import{T as Ua}from"../chunks/BImVJdth.js";import{T as Aa,R as Ia}from"../chunks/Cj6MAlpo.js";import{C as kt}from"../chunks/aGZOx2Ar.js";import"../chunks/CVSZYhH1.js";import{G as tt}from"../chunks/6G4ivcJ6.js";import{C as Ba}from"../chunks/CSkvpjDh.js";import{L as Te}from"../chunks/q1IplmyU.js";import{C as Da}from"../chunks/fDTQ2geM.js";import{C as Ha}from"../chunks/DpbAZU8F.js";function Va(q,w){const z=ge(w,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["path",{d:"M12 5v14"}],["path",{d:"m19 12-7 7-7-7"}]];ve(q,_e({name:"arrow-down"},()=>z,{get iconNode(){return J},children:(L,f)=>{var x=W(),N=b(x);pe(N,w,"default",{}),n(L,x)},$$slots:{default:!0}}))}function Ka(q,w){const z=ge(w,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["polyline",{points:"7 10 12 15 17 10"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3"}]];ve(q,_e({name:"download"},()=>z,{get iconNode(){return J},children:(L,f)=>{var x=W(),N=b(x);pe(N,w,"default",{}),n(L,x)},$$slots:{default:!0}}))}function Ne(q,w){const z=ge(w,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["path",{d:"M15 3h6v6"}],["path",{d:"M10 14 21 3"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}]];ve(q,_e({name:"external-link"},()=>z,{get iconNode(){return J},children:(L,f)=>{var x=W(),N=b(x);pe(N,w,"default",{}),n(L,x)},$$slots:{default:!0}}))}function Qa(q,w){const z=ge(w,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["path",{d:"M10 12.5 8 15l2 2.5"}],["path",{d:"m14 12.5 2 2.5-2 2.5"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z"}]];ve(q,_e({name:"file-code"},()=>z,{get iconNode(){return J},children:(L,f)=>{var x=W(),N=b(x);pe(N,w,"default",{}),n(L,x)},$$slots:{default:!0}}))}function at(q,w){const z=ge(w,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["circle",{cx:"18",cy:"18",r:"3"}],["circle",{cx:"6",cy:"6",r:"3"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9"}]];ve(q,_e({name:"git-merge"},()=>z,{get iconNode(){return J},children:(L,f)=>{var x=W(),N=b(x);pe(N,w,"default",{}),n(L,x)},$$slots:{default:!0}}))}function Wa(q,w){const z=ge(w,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["polyline",{points:"17 8 12 3 7 8"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15"}]];ve(q,_e({name:"upload"},()=>z,{get iconNode(){return J},children:(L,f)=>{var x=W(),N=b(x);pe(N,w,"default",{}),n(L,x)},$$slots:{default:!0}}))}var Xa=v('<h1 class="text-3xl font-bold text-gray-900">Loading...</h1>'),Ya=v('<p class="mt-1 text-sm text-gray-500"> </p>'),Za=v('<h1 class="text-3xl font-bold text-gray-900"> </h1> <!>',1),er=v('<div class="flex items-center gap-2"><a class="inline-flex items-center gap-2 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"><!> Edit</a> <button class="inline-flex items-center gap-2 px-4 py-2 text-red-600 hover:bg-red-50 border border-red-200 rounded-lg transition-colors"><!></button></div>'),tr=v('<div class="bg-red-50 border border-red-200 rounded-lg p-4"><p class="text-sm text-red-800"> </p></div>'),ar=v('<div class="bg-green-50 border border-green-200 rounded-lg p-4"><p class="text-sm text-green-800"> </p></div>'),rr=v('<div class="flex items-center justify-center py-12"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div></div>'),sr=v('<p class="text-xs text-gray-500"> </p>'),nr=v("<!> Syncing...",1),or=v("<!> Export to Git",1),ir=v('<div class="space-y-3"><div class="flex items-center justify-between text-sm"><span class="text-gray-600">Rules:</span> <span class="font-semibold text-gray-900"> </span></div> <div class="flex items-center justify-between text-sm"><span class="text-gray-600">Branch:</span> <span class="font-mono text-xs bg-gray-100 px-2 py-0.5 rounded"> </span></div> <button class="w-full inline-flex items-center justify-center gap-2 px-4 py-2.5 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors disabled:opacity-50 text-sm font-medium"><!></button></div>'),lr=v('<p class="text-sm text-yellow-700">No test environment configured</p>'),dr=v("<!> Creating...",1),cr=v("<!> Create MR",1),vr=v('<a target="_blank" class="block text-center text-xs text-blue-600 hover:underline">View open MRs <!></a>'),pr=v('<div class="space-y-3"><div class="text-sm text-gray-600"><div class="flex items-center gap-2 mb-1"><!> <span class="font-mono text-xs"> </span></div> <div class="flex items-center justify-center"><!></div> <div class="flex items-center gap-2 mt-1"><!> <span class="font-mono text-xs"> </span></div></div> <button class="w-full inline-flex items-center justify-center gap-2 px-4 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 text-sm font-medium"><!></button> <!></div>'),gr=v('<p class="text-sm text-blue-700">Configure both environments</p>'),_r=v('<p class="text-xs text-gray-500"> </p>'),ur=v("<!> Syncing...",1),fr=v("<!> Import from Git",1),mr=v('<div class="space-y-3"><div class="flex items-center justify-between text-sm"><span class="text-gray-600">Rules:</span> <span class="font-semibold text-gray-900"> </span></div> <div class="flex items-center justify-between text-sm"><span class="text-gray-600">Branch:</span> <span class="font-mono text-xs bg-gray-100 px-2 py-0.5 rounded"> </span></div> <button class="w-full inline-flex items-center justify-center gap-2 px-4 py-2.5 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 text-sm font-medium"><!></button></div>'),xr=v('<p class="text-sm text-green-700">No prod environment configured</p>'),yr=v('<p class="text-sm text-gray-500">No sync jobs yet. Start by exporting from Test.</p>'),hr=v('<span class="text-xs text-gray-500 ml-2"> <!> <!></span>'),br=v('<div class="flex items-center justify-between py-2 px-3 bg-gray-50 rounded-lg"><div class="flex items-center gap-3"><!> <div><span class="text-sm font-medium text-gray-900"><!></span> <!></div></div> <div class="text-right"><span> </span> <p class="text-xs text-gray-500 mt-1"> </p></div></div>'),wr=v('<div class="space-y-2"></div>'),$r=v('<a target="_blank" class="flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"><div class="p-2 bg-orange-100 rounded"><!></div> <div class="flex-1 min-w-0"><div class="text-sm font-medium text-gray-900">Kibana Rules</div> <div class="text-xs text-gray-500 truncate"> </div></div> <!></a>'),jr=v('<a target="_blank" class="flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"><div class="p-2 bg-purple-100 rounded"><!></div> <div class="flex-1 min-w-0"><div class="text-sm font-medium text-gray-900">Git Repository</div> <div class="text-xs text-gray-500 truncate"> </div></div> <!></a> <a target="_blank" class="flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"><div class="p-2 bg-blue-100 rounded"><!></div> <div class="flex-1 min-w-0"><div class="text-sm font-medium text-gray-900">Merge Requests</div> <div class="text-xs text-gray-500">View open MRs</div></div> <!></a>',1),kr=v('<div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6"><h2 class="text-lg font-semibold text-gray-900 mb-6">Sync Workflow</h2> <div class="flex items-stretch gap-4"><div class="flex-1 bg-yellow-50 border border-yellow-200 rounded-lg p-4"><div class="flex items-center gap-2 mb-3"><div class="p-2 bg-yellow-100 rounded-lg"><!></div> <div><h3 class="font-semibold text-gray-900">Test Environment</h3> <!></div></div> <!></div> <div class="flex items-center"><!></div> <div class="flex-1 bg-blue-50 border border-blue-200 rounded-lg p-4"><div class="flex items-center gap-2 mb-3"><div class="p-2 bg-blue-100 rounded-lg"><!></div> <div><h3 class="font-semibold text-gray-900">Merge Request</h3> <p class="text-xs text-gray-500">Review & Approve</p></div></div> <!></div> <div class="flex items-center"><!></div> <div class="flex-1 bg-green-50 border border-green-200 rounded-lg p-4"><div class="flex items-center gap-2 mb-3"><div class="p-2 bg-green-100 rounded-lg"><!></div> <div><h3 class="font-semibold text-gray-900">Production</h3> <!></div></div> <!></div></div> <div class="mt-6 pt-4 border-t border-gray-200"><h4 class="text-sm font-medium text-gray-700 mb-2">How it works:</h4> <ol class="text-sm text-gray-600 space-y-1"><li class="flex items-start gap-2"><span class="flex-shrink-0 w-5 h-5 bg-yellow-100 text-yellow-700 rounded-full flex items-center justify-center text-xs font-medium">1</span> <span>Export rules from <strong> </strong> to <code class="text-xs bg-gray-100 px-1 rounded"> </code> branch</span></li> <li class="flex items-start gap-2"><span class="flex-shrink-0 w-5 h-5 bg-blue-100 text-blue-700 rounded-full flex items-center justify-center text-xs font-medium">2</span> <span>Create MR from <code class="text-xs bg-gray-100 px-1 rounded"> </code> to <code class="text-xs bg-gray-100 px-1 rounded"> </code>, review and merge</span></li> <li class="flex items-start gap-2"><span class="flex-shrink-0 w-5 h-5 bg-green-100 text-green-700 rounded-full flex items-center justify-center text-xs font-medium">3</span> <span>Import rules from <code class="text-xs bg-gray-100 px-1 rounded"> </code> branch to <strong> </strong></span></li></ol></div></div> <div class="grid grid-cols-1 lg:grid-cols-3 gap-6"><div class="lg:col-span-2 bg-white rounded-lg shadow-sm border border-gray-200 p-6"><div class="flex items-center justify-between mb-4"><h3 class="text-lg font-semibold text-gray-900">Recent Syncs</h3> <button class="text-gray-500 hover:text-gray-700"><!></button></div> <!></div> <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6"><h3 class="text-lg font-semibold text-gray-900 mb-4">Quick Links</h3> <div class="space-y-3"><!> <!></div> <div class="mt-4 pt-4 border-t border-gray-200 text-xs text-gray-500 space-y-1"><div><strong>Path:</strong> </div> <div><strong>Created:</strong> </div></div></div></div>',1),Mr=v('<div class="space-y-6"><div class="flex items-center justify-between"><div><a href="/projects" class="inline-flex items-center gap-2 text-sm text-gray-600 hover:text-gray-900 mb-2"><!> Back to Projects</a> <!></div> <!></div> <!> <!> <!></div>');function Kr(q,w){Ma(w,!0);const z=()=>Oa(Fa,"$page",J),[J,L]=Ea();let f=K(null),x=K(jt([])),N=K(jt([])),we=K(!0),U=K(""),te=K(""),$e=K(!1),je=K(!1),ke=K(!1),rt=K(0),st=K(0),X=ce(()=>z().params.id),P=ce(()=>e(x).find(s=>s.name==="test")),R=ce(()=>e(x).find(s=>s.name==="production"));ka(async()=>{await Mt()});async function Mt(){try{c(we,!0),await Promise.all([Pt(),Rt(),Me(),Ce()])}finally{c(we,!1)}}async function Pt(){try{c(f,await ee.collection("projects").getOne(e(X),{expand:"elastic_instance,git_repository"}),!0)}catch(s){c(U,s.message,!0)}}async function Rt(){try{c(x,await ee.collection("environments").getFullList({filter:`project = "${e(X)}"`}),!0)}catch(s){console.error("Failed to load environments:",s)}}async function Me(){try{c(N,await ee.collection("sync_jobs").getFullList({filter:`project = "${e(X)}"`,sort:"-created",perPage:10}),!0)}catch(s){console.error("Failed to load sync jobs:",s)}}async function Ce(){try{const s=await fetch(`${ee.baseUrl}/api/project/${e(X)}/metrics`);if(s.ok){const l=await s.json();c(rt,l.test_rules||0,!0),c(st,l.prod_rules||0,!0)}}catch(s){console.error("Failed to load metrics:",s)}}async function Tt(){if(e(P))try{c($e,!0),c(U,""),c(te,"");const l=await(await fetch(`${ee.baseUrl}/api/sync/trigger`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_id:e(X),environment_id:e(P).id,direction:"elastic_to_git",branch:e(P).git_branch,space:e(P).elastic_space})})).json();l.success?(c(te,l.message,!0),await Me(),await Ce()):c(U,l.message||"Failed to sync",!0)}catch(s){c(U,s.message,!0)}finally{c($e,!1)}}async function Nt(){if(!(!e(P)||!e(R)))try{c(ke,!0),c(U,""),c(te,"");const l=await(await fetch(`${ee.baseUrl}/api/merge-request/create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_id:e(X),source_branch:e(P).git_branch,target_branch:e(R).git_branch,title:`[Elastic Git Sync] Promote rules from ${e(P).elastic_space} to ${e(R).elastic_space}`})})).json();l.success&&l.url?(c(te,"Merge Request created! Opening in new tab..."),window.open(l.url,"_blank")):c(U,l.message||"Failed to create Merge Request",!0)}catch(s){c(U,s.message,!0)}finally{c(ke,!1)}}async function Ct(){if(e(R))try{c(je,!0),c(U,""),c(te,"");const l=await(await fetch(`${ee.baseUrl}/api/sync/trigger`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_id:e(X),environment_id:e(R).id,direction:"git_to_elastic",branch:e(R).git_branch,space:e(R).elastic_space})})).json();l.success?(c(te,l.message,!0),await Me(),await Ce()):c(U,l.message||"Failed to sync",!0)}catch(s){c(U,s.message,!0)}finally{c(je,!1)}}async function St(){if(confirm("Are you sure you want to delete this project? This cannot be undone."))try{for(const s of e(x))await ee.collection("environments").delete(s.id);await ee.collection("projects").delete(e(X)),qa("/projects")}catch(s){c(U,s.message,!0)}}function Gt(s){switch(s){case"completed":return"text-green-600";case"failed":return"text-red-600";case"running":return"text-blue-600";default:return"text-gray-600"}}function Et(s){switch(s){case"completed":return"bg-green-100";case"failed":return"bg-red-100";case"running":return"bg-blue-100";default:return"bg-gray-100"}}function Ot(s){if(!s)return"Never";const l=new Date(s),B=new Date().getTime()-l.getTime(),T=Math.floor(B/6e4);if(T<1)return"Just now";if(T<60)return`${T}m ago`;const D=Math.floor(T/60);return D<24?`${D}h ago`:`${Math.floor(D/24)}d ago`}var Se=Mr();Ga("ffmenf",s=>{Ra(()=>{var l;Ta.title=`${(((l=e(f))==null?void 0:l.name)||"Project")??""} - Elastic Git Sync`})});var Ge=a(Se),Ee=a(Ge),Oe=a(Ee),Ft=a(Oe);za(Ft,{class:"w-4 h-4"}),Q(),t(Oe);var qt=r(Oe,2);{var zt=s=>{var l=Xa();n(s,l)},Jt=s=>{var l=W(),C=b(l);{var B=T=>{var D=Za(),ae=b(D),ue=a(ae,!0);t(ae);var fe=r(ae,2);{var me=se=>{var xe=Ya(),Pe=a(xe,!0);t(xe),k(()=>_(Pe,e(f).description)),n(se,xe)};g(fe,se=>{e(f).description&&se(me)})}k(()=>_(ue,e(f).name)),n(T,D)};g(C,T=>{e(f)&&T(B)},!0)}n(s,l)};g(qt,s=>{e(we)?s(zt):s(Jt,!1)})}t(Ee);var Lt=r(Ee,2);{var Ut=s=>{var l=er(),C=a(l),B=a(C);Ja(B,{class:"w-4 h-4"}),Q(),t(C);var T=r(C,2),D=a(T);Ua(D,{class:"w-4 h-4"}),t(T),t(l),k(()=>be(C,"href",`/projects/${e(X)??""}/edit`)),ye("click",T,St),n(s,l)};g(Lt,s=>{e(f)&&s(Ut)})}t(Ge);var nt=r(Ge,2);{var At=s=>{var l=tr(),C=a(l),B=a(C,!0);t(C),t(l),k(()=>_(B,e(U))),n(s,l)};g(nt,s=>{e(U)&&s(At)})}var ot=r(nt,2);{var It=s=>{var l=ar(),C=a(l),B=a(C,!0);t(C),t(l),k(()=>_(B,e(te))),n(s,l)};g(ot,s=>{e(te)&&s(It)})}var Bt=r(ot,2);{var Dt=s=>{var l=rr();n(s,l)},Ht=s=>{var l=W(),C=b(l);{var B=T=>{var D=kr(),ae=b(D),ue=r(a(ae),2),fe=a(ue),me=a(fe),se=a(me),xe=a(se);Aa(xe,{class:"w-5 h-5 text-yellow-600"}),t(se);var Pe=r(se,2),Vt=r(a(Pe),2);{var Kt=o=>{var i=sr(),p=a(i,!0);t(i),k(()=>_(p,e(P).elastic_space)),n(o,i)};g(Vt,o=>{e(P)&&o(Kt)})}t(Pe),t(me);var Qt=r(me,2);{var Wt=o=>{var i=ir(),p=a(i),d=r(a(p),2),$=a(d,!0);t(d),t(p);var m=r(p,2),h=r(a(m),2),O=a(h,!0);t(h),t(m);var M=r(m,2),H=a(M);{var F=j=>{var y=nr(),V=b(y);Te(V,{class:"w-4 h-4 animate-spin"}),Q(),n(j,y)},I=j=>{var y=or(),V=b(y);Wa(V,{class:"w-4 h-4"}),Q(),n(j,y)};g(H,j=>{e($e)?j(F):j(I,!1)})}t(M),t(i),k(()=>{_($,e(rt)),_(O,e(P).git_branch),M.disabled=e($e)}),ye("click",M,Tt),n(o,i)},Xt=o=>{var i=lr();n(o,i)};g(Qt,o=>{e(P)?o(Wt):o(Xt,!1)})}t(fe);var Fe=r(fe,2),Yt=a(Fe);kt(Yt,{class:"w-8 h-8 text-gray-300"}),t(Fe);var qe=r(Fe,2),ze=a(qe),it=a(ze),Zt=a(it);at(Zt,{class:"w-5 h-5 text-blue-600"}),t(it),Q(2),t(ze);var ea=r(ze,2);{var ta=o=>{var i=pr(),p=a(i),d=a(p),$=a(d);tt($,{class:"w-4 h-4"});var m=r($,2),h=a(m,!0);t(m),t(d);var O=r(d,2),M=a(O);Va(M,{class:"w-4 h-4 text-gray-400"}),t(O);var H=r(O,2),F=a(H);tt(F,{class:"w-4 h-4"});var I=r(F,2),j=a(I,!0);t(I),t(H),t(p);var y=r(p,2),V=a(y);{var Ye=A=>{var S=dr(),u=b(S);Te(u,{class:"w-4 h-4 animate-spin"}),Q(),n(A,S)},Re=A=>{var S=cr(),u=b(S);at(u,{class:"w-4 h-4"}),Q(),n(A,S)};g(V,A=>{e(ke)?A(Ye):A(Re,!1)})}t(y);var oe=r(y,2);{var Ze=A=>{var S=vr(),u=r(a(S));Ne(u,{class:"w-3 h-3 inline"}),t(S),k(()=>be(S,"href",`${e(f).expand.git_repository.url??""}/-/merge_requests`)),n(A,S)};g(oe,A=>{var S;(S=e(f).expand)!=null&&S.git_repository&&A(Ze)})}t(i),k(()=>{_(h,e(P).git_branch),_(j,e(R).git_branch),y.disabled=e(ke)}),ye("click",y,Nt),n(o,i)},aa=o=>{var i=gr();n(o,i)};g(ea,o=>{e(P)&&e(R)?o(ta):o(aa,!1)})}t(qe);var Je=r(qe,2),ra=a(Je);kt(ra,{class:"w-8 h-8 text-gray-300"}),t(Je);var lt=r(Je,2),Le=a(lt),Ue=a(Le),sa=a(Ue);Ia(sa,{class:"w-5 h-5 text-green-600"}),t(Ue);var dt=r(Ue,2),na=r(a(dt),2);{var oa=o=>{var i=_r(),p=a(i,!0);t(i),k(()=>_(p,e(R).elastic_space)),n(o,i)};g(na,o=>{e(R)&&o(oa)})}t(dt),t(Le);var ia=r(Le,2);{var la=o=>{var i=mr(),p=a(i),d=r(a(p),2),$=a(d,!0);t(d),t(p);var m=r(p,2),h=r(a(m),2),O=a(h,!0);t(h),t(m);var M=r(m,2),H=a(M);{var F=j=>{var y=ur(),V=b(y);Te(V,{class:"w-4 h-4 animate-spin"}),Q(),n(j,y)},I=j=>{var y=fr(),V=b(y);Ka(V,{class:"w-4 h-4"}),Q(),n(j,y)};g(H,j=>{e(je)?j(F):j(I,!1)})}t(M),t(i),k(()=>{_($,e(st)),_(O,e(R).git_branch),M.disabled=e(je)}),ye("click",M,Ct),n(o,i)},da=o=>{var i=xr();n(o,i)};g(ia,o=>{e(R)?o(la):o(da,!1)})}t(lt),t(ue);var ct=r(ue,2),vt=r(a(ct),2),Ae=a(vt),pt=r(a(Ae),2),Ie=r(a(pt)),ca=a(Ie,!0);t(Ie);var gt=r(Ie,2),va=a(gt,!0);t(gt),Q(),t(pt),t(Ae);var Be=r(Ae,2),_t=r(a(Be),2),De=r(a(_t)),pa=a(De,!0);t(De);var ut=r(De,2),ga=a(ut,!0);t(ut),Q(),t(_t),t(Be);var ft=r(Be,2),mt=r(a(ft),2),He=r(a(mt)),_a=a(He,!0);t(He);var xt=r(He,2),ua=a(xt,!0);t(xt),t(mt),t(ft),t(vt),t(ct),t(ae);var yt=r(ae,2),Ve=a(yt),Ke=a(Ve),Qe=r(a(Ke),2),fa=a(Qe);La(fa,{class:"w-4 h-4"}),t(Qe),t(Ke);var ma=r(Ke,2);{var xa=o=>{var i=yr();n(o,i)},ya=o=>{var i=wr();Na(i,21,()=>e(N).slice(0,5),Sa,(p,d)=>{var $=br(),m=a($),h=a(m);{var O=u=>{Ba(u,{class:"w-4 h-4 text-green-600"})},M=u=>{var G=W(),Y=b(G);{var ie=E=>{Da(E,{class:"w-4 h-4 text-red-600"})},le=E=>{var re=W(),et=b(re);{var Z=de=>{Te(de,{class:"w-4 h-4 text-blue-600 animate-spin"})},ne=de=>{Ha(de,{class:"w-4 h-4 text-yellow-600"})};g(et,de=>{e(d).status==="running"?de(Z):de(ne,!1)},!0)}n(E,re)};g(Y,E=>{e(d).status==="failed"?E(ie):E(le,!1)},!0)}n(u,G)};g(h,u=>{e(d).status==="completed"?u(O):u(M,!1)})}var H=r(h,2),F=a(H),I=a(F);{var j=u=>{var G=he("Export to Git");n(u,G)},y=u=>{var G=W(),Y=b(G);{var ie=E=>{var re=he("Import from Git");n(E,re)},le=E=>{var re=he("Bidirectional");n(E,re)};g(Y,E=>{e(d).direction==="git_to_elastic"?E(ie):E(le,!1)},!0)}n(u,G)};g(I,u=>{e(d).direction==="elastic_to_git"?u(j):u(y,!1)})}t(F);var V=r(F,2);{var Ye=u=>{const G=ce(()=>typeof e(d).changes_summary=="string"?JSON.parse(e(d).changes_summary):e(d).changes_summary);var Y=hr(),ie=a(Y),le=r(ie);{var E=Z=>{var ne=he();k(()=>_(ne,`, ${e(G).deleted??""} deleted`)),n(Z,ne)};g(le,Z=>{e(G).deleted&&Z(E)})}var re=r(le,2);{var et=Z=>{var ne=he();k(()=>_(ne,`, ${e(G).imported??""} imported`)),n(Z,ne)};g(re,Z=>{e(G).imported&&Z(et)})}t(Y),k(()=>_(ie,`${(e(G).exported||0)??""} exported `)),n(u,Y)};g(V,u=>{e(d).changes_summary&&u(Ye)})}t(H),t(m);var Re=r(m,2),oe=a(Re),Ze=a(oe,!0);t(oe);var A=r(oe,2),S=a(A,!0);t(A),t(Re),t($),k((u,G,Y)=>{Ca(oe,1,`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${u??""} ${G??""}`),_(Ze,e(d).status),_(S,Y)},[()=>Et(e(d).status),()=>Gt(e(d).status),()=>Ot(e(d).created)]),n(p,$)}),t(i),n(o,i)};g(ma,o=>{e(N).length===0?o(xa):o(ya,!1)})}t(Ve);var ht=r(Ve,2),We=r(a(ht),2),bt=a(We);{var ha=o=>{const i=ce(()=>e(f).expand.elastic_instance.url);var p=$r(),d=a(p),$=a(d);Qa($,{class:"w-4 h-4 text-orange-600"}),t(d);var m=r(d,2),h=r(a(m),2),O=a(h,!0);t(h),t(m);var M=r(m,2);Ne(M,{class:"w-4 h-4 text-gray-400"}),t(p),k(()=>{be(p,"href",`${e(i)??""}/app/security/rules`),_(O,e(f).expand.elastic_instance.name)}),n(o,p)};g(bt,o=>{var i;(i=e(f).expand)!=null&&i.elastic_instance&&o(ha)})}var ba=r(bt,2);{var wa=o=>{const i=ce(()=>e(f).expand.git_repository.url);var p=jr(),d=b(p),$=a(d),m=a($);tt(m,{class:"w-4 h-4 text-purple-600"}),t($);var h=r($,2),O=r(a(h),2),M=a(O,!0);t(O),t(h);var H=r(h,2);Ne(H,{class:"w-4 h-4 text-gray-400"}),t(d);var F=r(d,2),I=a(F),j=a(I);at(j,{class:"w-4 h-4 text-blue-600"}),t(I);var y=r(I,4);Ne(y,{class:"w-4 h-4 text-gray-400"}),t(F),k(()=>{be(d,"href",e(i)),_(M,e(f).expand.git_repository.name),be(F,"href",`${e(i)??""}/-/merge_requests`)}),n(o,p)};g(ba,o=>{var i;(i=e(f).expand)!=null&&i.git_repository&&o(wa)})}t(We);var wt=r(We,2),Xe=a(wt),$a=r(a(Xe));t(Xe);var $t=r(Xe,2),ja=r(a($t));t($t),t(wt),t(ht),t(yt),k(o=>{var i,p,d,$,m,h;_(ca,((i=e(P))==null?void 0:i.elastic_space)||"Test"),_(va,((p=e(P))==null?void 0:p.git_branch)||"develop"),_(pa,((d=e(P))==null?void 0:d.git_branch)||"develop"),_(ga,(($=e(R))==null?void 0:$.git_branch)||"main"),_(_a,((m=e(R))==null?void 0:m.git_branch)||"main"),_(ua,((h=e(R))==null?void 0:h.elastic_space)||"Production"),_($a,` ${(e(f).git_path||"/")??""}`),_(ja,` ${o??""}`)},[()=>new Date(e(f).created).toLocaleDateString()]),ye("click",Qe,Me),n(T,D)};g(C,T=>{e(f)&&T(B)},!0)}n(s,l)};g(Bt,s=>{e(we)?s(Dt):s(Ht,!1)})}t(Se),n(q,Se),Pa(),L()}export{Kr as component};
