import"../chunks/CWj6FrbW.js";import{i as St}from"../chunks/Dl2LfGm4.js";import{o as Ct,a as Ht,s as F}from"../chunks/O7RWNxBF.js";import{c as $,f as b,a as c,p as Pt,s as z,h as a,g,i as t,r as e,j as B,b as zt,m as st,t as nt,d as I,n as X,k as Ot,Z as Dt,ax as Rt,ay as Ft,w as ot,Q as Bt}from"../chunks/C9NYA0Nw.js";import{i as j}from"../chunks/D2ldot_M.js";import{I as A,s as M,e as jt,a as xt,c as kt,i as Vt}from"../chunks/z_jCEgha.js";import{c as It}from"../chunks/CqRNeN1-.js";import{l as L,s as U,p as Zt,a as qt,b as wt}from"../chunks/Cs0PMOxO.js";import{p as Gt}from"../chunks/COnXchxR.js";import{g as Jt}from"../chunks/CCHst_1G.js";import{a as ut,p as ht}from"../chunks/BUCyip3L.js";import{C as Qt}from"../chunks/CKXfGMm1.js";import{f as Wt}from"../chunks/CWlArps7.js";import{E as Kt}from"../chunks/c4E_ZoYs.js";import{C as Xt}from"../chunks/D3EV4tGk.js";import{T as Yt}from"../chunks/DYGQewJa.js";import{F as Mt}from"../chunks/CpK8W6VH.js";import{C as te}from"../chunks/By_2fN8G.js";import{S as ee,U as ae}from"../chunks/DNWbSeQY.js";import{S as re}from"../chunks/DWdZ-gWd.js";function Nt(o,r){const s=L(r,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326"}]];A(o,U({name:"bell"},()=>s,{get iconNode(){return i},children:(l,x)=>{var n=$(),v=b(n);M(v,r,"default",{}),c(l,n)},$$slots:{default:!0}}))}function oe(o,r){const s=L(r,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}],["path",{d:"M3 3v5h5"}],["path",{d:"M12 7v5l4 2"}]];A(o,U({name:"history"},()=>s,{get iconNode(){return i},children:(l,x)=>{var n=$(),v=b(n);M(v,r,"default",{}),c(l,n)},$$slots:{default:!0}}))}function se(o,r){const s=L(r,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}]];A(o,U({name:"house"},()=>s,{get iconNode(){return i},children:(l,x)=>{var n=$(),v=b(n);M(v,r,"default",{}),c(l,n)},$$slots:{default:!0}}))}function ne(o,r){const s=L(r,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M12 16v-4"}],["path",{d:"M12 8h.01"}]];A(o,U({name:"info"},()=>s,{get iconNode(){return i},children:(l,x)=>{var n=$(),v=b(n);M(v,r,"default",{}),c(l,n)},$$slots:{default:!0}}))}function ie(o,r){const s=L(r,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}],["polyline",{points:"16 17 21 12 16 7"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12"}]];A(o,U({name:"log-out"},()=>s,{get iconNode(){return i},children:(l,x)=>{var n=$(),v=b(n);M(v,r,"default",{}),c(l,n)},$$slots:{default:!0}}))}function de(o,r){const s=L(r,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21"}]];A(o,U({name:"monitor"},()=>s,{get iconNode(){return i},children:(l,x)=>{var n=$(),v=b(n);M(v,r,"default",{}),c(l,n)},$$slots:{default:!0}}))}function le(o,r){const s=L(r,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"}]];A(o,U({name:"moon"},()=>s,{get iconNode(){return i},children:(l,x)=>{var n=$(),v=b(n);M(v,r,"default",{}),c(l,n)},$$slots:{default:!0}}))}function ce(o,r){const s=L(r,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i=[["circle",{cx:"12",cy:"12",r:"4"}],["path",{d:"M12 2v2"}],["path",{d:"M12 20v2"}],["path",{d:"m4.93 4.93 1.41 1.41"}],["path",{d:"m17.66 17.66 1.41 1.41"}],["path",{d:"M2 12h2"}],["path",{d:"M20 12h2"}],["path",{d:"m6.34 17.66-1.41 1.41"}],["path",{d:"m19.07 4.93-1.41 1.41"}]];A(o,U({name:"sun"},()=>s,{get iconNode(){return i},children:(l,x)=>{var n=$(),v=b(n);M(v,r,"default",{}),c(l,n)},$$slots:{default:!0}}))}var ve=I('<span class="absolute -top-0.5 -right-0.5 flex items-center justify-center w-5 h-5 bg-red-500 text-white text-xs font-bold rounded-full"> </span>'),ge=I('<button class="flex items-center gap-1 text-xs text-primary-600 hover:text-primary-700 font-medium"><!> Mark all read</button>'),fe=I('<div class="px-4 py-8 text-center"><!> <p class="text-sm text-gray-500 dark:text-gray-400">No notifications</p></div>'),me=I('<span class="w-2 h-2 bg-primary-500 rounded-full flex-shrink-0"></span>'),pe=I('<button><div class="flex gap-3"><div class="flex-shrink-0 mt-0.5"><!></div> <div class="flex-1 min-w-0"><div class="flex items-center gap-2"><p> </p> <!></div> <p class="text-xs text-gray-600 dark:text-gray-400 mt-0.5 line-clamp-2"> </p> <p class="text-xs text-gray-400 dark:text-gray-500 mt-1"> </p></div> <!></div></button>'),ue=I('<button class="fixed inset-0 z-40" aria-label="Close notifications"></button> <div class="absolute right-0 top-full mt-2 w-96 bg-white dark:bg-gray-900 rounded-xl shadow-xl border border-gray-200 dark:border-gray-700 z-50 max-h-[70vh] flex flex-col"><div class="flex items-center justify-between px-4 py-3 border-b border-gray-200 dark:border-gray-700"><h3 class="font-semibold text-gray-900 dark:text-gray-100 text-sm">Notifications</h3> <!></div> <div class="overflow-y-auto flex-1"><!></div></div>',1),he=I('<div class="relative"><button class="relative p-2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"><!> <!></button> <!></div>');function ye(o,r){Pt(r,!1);let s=st([]),i=st(0),l=st(!1),x;Ct(()=>{n(),x=setInterval(n,3e4)}),Ht(()=>{x&&clearInterval(x)});async function n(){try{const d=await ut(`${ht.baseUrl}/api/notifications?limit=20`);if(d.ok){const f=await d.json();z(s,f.notifications||[]),z(i,f.unread_count||0)}}catch{}}async function v(d){try{await ut(`${ht.baseUrl}/api/notifications/read`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:[d]})});const f=t(s).find(S=>S.id===d);f&&(f.read=!0,z(s,t(s)),z(i,Math.max(0,t(i)-1)))}catch{}}async function it(){try{await ut(`${ht.baseUrl}/api/notifications/read-all`,{method:"POST",headers:{"Content-Type":"application/json"}}),z(s,t(s).map(d=>({...d,read:!0}))),z(i,0)}catch{}}function dt(){z(l,!t(l)),t(l)&&n()}function V(){z(l,!1)}function lt(d){return d==="error"?Xt:d==="warning"?Yt:ne}function ct(d){return d==="error"?"text-red-500":d==="warning"?"text-yellow-500":"text-blue-500"}St();var Z=he(),k=a(Z),N=a(k);Nt(N,{class:"w-5 h-5"});var E=g(N,2);{var Y=d=>{var f=ve(),S=a(f,!0);e(f),nt(()=>F(S,t(i)>99?"99+":t(i))),c(d,f)};j(E,d=>{t(i)>0&&d(Y)})}e(k);var q=g(k,2);{var tt=d=>{var f=ue(),S=b(f),D=g(S,2),H=a(D),vt=g(a(H),2);{var et=_=>{var u=ge(),T=a(u);Qt(T,{class:"w-3.5 h-3.5"}),X(),e(u),B("click",u,it),c(_,u)};j(vt,_=>{t(i)>0&&_(et)})}e(H);var G=g(H,2),gt=a(G);{var J=_=>{var u=fe(),T=a(u);Nt(T,{class:"w-8 h-8 text-gray-300 dark:text-gray-500 mx-auto mb-2"}),X(2),e(u),c(_,u)},ft=_=>{var u=$(),T=b(u);jt(T,1,()=>t(s),C=>C.id,(C,h)=>{var O=pe(),at=a(O),Q=a(at),rt=a(Q);{let w=Ot(()=>ct(t(h).severity));It(rt,()=>lt(t(h).severity),(pt,Et)=>{Et(pt,{get class(){return`w-4 h-4 ${t(w)??""}`}})})}e(Q);var W=g(Q,2),m=a(W),p=a(m),P=a(p,!0);e(p);var R=g(p,2);{var K=w=>{var pt=me();c(w,pt)};j(R,w=>{t(h).read||w(K)})}e(m);var y=g(m,2),mt=a(y,!0);e(y);var $t=g(y,2),At=a($t,!0);e($t),e(W);var Lt=g(W,2);{var Ut=w=>{Kt(w,{class:"w-3.5 h-3.5 text-gray-300 dark:text-gray-500 flex-shrink-0 mt-1"})};j(Lt,w=>{t(h).link&&w(Ut)})}e(at),e(O),nt(w=>{xt(O,1,`w-full text-left px-4 py-3 border-b border-gray-50 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors
								${t(h).read?"opacity-60":""}`),xt(p,1,`text-sm font-medium text-gray-900 dark:text-gray-100 truncate ${t(h).read?"":"font-semibold"}`),F(P,t(h).title),F(mt,t(h).message),F(At,w)},[()=>Wt(new Date(t(h).created),{addSuffix:!0})]),B("click",O,()=>{t(h).read||v(t(h).id),t(h).link&&(window.location.href=t(h).link,V())}),c(C,O)}),c(_,u)};j(gt,_=>{t(s).length===0?_(J):_(ft,!1)})}e(G),e(D),B("click",S,V),c(d,f)};j(q,d=>{t(l)&&d(tt)})}e(Z),B("click",k,dt),c(o,Z),zt()}function Tt(){return localStorage.getItem("theme")||"system"}function xe(o){return o!=="system"?o:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function _t(o){const r=xe(o);document.documentElement.classList.toggle("dark",r==="dark")}const bt=Dt(Tt());bt.subscribe(o=>{localStorage.setItem("theme",o),_t(o)});function yt(){bt.update(o=>o==="light"?"dark":o==="dark"?"system":"light")}function _e(){_t(Tt()),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{(localStorage.getItem("theme")||"system")==="system"&&_t("system")})}var be=I("<a><!> </a>"),$e=I('<div class="min-h-screen bg-gray-50 dark:bg-gray-950"><div class="fixed inset-y-0 left-0 w-64 bg-white dark:bg-gray-900 border-r border-gray-200 dark:border-gray-700"><div class="flex flex-col h-full"><div class="flex items-center gap-3 px-6 py-5 border-b border-gray-200 dark:border-gray-700"><div class="w-10 h-10 bg-primary-600 rounded-lg flex items-center justify-center"><!></div> <div><h1 class="text-lg font-semibold text-gray-900 dark:text-gray-100">Elastic Git Sync</h1> <p class="text-xs text-gray-500 dark:text-gray-400">Security Rules Manager</p></div></div> <nav class="flex-1 px-4 py-4 space-y-1"></nav> <div class="px-4 py-4 border-t border-gray-200 dark:border-gray-700"><div class="flex items-center gap-3 px-3 py-2 mb-2"><div class="w-8 h-8 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center"><!></div> <div class="flex-1 min-w-0"><p class="text-sm font-medium text-gray-900 dark:text-gray-100 truncate"> </p></div></div> <button class="w-full flex items-center gap-2 px-3 py-2 text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors"><!> Sign Out</button></div> <div class="px-6 py-3 border-t border-gray-200 dark:border-gray-700"><p class="text-xs text-gray-500 dark:text-gray-500">Version 1.0.0</p> <p class="text-xs text-gray-400 dark:text-gray-600 mt-1">By Cedric Selkmann</p></div></div></div> <div class="ml-64"><div class="sticky top-0 z-10 bg-white/80 dark:bg-gray-900/80 backdrop-blur-sm border-b border-gray-200 dark:border-gray-700"><div class="flex items-center justify-end px-8 py-3 gap-2"><button class="p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 dark:text-gray-400 dark:hover:text-gray-200 dark:hover:bg-gray-800 rounded-lg transition-colors"><!></button> <!></div></div> <main class="p-8"><!></main></div></div>');function Be(o,r){Pt(r,!1);const s=()=>wt(Gt,"$page",l),i=()=>wt(bt,"$themeMode",l),[l,x]=qt(),n=st();let v=Zt(r,"data",8);const it=[{name:"Dashboard",href:"/",icon:se},{name:"Projects",href:"/projects",icon:Mt},{name:"Review",href:"/review",icon:te},{name:"History",href:"/history",icon:oe},{name:"Audit Log",href:"/audit",icon:ee},{name:"Settings",href:"/settings",icon:re}];function dt(){Jt("/logout")}Ct(()=>{_e()}),Rt(()=>s(),()=>{z(n,s().url.pathname==="/login")}),Ft(),St();var V=$(),lt=b(V);{var ct=k=>{var N=$(),E=b(N);M(E,r,"default",{}),c(k,N)},Z=k=>{var N=$e(),E=a(N),Y=a(E),q=a(Y),tt=a(q),d=a(tt);Mt(d,{class:"w-6 h-6 text-white"}),e(tt),X(2),e(q);var f=g(q,2);jt(f,5,()=>it,Vt,(m,p)=>{var P=be(),R=a(P);It(R,()=>t(p).icon,(y,mt)=>{mt(y,{class:"w-5 h-5 transition-transform duration-200"})});var K=g(R);e(P),nt(y=>{kt(P,"href",(t(p),ot(()=>t(p).href))),xt(P,1,`nav-item flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200
								${y??""}`),F(K,` ${t(p),ot(()=>t(p).name)??""}`)},[()=>(s(),t(p),ot(()=>s().url.pathname===t(p).href||s().url.pathname.startsWith(t(p).href)&&t(p).href!=="/"?"bg-primary-50 text-primary-700 shadow-sm dark:bg-primary-900/30 dark:text-primary-400":"text-gray-600 hover:bg-gray-50 hover:text-gray-900 hover:translate-x-1 dark:text-gray-400 dark:hover:bg-gray-800 dark:hover:text-gray-200"))]),c(m,P)}),e(f);var S=g(f,2),D=a(S),H=a(D),vt=a(H);ae(vt,{class:"w-4 h-4 text-gray-600 dark:text-gray-400"}),e(H);var et=g(H,2),G=a(et),gt=a(G,!0);e(G),e(et),e(D);var J=g(D,2),ft=a(J);ie(ft,{class:"w-4 h-4"}),X(),e(J),e(S),X(2),e(Y),e(E);var _=g(E,2),u=a(_),T=a(u),C=a(T),h=a(C);{var O=m=>{ce(m,{class:"w-5 h-5"})},at=m=>{var p=$(),P=b(p);{var R=y=>{de(y,{class:"w-5 h-5"})},K=y=>{le(y,{class:"w-5 h-5"})};j(P,y=>{i()==="system"?y(R):y(K,!1)},!0)}c(m,p)};j(h,m=>{i()==="dark"?m(O):m(at,!1)})}e(C);var Q=g(C,2);ye(Q,{}),e(T),e(u);var rt=g(u,2),W=a(rt);M(W,r,"default",{}),e(rt),e(_),e(N),nt(()=>{F(gt,(Bt(v()),ot(()=>{var m;return((m=v().user)==null?void 0:m.email)||"User"}))),kt(C,"title",i()==="light"?"Switch to dark mode":i()==="dark"?"Switch to system mode":"Switch to light mode")}),B("click",J,dt),B("click",C,function(...m){yt==null||yt.apply(this,m)}),c(k,N)};j(lt,k=>{t(n)?k(ct):k(Z,!1)})}c(o,V),zt(),x()}export{Be as component};
