import"../chunks/CWj6FrbW.js";import{i as Re}from"../chunks/CVSZYhH1.js";import{o as Ue,s as x}from"../chunks/BCkVnCXK.js";import{c as se,f as ie,a as l,p as Ve,b as ze,e as De,h as t,d as p,s as V,$ as We,g as r,n as A,r as e,i as a,m as re,t as L,j as Be,N as ge}from"../chunks/Dwc5JcvW.js";import{i as h}from"../chunks/BGM91MK6.js";import{I as He,s as Je,e as Ke,a as xe,b as Oe,i as Qe}from"../chunks/De-PL9gO.js";import{h as Xe}from"../chunks/--Il8l-M.js";import{p as F}from"../chunks/BXxF3ZQE.js";import{P as me}from"../chunks/BJl2rFxH.js";import{l as Ye,s as Ze}from"../chunks/uIwwuFdP.js";import{S as et}from"../chunks/B-Qd3df5.js";import{T as tt}from"../chunks/BImVJdth.js";import{T as _e,R as fe}from"../chunks/Cj6MAlpo.js";import{G as ue}from"../chunks/6G4ivcJ6.js";function at(z,I){const w=Ye(I,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5"}],["path",{d:"M3 12A9 3 0 0 0 21 12"}]];He(z,Ze({name:"database"},()=>w,{get iconNode(){return j},children:($,D)=>{var P=se(),q=ie(P);Je(q,I,"default",{}),l($,P)},$$slots:{default:!0}}))}var rt=p('<div class="flex items-center justify-center py-12"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div></div>'),st=p('<div class="bg-red-50 border border-red-200 rounded-lg p-4"><p class="text-sm text-red-800"> </p></div>'),it=p('<div class="bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center"><div class="mb-4"><!></div> <h3 class="text-lg font-medium text-gray-900 mb-2">No projects yet</h3> <p class="text-gray-500 mb-6">Create your first project to start syncing Elastic Security rules with Git.</p> <a href="/projects/new" class="inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"><!> Create Project</a></div>'),ot=p('<p class="text-sm text-gray-500 mt-1 line-clamp-2"> </p>'),nt=p('<div class="flex items-start gap-2"><div class="p-1.5 bg-yellow-100 rounded"><!></div> <div class="min-w-0"><div class="text-xs font-medium text-gray-700">Test</div> <div class="text-xs text-gray-500 truncate"> </div> <div class="text-xs text-gray-400 flex items-center gap-1"><!> </div></div></div>'),vt=p('<div class="flex items-center gap-2 text-gray-400"><!> <span class="text-xs">No test env</span></div>'),dt=p('<div class="flex items-start gap-2"><div class="p-1.5 bg-green-100 rounded"><!></div> <div class="min-w-0"><div class="text-xs font-medium text-gray-700">Production</div> <div class="text-xs text-gray-500 truncate"> </div> <div class="text-xs text-gray-400 flex items-center gap-1"><!> </div></div></div>'),lt=p('<div class="flex items-center gap-2 text-gray-400"><!> <span class="text-xs">No prod env</span></div>'),ct=p('<div class="bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"><div class="p-6 border-b border-gray-100"><div class="flex items-start justify-between"><div class="flex-1"><a class="text-lg font-semibold text-gray-900 hover:text-blue-600"> </a> <!></div> <span> </span></div></div> <div class="px-6 py-4 bg-gray-50"><div class="grid grid-cols-2 gap-4"><!> <!></div></div> <div class="px-6 py-3 text-xs text-gray-500 border-t border-gray-100"><div class="flex items-center justify-between"><span><strong>Elastic:</strong> </span> <span><strong>Git:</strong> </span></div></div> <div class="flex items-center gap-2 p-4 border-t border-gray-200 bg-white"><a class="flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm"><!> Manage</a> <button class="flex items-center gap-2 px-3 py-2 text-red-600 hover:bg-red-50 border border-red-200 rounded-lg transition-colors text-sm"><!></button></div></div>'),pt=p('<div class="grid grid-cols-1 lg:grid-cols-2 gap-6"></div>'),gt=p('<div class="space-y-6"><div class="flex items-center justify-between"><div><h1 class="text-3xl font-bold text-gray-900">Projects</h1> <p class="mt-1 text-sm text-gray-500">Manage your Elastic Security rule sync projects</p></div> <a href="/projects/new" class="inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"><!> New Project</a></div> <!></div>');function Tt(z,I){Ve(I,!1);let w=re([]),j=re(!0),$=re("");Ue(async()=>{await D()});async function D(){try{V(j,!0);const o=await F.collection("projects").getFullList({expand:"elastic_instance,git_repository",sort:"-created"}),n=[];for(const c of o)try{const H=await F.collection("environments").getFullList({filter:`project = "${c.id}"`});n.push({...c,environments:H})}catch{n.push({...c,environments:[]})}V(w,n)}catch(o){V($,o.message)}finally{V(j,!1)}}function P(o){var n;return(n=o.environments)==null?void 0:n.find(c=>c.name==="test")}function q(o){var n;return(n=o.environments)==null?void 0:n.find(c=>c.name==="production")}async function be(o){if(confirm("Are you sure you want to delete this project and all its environments?"))try{const n=await F.collection("environments").getFullList({filter:`project = "${o}"`});for(const c of n)await F.collection("environments").delete(c.id);await F.collection("projects").delete(o),await D()}catch(n){alert(`Error: ${n.message}`)}}Re();var W=gt();Xe("rqn88j",o=>{De(()=>{We.title="Projects - Elastic Git Sync"})});var B=t(W),oe=r(t(B),2),ye=t(oe);me(ye,{class:"w-5 h-5"}),A(),e(oe),e(B);var he=r(B,2);{var we=o=>{var n=rt();l(o,n)},je=o=>{var n=se(),c=ie(n);{var H=f=>{var u=st(),C=t(u),J=t(C,!0);e(C),e(u),L(()=>x(J,a($))),l(f,u)},$e=f=>{var u=se(),C=ie(u);{var J=b=>{var m=it(),E=t(m),v=t(E);at(v,{class:"w-12 h-12 text-gray-400 mx-auto"}),e(E);var y=r(E,6),N=t(y);me(N,{class:"w-5 h-5"}),A(),e(y),e(m),l(b,m)},Pe=b=>{var m=pt();Ke(m,5,()=>a(w),Qe,(E,v)=>{var y=ct(),N=t(y),ne=t(N),K=t(ne),R=t(K),Ee=t(R,!0);e(R);var Ne=r(R,2);{var Te=s=>{var i=ot(),d=t(i,!0);e(i),L(()=>x(d,a(v).description)),l(s,i)};h(Ne,s=>{a(v).description&&s(Te)})}e(K);var O=r(K,2),ke=t(O,!0);e(O),e(ne),e(N);var Q=r(N,2),ve=t(Q),de=t(ve);{var Ge=s=>{const i=ge(()=>P(a(v)));var d=nt(),g=t(d),ee=t(g);_e(ee,{class:"w-4 h-4 text-yellow-600"}),e(g);var T=r(g,2),_=r(t(T),2),te=t(_,!0);e(_);var k=r(_,2),G=t(k);ue(G,{class:"w-3 h-3"});var ae=r(G);e(k),e(T),e(d),L(()=>{var M,S;x(te,(M=a(i))==null?void 0:M.elastic_space),x(ae,` ${((S=a(i))==null?void 0:S.git_branch)??""}`)}),l(s,d)},Me=s=>{var i=vt(),d=t(i);_e(d,{class:"w-4 h-4"}),A(2),e(i),l(s,i)};h(de,s=>{P(a(v))?s(Ge):s(Me,!1)})}var Se=r(de,2);{var Ae=s=>{const i=ge(()=>q(a(v)));var d=dt(),g=t(d),ee=t(g);fe(ee,{class:"w-4 h-4 text-green-600"}),e(g);var T=r(g,2),_=r(t(T),2),te=t(_,!0);e(_);var k=r(_,2),G=t(k);ue(G,{class:"w-3 h-3"});var ae=r(G);e(k),e(T),e(d),L(()=>{var M,S;x(te,(M=a(i))==null?void 0:M.elastic_space),x(ae,` ${((S=a(i))==null?void 0:S.git_branch)??""}`)}),l(s,d)},Le=s=>{var i=lt(),d=t(i);fe(d,{class:"w-4 h-4"}),A(2),e(i),l(s,i)};h(Se,s=>{q(a(v))?s(Ae):s(Le,!1)})}e(ve),e(Q);var X=r(Q,2),le=t(X),Y=t(le),Fe=r(t(Y));e(Y);var ce=r(Y,2),Ie=r(t(ce));e(ce),e(le),e(X);var pe=r(X,2),U=t(pe),qe=t(U);et(qe,{class:"w-4 h-4"}),A(),e(U);var Z=r(U,2),Ce=t(Z);tt(Ce,{class:"w-4 h-4"}),e(Z),e(pe),e(y),L(()=>{var s,i,d,g;xe(R,"href",`/projects/${a(v).id??""}`),x(Ee,a(v).name),Oe(O,1,`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium
								${a(v).is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`),x(ke,a(v).is_active?"Active":"Inactive"),x(Fe,` ${(((i=(s=a(v).expand)==null?void 0:s.elastic_instance)==null?void 0:i.name)||"Unknown")??""}`),x(Ie,` ${(((g=(d=a(v).expand)==null?void 0:d.git_repository)==null?void 0:g.name)||"Unknown")??""}`),xe(U,"href",`/projects/${a(v).id??""}`)}),Be("click",Z,()=>be(a(v).id)),l(E,y)}),e(m),l(b,m)};h(C,b=>{a(w).length===0?b(J):b(Pe,!1)},!0)}l(f,u)};h(c,f=>{a($)?f(H):f($e,!1)},!0)}l(o,n)};h(he,o=>{a(j)?o(we):o(je,!1)})}e(W),l(z,W),ze()}export{Tt as component};
