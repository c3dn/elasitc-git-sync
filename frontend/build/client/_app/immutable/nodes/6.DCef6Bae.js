import"../chunks/CWj6FrbW.js";import{i as Gt}from"../chunks/Dl2LfGm4.js";import{o as At,s as p}from"../chunks/O7RWNxBF.js";import{p as Lt,a as n,b as Nt,e as Pt,d as l,s as C,$ as Tt,g as c,h as a,i as e,r as t,m as U,c as V,f as S,t as k,k as qt}from"../chunks/C9NYA0Nw.js";import{i as _}from"../chunks/D2ldot_M.js";import{e as zt,a as Bt,i as It}from"../chunks/rMS1oNTx.js";import{c as Jt}from"../chunks/CqRNeN1-.js";import{h as Rt}from"../chunks/k5AYXn5z.js";import{p as Ut}from"../chunks/BUCyip3L.js";import{C as $}from"../chunks/BeHt4r-J.js";import{C as Vt}from"../chunks/CTPR9Tm-.js";import{C as Ft}from"../chunks/DJoU24lj.js";import{A as Kt}from"../chunks/DU-JyQHj.js";import{C as Ot}from"../chunks/DASHcske.js";import{f as j}from"../chunks/BTYcXCPL.js";var Qt=l('<div class="flex items-center justify-center py-12"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"></div></div>'),Wt=l('<div class="bg-red-50 border border-red-200 rounded-lg p-4"><p class="text-sm text-red-800"> </p></div>'),Xt=l('<div class="bg-white dark:bg-gray-900 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-12 text-center"><p class="text-gray-500 dark:text-gray-400">No sync jobs yet. Start a sync to see history here.</p></div>'),Yt=l('<span class="text-yellow-600"> </span>'),Zt=l('<div class="flex items-center gap-3 text-xs"><span class="text-green-600"> </span> <span class="text-blue-600"> </span> <span class="text-red-600"> </span> <!></div>'),$t=l('<span class="text-xs text-gray-400 dark:text-gray-500">-</span>'),jt=l('<div class="text-sm text-gray-900 dark:text-gray-100"> </div> <div class="text-xs text-gray-500 dark:text-gray-400"> </div>',1),ta=l('<span class="text-xs text-gray-400 dark:text-gray-500">Not started</span>'),aa=l('<span class="text-sm text-gray-700 dark:text-gray-300"> </span>'),ea=l('<span class="text-sm text-blue-600 animate-pulse">Running...</span>'),ra=l('<span class="text-xs text-gray-400 dark:text-gray-500">-</span>'),sa=l('<tr class="hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors"><td class="px-6 py-4 whitespace-nowrap"><div class="flex items-center gap-2"><!> <span> </span></div></td><td class="px-6 py-4 whitespace-nowrap"><div class="text-sm font-medium text-gray-900 dark:text-gray-100"> </div> <div class="text-xs text-gray-500 dark:text-gray-400"> </div></td><td class="px-6 py-4 whitespace-nowrap"><span class="text-sm text-gray-700 dark:text-gray-300"> </span></td><td class="px-6 py-4 whitespace-nowrap"><!></td><td class="px-6 py-4 whitespace-nowrap"><!></td><td class="px-6 py-4 whitespace-nowrap"><!></td></tr>'),ia=l('<div class="bg-white dark:bg-gray-900 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700"><div class="overflow-x-auto"><table class="w-full"><thead class="bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700"><tr><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Status</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Project</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Direction</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Changes</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Started</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Duration</th></tr></thead><tbody class="bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700"></tbody></table></div></div>'),da=l('<div class="space-y-6"><div><h1 class="text-3xl font-bold text-gray-900 dark:text-gray-100">Sync History</h1> <p class="mt-1 text-sm text-gray-500 dark:text-gray-400">View all synchronization jobs and their results</p></div> <!></div>');function wa(tt,at){Lt(at,!1);let D=U([]),H=U(!0),M=U("");At(async()=>{await et()});async function et(){try{C(H,!0);const d=await Ut.collection("sync_jobs").getList(1,50,{expand:"project",sort:"-created"});C(D,d.items)}catch(d){C(M,d.message)}finally{C(H,!1)}}function rt(d){const y={completed:"bg-green-100 text-green-800",running:"bg-blue-100 text-blue-800",failed:"bg-red-100 text-red-800",conflict:"bg-yellow-100 text-yellow-800",pending:"bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-200"};return y[d]||y.pending}function st(d){return{completed:Ot,running:Kt,failed:Ft,conflict:Vt,pending:$}[d]||$}function it(d){return{elastic_to_git:"Elastic → Git",git_to_elastic:"Git → Elastic",bidirectional:"Bidirectional"}[d]||d}Gt();var E=da();Rt("1xl2tfr",d=>{Pt(()=>{Tt.title="History - Elastic Git Sync"})});var dt=c(a(E),2);{var nt=d=>{var y=Qt();n(d,y)},ot=d=>{var y=V(),lt=S(y);{var ct=f=>{var u=Wt(),b=a(u),G=a(b,!0);t(b),t(u),k(()=>p(G,e(M))),n(f,u)},pt=f=>{var u=V(),b=S(u);{var G=h=>{var w=Xt();n(h,w)},vt=h=>{var w=ia(),F=a(w),K=a(F),O=c(a(K));zt(O,5,()=>e(D),It,(xt,s)=>{var A=sa(),L=a(A),Q=a(L),W=a(Q);Jt(W,()=>st(e(s).status),(r,i)=>{i(r,{class:"w-4 h-4 text-gray-400 dark:text-gray-500"})});var N=c(W,2),gt=a(N,!0);t(N),t(Q),t(L);var P=c(L),T=a(P),yt=a(T,!0);t(T);var X=c(T,2),mt=a(X,!0);t(X),t(P);var q=c(P),Y=a(q),_t=a(Y,!0);t(Y),t(q);var z=c(q),ft=a(z);{var ut=r=>{var i=Zt(),o=a(i),v=a(o);t(o);var x=c(o,2),g=a(x);t(x);var m=c(x,2),I=a(m);t(m);var Ht=c(m,2);{var Mt=J=>{var R=Yt(),Et=a(R);t(R),k(()=>p(Et,`⚠ ${e(s).changes_summary.conflicts??""}`)),n(J,R)};_(Ht,J=>{e(s).changes_summary.conflicts>0&&J(Mt)})}t(i),k(()=>{p(v,`+${e(s).changes_summary.added??""}`),p(g,`~${e(s).changes_summary.modified??""}`),p(I,`-${e(s).changes_summary.deleted??""}`)}),n(r,i)},ht=r=>{var i=$t();n(r,i)};_(ft,r=>{e(s).changes_summary?r(ut):r(ht,!1)})}t(z);var B=c(z),kt=a(B);{var wt=r=>{var i=jt(),o=S(i),v=a(o,!0);t(o);var x=c(o,2),g=a(x,!0);t(x),k((m,I)=>{p(v,m),p(g,I)},[()=>j(new Date(e(s).started_at),"MMM d, yyyy"),()=>j(new Date(e(s).started_at),"HH:mm:ss")]),n(r,i)},bt=r=>{var i=ta();n(r,i)};_(kt,r=>{e(s).started_at?r(wt):r(bt,!1)})}t(B);var Z=c(B),Ct=a(Z);{var St=r=>{const i=qt(()=>new Date(e(s).completed_at).getTime()-new Date(e(s).started_at).getTime());var o=aa(),v=a(o);t(o),k(x=>p(v,`${x??""}s`),[()=>Math.floor(e(i)/1e3)]),n(r,o)},Dt=r=>{var i=V(),o=S(i);{var v=g=>{var m=ea();n(g,m)},x=g=>{var m=ra();n(g,m)};_(o,g=>{e(s).started_at?g(v):g(x,!1)},!0)}n(r,i)};_(Ct,r=>{e(s).started_at&&e(s).completed_at?r(St):r(Dt,!1)})}t(Z),t(A),k((r,i)=>{var o,v;Bt(N,1,`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${r??""}`),p(gt,e(s).status),p(yt,((v=(o=e(s).expand)==null?void 0:o.project)==null?void 0:v.name)||"Unknown Project"),p(mt,e(s).type),p(_t,i)},[()=>rt(e(s).status),()=>it(e(s).direction)]),n(xt,A)}),t(O),t(K),t(F),t(w),n(h,w)};_(b,h=>{e(D).length===0?h(G):h(vt,!1)},!0)}n(f,u)};_(lt,f=>{e(M)?f(ct):f(pt,!1)},!0)}n(d,y)};_(dt,d=>{e(H)?d(nt):d(ot,!1)})}t(E),n(tt,E),Nt()}export{wa as component};
