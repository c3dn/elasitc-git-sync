import"../chunks/CWj6FrbW.js";import{o as Ra,s as _}from"../chunks/CdzGu8ER.js";import{c as W,f as $,a as o,p as Ma,O as K,P as kt,b as Pa,R as Ta,g as a,d as v,s as c,h as e,$ as Ca,n as Q,r as t,i as r,S as ce,t as j,j as fe,k as ue}from"../chunks/CbRa-Z4u.js";import{i as g}from"../chunks/CoDRCLiZ.js";import{I as xe,s as ye,a as me,e as Sa,b as Na,i as Ga}from"../chunks/DZIrD1K_.js";import{h as Ea}from"../chunks/Bj3l4WMm.js";import{l as he,s as be,a as Fa,b as Oa}from"../chunks/BjUZiTXz.js";import{p as qa}from"../chunks/HGTMDPNe.js";import{g as Ja}from"../chunks/CilZWO1z.js";import{p as ee}from"../chunks/VVSrSIoj.js";import{A as La}from"../chunks/DqI1jT93.js";import{P as Ua,R as Aa}from"../chunks/B0Xgqp6E.js";import{T as Ia}from"../chunks/IMcaUzhR.js";import{T as za,R as Ba}from"../chunks/BWueu3Tx.js";import{C as Rt}from"../chunks/RYdxVmhl.js";import"../chunks/DBRSZtkI.js";import{G as tt}from"../chunks/DYmn1PNj.js";import{C as Da}from"../chunks/CmruH-jB.js";import{F as Ha}from"../chunks/Bycn3Wdy.js";import{L as Te}from"../chunks/B04TN2pU.js";import{C as Va}from"../chunks/BVRwiDW0.js";import{C as Ka}from"../chunks/x6-o1nLb.js";function Qa(U,M){const A=he(M,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["path",{d:"M12 5v14"}],["path",{d:"m19 12-7 7-7-7"}]];xe(U,be({name:"arrow-down"},()=>A,{get iconNode(){return I},children:(z,u)=>{var h=W(),O=$(h);ye(O,M,"default",{}),o(z,h)},$$slots:{default:!0}}))}function Wa(U,M){const A=he(M,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["polyline",{points:"7 10 12 15 17 10"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3"}]];xe(U,be({name:"download"},()=>A,{get iconNode(){return I},children:(z,u)=>{var h=W(),O=$(h);ye(O,M,"default",{}),o(z,h)},$$slots:{default:!0}}))}function Ce(U,M){const A=he(M,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["path",{d:"M15 3h6v6"}],["path",{d:"M10 14 21 3"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}]];xe(U,be({name:"external-link"},()=>A,{get iconNode(){return I},children:(z,u)=>{var h=W(),O=$(h);ye(O,M,"default",{}),o(z,h)},$$slots:{default:!0}}))}function at(U,M){const A=he(M,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["circle",{cx:"18",cy:"18",r:"3"}],["circle",{cx:"6",cy:"6",r:"3"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9"}]];xe(U,be({name:"git-merge"},()=>A,{get iconNode(){return I},children:(z,u)=>{var h=W(),O=$(h);ye(O,M,"default",{}),o(z,h)},$$slots:{default:!0}}))}function Xa(U,M){const A=he(M,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["polyline",{points:"17 8 12 3 7 8"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15"}]];xe(U,be({name:"upload"},()=>A,{get iconNode(){return I},children:(z,u)=>{var h=W(),O=$(h);ye(O,M,"default",{}),o(z,h)},$$slots:{default:!0}}))}var Ya=v('<h1 class="text-3xl font-bold text-gray-900">Loading...</h1>'),Za=v('<p class="mt-1 text-sm text-gray-500"> </p>'),er=v('<h1 class="text-3xl font-bold text-gray-900"> </h1> <!>',1),tr=v('<div class="flex items-center gap-2"><a class="inline-flex items-center gap-2 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"><!> Edit</a> <button class="inline-flex items-center gap-2 px-4 py-2 text-red-600 hover:bg-red-50 border border-red-200 rounded-lg transition-colors"><!></button></div>'),ar=v('<div class="alert bg-red-50 border border-red-200 rounded-lg p-4"><p class="text-sm text-red-800"> </p></div>'),rr=v('<div class="alert bg-green-50 border border-green-200 rounded-lg p-4"><p class="text-sm text-green-800"> </p></div>'),sr=v('<div class="flex items-center justify-center py-12"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div></div>'),nr=v('<p class="text-xs text-gray-500"> </p>'),ir=v("<!> Syncing...",1),or=v("<!> Export to Git",1),lr=v('<div class="space-y-3"><div class="flex items-center justify-between text-sm"><span class="text-gray-600">Rules:</span> <span class="font-semibold text-gray-900"> </span></div> <div class="flex items-center justify-between text-sm"><span class="text-gray-600">Branch:</span> <span class="font-mono text-xs bg-gray-100 px-2 py-0.5 rounded"> </span></div> <button class="btn w-full inline-flex items-center justify-center gap-2 px-4 py-2.5 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 hover:shadow-md transition-all disabled:opacity-50 text-sm font-medium"><!></button></div>'),dr=v('<p class="text-sm text-yellow-700">No test environment configured</p>'),cr=v("<!> Creating...",1),vr=v("<!> Create MR",1),pr=v('<a target="_blank" class="block text-center text-xs text-blue-600 hover:underline">View open MRs <!></a>'),gr=v('<div class="space-y-3"><div class="text-sm text-gray-600"><div class="flex items-center gap-2 mb-1"><!> <span class="font-mono text-xs"> </span></div> <div class="flex items-center justify-center"><!></div> <div class="flex items-center gap-2 mt-1"><!> <span class="font-mono text-xs"> </span></div></div> <button class="btn w-full inline-flex items-center justify-center gap-2 px-4 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 hover:shadow-md transition-all disabled:opacity-50 text-sm font-medium"><!></button> <!></div>'),_r=v('<p class="text-sm text-blue-700">Configure both environments</p>'),fr=v('<p class="text-xs text-gray-500"> </p>'),ur=v("<!> Syncing...",1),mr=v("<!> Import from Git",1),xr=v('<div class="space-y-3"><div class="flex items-center justify-between text-sm"><span class="text-gray-600">Rules:</span> <span class="font-semibold text-gray-900"> </span></div> <div class="flex items-center justify-between text-sm"><span class="text-gray-600">Branch:</span> <span class="font-mono text-xs bg-gray-100 px-2 py-0.5 rounded"> </span></div> <button class="btn w-full inline-flex items-center justify-center gap-2 px-4 py-2.5 bg-green-600 text-white rounded-lg hover:bg-green-700 hover:shadow-md transition-all disabled:opacity-50 text-sm font-medium"><!></button></div>'),yr=v('<p class="text-sm text-green-700">No prod environment configured</p>'),hr=v('<p class="text-sm text-gray-500">No sync jobs yet. Start by exporting from Test.</p>'),br=v('<span class="text-xs text-gray-500 ml-2"> <!> <!></span>'),wr=v('<div class="flex items-center justify-between py-2 px-3 bg-gray-50 rounded-lg"><div class="flex items-center gap-3"><!> <div><span class="text-sm font-medium text-gray-900"><!></span> <!></div></div> <div class="text-right"><span> </span> <p class="text-xs text-gray-500 mt-1"> </p></div></div>'),$r=v('<div class="space-y-2"></div>'),jr=v('<a target="_blank" class="flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"><div class="p-2 bg-orange-100 rounded"><!></div> <div class="flex-1 min-w-0"><div class="text-sm font-medium text-gray-900">Kibana Rules</div> <div class="text-xs text-gray-500 truncate"> </div></div> <!></a>'),kr=v('<a target="_blank" class="flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"><div class="p-2 bg-purple-100 rounded"><!></div> <div class="flex-1 min-w-0"><div class="text-sm font-medium text-gray-900">Git Repository</div> <div class="text-xs text-gray-500 truncate"> </div></div> <!></a> <a target="_blank" class="flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"><div class="p-2 bg-blue-100 rounded"><!></div> <div class="flex-1 min-w-0"><div class="text-sm font-medium text-gray-900">Merge Requests</div> <div class="text-xs text-gray-500">View open MRs</div></div> <!></a>',1),Rr=v('<div class="card p-6 animate-fade-in" style="animation-delay: 100ms; opacity: 0;"><h2 class="text-lg font-semibold text-gray-900 mb-6">Sync Workflow</h2> <div class="flex items-stretch gap-4"><div class="flex-1 bg-yellow-50 border border-yellow-200 rounded-lg p-4"><div class="flex items-center gap-2 mb-3"><div class="p-2 bg-yellow-100 rounded-lg"><!></div> <div><h3 class="font-semibold text-gray-900">Test Environment</h3> <!></div></div> <!></div> <div class="flex items-center"><!></div> <div class="flex-1 bg-blue-50 border border-blue-200 rounded-lg p-4"><div class="flex items-center gap-2 mb-3"><div class="p-2 bg-blue-100 rounded-lg"><!></div> <div><h3 class="font-semibold text-gray-900">Merge Request</h3> <p class="text-xs text-gray-500">Review & Approve</p></div></div> <!></div> <div class="flex items-center"><!></div> <div class="flex-1 bg-green-50 border border-green-200 rounded-lg p-4"><div class="flex items-center gap-2 mb-3"><div class="p-2 bg-green-100 rounded-lg"><!></div> <div><h3 class="font-semibold text-gray-900">Production</h3> <!></div></div> <!></div></div> <div class="mt-6 pt-4 border-t border-gray-200"><h4 class="text-sm font-medium text-gray-700 mb-2">How it works:</h4> <ol class="text-sm text-gray-600 space-y-1"><li class="flex items-start gap-2"><span class="flex-shrink-0 w-5 h-5 bg-yellow-100 text-yellow-700 rounded-full flex items-center justify-center text-xs font-medium">1</span> <span>Export rules from <strong> </strong> to <code class="text-xs bg-gray-100 px-1 rounded"> </code> branch</span></li> <li class="flex items-start gap-2"><span class="flex-shrink-0 w-5 h-5 bg-blue-100 text-blue-700 rounded-full flex items-center justify-center text-xs font-medium">2</span> <span>Create MR from <code class="text-xs bg-gray-100 px-1 rounded"> </code> to <code class="text-xs bg-gray-100 px-1 rounded"> </code>, review and merge</span></li> <li class="flex items-start gap-2"><span class="flex-shrink-0 w-5 h-5 bg-green-100 text-green-700 rounded-full flex items-center justify-center text-xs font-medium">3</span> <span>Import rules from <code class="text-xs bg-gray-100 px-1 rounded"> </code> branch to <strong> </strong></span></li></ol></div></div> <div class="grid grid-cols-1 lg:grid-cols-3 gap-6"><div class="lg:col-span-2 card p-6 animate-fade-in" style="animation-delay: 200ms; opacity: 0;"><div class="flex items-center justify-between mb-4"><h3 class="text-lg font-semibold text-gray-900">Recent Syncs</h3> <button class="text-gray-500 hover:text-gray-700"><!></button></div> <!></div> <div class="card p-6 animate-fade-in" style="animation-delay: 250ms; opacity: 0;"><h3 class="text-lg font-semibold text-gray-900 mb-4">Quick Links</h3> <div class="space-y-3"><!> <!></div> <div class="mt-4 pt-4 border-t border-gray-200 text-xs text-gray-500 space-y-1"><div><strong>Path:</strong> </div> <div><strong>Created:</strong> </div></div></div></div>',1),Mr=v('<div class="space-y-6"><div class="flex items-center justify-between animate-fade-in"><div><a href="/projects" class="inline-flex items-center gap-2 text-sm text-gray-600 hover:text-gray-900 mb-2 transition-colors duration-200"><!> Back to Projects</a> <!></div> <!></div> <!> <!> <!></div>');function Wr(U,M){Ma(M,!0);const A=()=>Oa(qa,"$page",I),[I,z]=Fa();let u=K(null),h=K(kt([])),O=K(kt([])),we=K(!0),q=K(""),te=K(""),$e=K(!1),je=K(!1),ke=K(!1),rt=K(0),st=K(0),X=ce(()=>A().params.id),P=ce(()=>e(h).find(s=>s.name==="test")),T=ce(()=>e(h).find(s=>s.name==="production"));Ra(async()=>{await Mt()});async function Mt(){try{c(we,!0),await Promise.all([Pt(),Tt(),Re(),Se()])}finally{c(we,!1)}}async function Pt(){try{c(u,await ee.collection("projects").getOne(e(X),{expand:"elastic_instance,git_repository"}),!0)}catch(s){c(q,s.message,!0)}}async function Tt(){try{c(h,await ee.collection("environments").getFullList({filter:`project = "${e(X)}"`}),!0)}catch(s){console.error("Failed to load environments:",s)}}async function Re(){try{c(O,await ee.collection("sync_jobs").getFullList({filter:`project = "${e(X)}"`,sort:"-created",perPage:10}),!0)}catch(s){console.error("Failed to load sync jobs:",s)}}async function Se(){try{const s=await fetch(`${ee.baseUrl}/api/project/${e(X)}/metrics`);if(s.ok){const l=await s.json();c(rt,l.test_rules||0,!0),c(st,l.prod_rules||0,!0)}}catch(s){console.error("Failed to load metrics:",s)}}async function Ct(){if(e(P))try{c($e,!0),c(q,""),c(te,"");const l=await(await fetch(`${ee.baseUrl}/api/sync/trigger`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_id:e(X),environment_id:e(P).id,direction:"elastic_to_git",branch:e(P).git_branch,space:e(P).elastic_space})})).json();l.success?(c(te,l.message,!0),await Re(),await Se()):c(q,l.message||"Failed to sync",!0)}catch(s){c(q,s.message,!0)}finally{c($e,!1)}}async function St(){if(!(!e(P)||!e(T)))try{c(ke,!0),c(q,""),c(te,"");const l=await(await fetch(`${ee.baseUrl}/api/merge-request/create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_id:e(X),source_branch:e(P).git_branch,target_branch:e(T).git_branch,title:`[Elastic Git Sync] Promote rules from ${e(P).elastic_space} to ${e(T).elastic_space}`})})).json();l.success&&l.url?(c(te,"Merge Request created! Opening in new tab..."),window.open(l.url,"_blank")):c(q,l.message||"Failed to create Merge Request",!0)}catch(s){c(q,s.message,!0)}finally{c(ke,!1)}}async function Nt(){if(e(T))try{c(je,!0),c(q,""),c(te,"");const l=await(await fetch(`${ee.baseUrl}/api/sync/trigger`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_id:e(X),environment_id:e(T).id,direction:"git_to_elastic",branch:e(T).git_branch,space:e(T).elastic_space})})).json();l.success?(c(te,l.message,!0),await Re(),await Se()):c(q,l.message||"Failed to sync",!0)}catch(s){c(q,s.message,!0)}finally{c(je,!1)}}async function Gt(){if(confirm("Are you sure you want to delete this project? This cannot be undone."))try{for(const s of e(h))await ee.collection("environments").delete(s.id);await ee.collection("projects").delete(e(X)),Ja("/projects")}catch(s){c(q,s.message,!0)}}function Et(s){switch(s){case"completed":return"text-green-600";case"failed":return"text-red-600";case"running":return"text-blue-600";default:return"text-gray-600"}}function Ft(s){switch(s){case"completed":return"bg-green-100";case"failed":return"bg-red-100";case"running":return"bg-blue-100";default:return"bg-gray-100"}}function Ot(s){if(!s)return"Never";const l=new Date(s),B=new Date().getTime()-l.getTime(),C=Math.floor(B/6e4);if(C<1)return"Just now";if(C<60)return`${C}m ago`;const D=Math.floor(C/60);return D<24?`${D}h ago`:`${Math.floor(D/24)}d ago`}function nt(s){return(s==null?void 0:s.replace(/\.git$/,""))||""}var Ne=Mr();Ea("ffmenf",s=>{Ta(()=>{var l;Ca.title=`${(((l=e(u))==null?void 0:l.name)||"Project")??""} - Elastic Git Sync`})});var Ge=a(Ne),Ee=a(Ge),Fe=a(Ee),qt=a(Fe);La(qt,{class:"w-4 h-4 transition-transform duration-200 hover:-translate-x-1"}),Q(),t(Fe);var Jt=r(Fe,2);{var Lt=s=>{var l=Ya();o(s,l)},Ut=s=>{var l=W(),S=$(l);{var B=C=>{var D=er(),ae=$(D),ve=a(ae,!0);t(ae);var pe=r(ae,2);{var ge=se=>{var _e=Za(),Me=a(_e,!0);t(_e),j(()=>_(Me,e(u).description)),o(se,_e)};g(pe,se=>{e(u).description&&se(ge)})}j(()=>_(ve,e(u).name)),o(C,D)};g(S,C=>{e(u)&&C(B)},!0)}o(s,l)};g(Jt,s=>{e(we)?s(Lt):s(Ut,!1)})}t(Ee);var At=r(Ee,2);{var It=s=>{var l=tr(),S=a(l),B=a(S);Ua(B,{class:"w-4 h-4"}),Q(),t(S);var C=r(S,2),D=a(C);Ia(D,{class:"w-4 h-4"}),t(C),t(l),j(()=>me(S,"href",`/projects/${e(X)??""}/edit`)),fe("click",C,Gt),o(s,l)};g(At,s=>{e(u)&&s(It)})}t(Ge);var it=r(Ge,2);{var zt=s=>{var l=ar(),S=a(l),B=a(S,!0);t(S),t(l),j(()=>_(B,e(q))),o(s,l)};g(it,s=>{e(q)&&s(zt)})}var ot=r(it,2);{var Bt=s=>{var l=rr(),S=a(l),B=a(S,!0);t(S),t(l),j(()=>_(B,e(te))),o(s,l)};g(ot,s=>{e(te)&&s(Bt)})}var Dt=r(ot,2);{var Ht=s=>{var l=sr();o(s,l)},Vt=s=>{var l=W(),S=$(l);{var B=C=>{var D=Rr(),ae=$(D),ve=r(a(ae),2),pe=a(ve),ge=a(pe),se=a(ge),_e=a(se);za(_e,{class:"w-5 h-5 text-yellow-600"}),t(se);var Me=r(se,2),Kt=r(a(Me),2);{var Qt=n=>{var i=nr(),p=a(i,!0);t(i),j(()=>_(p,e(P).elastic_space)),o(n,i)};g(Kt,n=>{e(P)&&n(Qt)})}t(Me),t(ge);var Wt=r(ge,2);{var Xt=n=>{var i=lr(),p=a(i),d=r(a(p),2),b=a(d,!0);t(d),t(p);var m=r(p,2),y=r(a(m),2),E=a(y,!0);t(y),t(m);var k=r(m,2),H=a(k);{var F=w=>{var x=ir(),V=$(x);Te(V,{class:"w-4 h-4 animate-spin"}),Q(),o(w,x)},L=w=>{var x=or(),V=$(x);Xa(V,{class:"w-4 h-4"}),Q(),o(w,x)};g(H,w=>{e($e)?w(F):w(L,!1)})}t(k),t(i),j(()=>{_(b,e(rt)),_(E,e(P).git_branch),k.disabled=e($e)}),fe("click",k,Ct),o(n,i)},Yt=n=>{var i=dr();o(n,i)};g(Wt,n=>{e(P)?n(Xt):n(Yt,!1)})}t(pe);var Oe=r(pe,2),Zt=a(Oe);Rt(Zt,{class:"w-8 h-8 text-gray-300"}),t(Oe);var qe=r(Oe,2),Je=a(qe),lt=a(Je),ea=a(lt);at(ea,{class:"w-5 h-5 text-blue-600"}),t(lt),Q(2),t(Je);var ta=r(Je,2);{var aa=n=>{var i=gr(),p=a(i),d=a(p),b=a(d);tt(b,{class:"w-4 h-4"});var m=r(b,2),y=a(m,!0);t(m),t(d);var E=r(d,2),k=a(E);Qa(k,{class:"w-4 h-4 text-gray-400"}),t(E);var H=r(E,2),F=a(H);tt(F,{class:"w-4 h-4"});var L=r(F,2),w=a(L,!0);t(L),t(H),t(p);var x=r(p,2),V=a(x);{var Ye=J=>{var N=cr(),f=$(N);Te(f,{class:"w-4 h-4 animate-spin"}),Q(),o(J,N)},Pe=J=>{var N=vr(),f=$(N);at(f,{class:"w-4 h-4"}),Q(),o(J,N)};g(V,J=>{e(ke)?J(Ye):J(Pe,!1)})}t(x);var ie=r(x,2);{var Ze=J=>{var N=pr(),f=r(a(N));Ce(f,{class:"w-3 h-3 inline"}),t(N),j(R=>me(N,"href",`${R??""}/-/merge_requests`),[()=>nt(e(u).expand.git_repository.url)]),o(J,N)};g(ie,J=>{var N;(N=e(u).expand)!=null&&N.git_repository&&J(Ze)})}t(i),j(()=>{_(y,e(P).git_branch),_(w,e(T).git_branch),x.disabled=e(ke)}),fe("click",x,St),o(n,i)},ra=n=>{var i=_r();o(n,i)};g(ta,n=>{e(P)&&e(T)?n(aa):n(ra,!1)})}t(qe);var Le=r(qe,2),sa=a(Le);Rt(sa,{class:"w-8 h-8 text-gray-300"}),t(Le);var dt=r(Le,2),Ue=a(dt),Ae=a(Ue),na=a(Ae);Ba(na,{class:"w-5 h-5 text-green-600"}),t(Ae);var ct=r(Ae,2),ia=r(a(ct),2);{var oa=n=>{var i=fr(),p=a(i,!0);t(i),j(()=>_(p,e(T).elastic_space)),o(n,i)};g(ia,n=>{e(T)&&n(oa)})}t(ct),t(Ue);var la=r(Ue,2);{var da=n=>{var i=xr(),p=a(i),d=r(a(p),2),b=a(d,!0);t(d),t(p);var m=r(p,2),y=r(a(m),2),E=a(y,!0);t(y),t(m);var k=r(m,2),H=a(k);{var F=w=>{var x=ur(),V=$(x);Te(V,{class:"w-4 h-4 animate-spin"}),Q(),o(w,x)},L=w=>{var x=mr(),V=$(x);Wa(V,{class:"w-4 h-4"}),Q(),o(w,x)};g(H,w=>{e(je)?w(F):w(L,!1)})}t(k),t(i),j(()=>{_(b,e(st)),_(E,e(T).git_branch),k.disabled=e(je)}),fe("click",k,Nt),o(n,i)},ca=n=>{var i=yr();o(n,i)};g(la,n=>{e(T)?n(da):n(ca,!1)})}t(dt),t(ve);var vt=r(ve,2),pt=r(a(vt),2),Ie=a(pt),gt=r(a(Ie),2),ze=r(a(gt)),va=a(ze,!0);t(ze);var _t=r(ze,2),pa=a(_t,!0);t(_t),Q(),t(gt),t(Ie);var Be=r(Ie,2),ft=r(a(Be),2),De=r(a(ft)),ga=a(De,!0);t(De);var ut=r(De,2),_a=a(ut,!0);t(ut),Q(),t(ft),t(Be);var mt=r(Be,2),xt=r(a(mt),2),He=r(a(xt)),fa=a(He,!0);t(He);var yt=r(He,2),ua=a(yt,!0);t(yt),t(xt),t(mt),t(pt),t(vt),t(ae);var ht=r(ae,2),Ve=a(ht),Ke=a(Ve),Qe=r(a(Ke),2),ma=a(Qe);Aa(ma,{class:"w-4 h-4"}),t(Qe),t(Ke);var xa=r(Ke,2);{var ya=n=>{var i=hr();o(n,i)},ha=n=>{var i=$r();Sa(i,21,()=>e(O).slice(0,5),Ga,(p,d)=>{var b=wr(),m=a(b),y=a(m);{var E=f=>{Da(f,{class:"w-4 h-4 text-green-600"})},k=f=>{var R=W(),Y=$(R);{var oe=G=>{Va(G,{class:"w-4 h-4 text-red-600"})},le=G=>{var re=W(),et=$(re);{var Z=de=>{Te(de,{class:"w-4 h-4 text-blue-600 animate-spin"})},ne=de=>{Ka(de,{class:"w-4 h-4 text-yellow-600"})};g(et,de=>{e(d).status==="running"?de(Z):de(ne,!1)},!0)}o(G,re)};g(Y,G=>{e(d).status==="failed"?G(oe):G(le,!1)},!0)}o(f,R)};g(y,f=>{e(d).status==="completed"?f(E):f(k,!1)})}var H=r(y,2),F=a(H),L=a(F);{var w=f=>{var R=ue("Export to Git");o(f,R)},x=f=>{var R=W(),Y=$(R);{var oe=G=>{var re=ue("Import from Git");o(G,re)},le=G=>{var re=ue("Bidirectional");o(G,re)};g(Y,G=>{e(d).direction==="git_to_elastic"?G(oe):G(le,!1)},!0)}o(f,R)};g(L,f=>{e(d).direction==="elastic_to_git"?f(w):f(x,!1)})}t(F);var V=r(F,2);{var Ye=f=>{const R=ce(()=>typeof e(d).changes_summary=="string"?JSON.parse(e(d).changes_summary):e(d).changes_summary);var Y=br(),oe=a(Y),le=r(oe);{var G=Z=>{var ne=ue();j(()=>_(ne,`, ${e(R).deleted??""} deleted`)),o(Z,ne)};g(le,Z=>{e(R).deleted&&Z(G)})}var re=r(le,2);{var et=Z=>{var ne=ue();j(()=>_(ne,`, ${e(R).imported??""} imported`)),o(Z,ne)};g(re,Z=>{e(R).imported&&Z(et)})}t(Y),j(()=>_(oe,`${(e(R).exported||0)??""} exported `)),o(f,Y)};g(V,f=>{e(d).changes_summary&&f(Ye)})}t(H),t(m);var Pe=r(m,2),ie=a(Pe),Ze=a(ie,!0);t(ie);var J=r(ie,2),N=a(J,!0);t(J),t(Pe),t(b),j((f,R,Y)=>{Na(ie,1,`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${f??""} ${R??""}`),_(Ze,e(d).status),_(N,Y)},[()=>Ft(e(d).status),()=>Et(e(d).status),()=>Ot(e(d).created)]),o(p,b)}),t(i),o(n,i)};g(xa,n=>{e(O).length===0?n(ya):n(ha,!1)})}t(Ve);var bt=r(Ve,2),We=r(a(bt),2),wt=a(We);{var ba=n=>{const i=ce(()=>e(u).expand.elastic_instance.url);var p=jr(),d=a(p),b=a(d);Ha(b,{class:"w-4 h-4 text-orange-600"}),t(d);var m=r(d,2),y=r(a(m),2),E=a(y,!0);t(y),t(m);var k=r(m,2);Ce(k,{class:"w-4 h-4 text-gray-400"}),t(p),j(()=>{me(p,"href",`${e(i)??""}/app/security/rules`),_(E,e(u).expand.elastic_instance.name)}),o(n,p)};g(wt,n=>{var i;(i=e(u).expand)!=null&&i.elastic_instance&&n(ba)})}var wa=r(wt,2);{var $a=n=>{const i=ce(()=>nt(e(u).expand.git_repository.url));var p=kr(),d=$(p),b=a(d),m=a(b);tt(m,{class:"w-4 h-4 text-purple-600"}),t(b);var y=r(b,2),E=r(a(y),2),k=a(E,!0);t(E),t(y);var H=r(y,2);Ce(H,{class:"w-4 h-4 text-gray-400"}),t(d);var F=r(d,2),L=a(F),w=a(L);at(w,{class:"w-4 h-4 text-blue-600"}),t(L);var x=r(L,4);Ce(x,{class:"w-4 h-4 text-gray-400"}),t(F),j(()=>{me(d,"href",e(i)),_(k,e(u).expand.git_repository.name),me(F,"href",`${e(i)??""}/-/merge_requests`)}),o(n,p)};g(wa,n=>{var i;(i=e(u).expand)!=null&&i.git_repository&&n($a)})}t(We);var $t=r(We,2),Xe=a($t),ja=r(a(Xe));t(Xe);var jt=r(Xe,2),ka=r(a(jt));t(jt),t($t),t(bt),t(ht),j(n=>{var i,p,d,b,m,y;_(va,((i=e(P))==null?void 0:i.elastic_space)||"Test"),_(pa,((p=e(P))==null?void 0:p.git_branch)||"develop"),_(ga,((d=e(P))==null?void 0:d.git_branch)||"develop"),_(_a,((b=e(T))==null?void 0:b.git_branch)||"main"),_(fa,((m=e(T))==null?void 0:m.git_branch)||"main"),_(ua,((y=e(T))==null?void 0:y.elastic_space)||"Production"),_(ja,` ${(e(u).git_path||"/")??""}`),_(ka,` ${n??""}`)},[()=>new Date(e(u).created).toLocaleDateString()]),fe("click",Qe,Re),o(C,D)};g(S,C=>{e(u)&&C(B)},!0)}o(s,l)};g(Dt,s=>{e(we)?s(Ht):s(Vt,!1)})}t(Ne),o(U,Ne),Pa(),z()}export{Wr as component};
