var k=Object.defineProperty;var U=s=>{throw TypeError(s)};var ee=(s,e,r)=>e in s?k(s,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[e]=r;var j=(s,e,r)=>ee(s,typeof e!="symbol"?e+"":e,r),Y=(s,e,r)=>e.has(s)||U("Cannot "+r);var n=(s,e,r)=>(Y(s,e,"read from private field"),r?r.call(s):e.get(s)),h=(s,e,r)=>e.has(s)?U("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,r),K=(s,e,r,t)=>(Y(s,e,"write to private field"),t?t.call(s,r):e.set(s,r),r);import{z as $,a5 as se,a6 as A,a7 as re,J as q,a8 as z,y as te,N as ne,a9 as ie,aa as ae,ab as fe,ac as ue,ad as C,m as ce,ae as oe,af as le,i as g,s as J,ag as E,ah as de,ai as W,R as pe,aj as T,ak as he,al as _e,am as ve,w as be,an as me,ao as Pe,ap as Se,a3 as we,k as ge,W as F,aq as G,ar as w,as as Z,at as H,au as Oe,av as ye}from"./C9NYA0Nw.js";var l,p,c,_,O,y,D;class Me{constructor(e,r=!0){j(this,"anchor");h(this,l,new Map);h(this,p,new Map);h(this,c,new Map);h(this,_,new Set);h(this,O,!0);h(this,y,()=>{var e=$;if(n(this,l).has(e)){var r=n(this,l).get(e),t=n(this,p).get(r);if(t)se(t),n(this,_).delete(r);else{var i=n(this,c).get(r);i&&(n(this,p).set(r,i.effect),n(this,c).delete(r),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),t=i.effect)}for(const[a,o]of n(this,l)){if(n(this,l).delete(a),a===e)break;const f=n(this,c).get(o);f&&(A(f.effect),n(this,c).delete(o))}for(const[a,o]of n(this,p)){if(a===r||n(this,_).has(a))continue;const f=()=>{if(Array.from(n(this,l).values()).includes(a)){var v=document.createDocumentFragment();ie(o,v),v.append(q()),n(this,c).set(a,{effect:o,fragment:v})}else A(o);n(this,_).delete(a),n(this,p).delete(a)};n(this,O)||!t?(n(this,_).add(a),re(o,f,!1)):f()}}});h(this,D,e=>{n(this,l).delete(e);const r=Array.from(n(this,l).values());for(const[t,i]of n(this,c))r.includes(t)||(A(i.effect),n(this,c).delete(t))});this.anchor=e,K(this,O,r)}ensure(e,r){var t=$,i=ae();if(r&&!n(this,p).has(e)&&!n(this,c).has(e))if(i){var a=document.createDocumentFragment(),o=q();a.append(o),n(this,c).set(e,{effect:z(()=>r(o)),fragment:a})}else n(this,p).set(e,z(()=>r(this.anchor)));if(n(this,l).set(t,e),i){for(const[f,d]of n(this,p))f===e?t.skipped_effects.delete(d):t.skipped_effects.add(d);for(const[f,d]of n(this,c))f===e?t.skipped_effects.delete(d.effect):t.skipped_effects.add(d.effect);t.oncommit(n(this,y)),t.ondiscard(n(this,D))}else te&&(this.anchor=ne),n(this,y).call(this)}}l=new WeakMap,p=new WeakMap,c=new WeakMap,_=new WeakMap,O=new WeakMap,y=new WeakMap,D=new WeakMap;let I=!1,M=Symbol();function Te(s,e,r){const t=r[e]??(r[e]={store:null,source:ce(void 0),unsubscribe:C});if(t.store!==s&&!(M in r))if(t.unsubscribe(),t.store=s??null,s==null)t.source.v=void 0,t.unsubscribe=C;else{var i=!0;t.unsubscribe=oe(s,a=>{i?t.source.v=a:J(t.source,a)}),i=!1}return s&&M in r?le(s):g(t.source)}function Be(){const s={};function e(){fe(()=>{for(var r in s)s[r].unsubscribe();ue(s,M,{enumerable:!1,value:!0})})}return[s,e]}function xe(s){var e=I;try{return I=!1,[s(),I]}finally{I=e}}const Ie={get(s,e){if(!s.exclude.includes(e))return g(s.version),e in s.special?s.special[e]():s.props[e]},set(s,e,r){if(!(e in s.special)){var t=T;try{G(s.parent_effect),s.special[e]=Re({get[e](){return s.props[e]}},e,W)}finally{G(t)}}return s.special[e](r),F(s.version),!0},getOwnPropertyDescriptor(s,e){if(!s.exclude.includes(e)&&e in s.props)return{enumerable:!0,configurable:!0,value:s.props[e]}},deleteProperty(s,e){return s.exclude.includes(e)||(s.exclude.push(e),F(s.version)),!0},has(s,e){return s.exclude.includes(e)?!1:e in s.props},ownKeys(s){return Reflect.ownKeys(s.props).filter(e=>!s.exclude.includes(e))}};function Le(s,e){return new Proxy({props:s,exclude:e,special:{},version:_e(0),parent_effect:T},Ie)}const De={get(s,e){let r=s.props.length;for(;r--;){let t=s.props[r];if(w(t)&&(t=t()),typeof t=="object"&&t!==null&&e in t)return t[e]}},set(s,e,r){let t=s.props.length;for(;t--;){let i=s.props[t];w(i)&&(i=i());const a=E(i,e);if(a&&a.set)return a.set(r),!0}return!1},getOwnPropertyDescriptor(s,e){let r=s.props.length;for(;r--;){let t=s.props[r];if(w(t)&&(t=t()),typeof t=="object"&&t!==null&&e in t){const i=E(t,e);return i&&!i.configurable&&(i.configurable=!0),i}}},has(s,e){if(e===Z||e===H)return!1;for(let r of s.props)if(w(r)&&(r=r()),r!=null&&e in r)return!0;return!1},ownKeys(s){const e=[];for(let r of s.props)if(w(r)&&(r=r()),!!r){for(const t in r)e.includes(t)||e.push(t);for(const t of Object.getOwnPropertySymbols(r))e.includes(t)||e.push(t)}return e}};function Ne(...s){return new Proxy({props:s},De)}function Re(s,e,r,t){var L;var i=!me||(r&Pe)!==0,a=(r&ve)!==0,o=(r&Oe)!==0,f=t,d=!0,v=()=>(d&&(d=!1,f=o?be(t):t),f),m;if(a){var Q=Z in s||H in s;m=((L=E(s,e))==null?void 0:L.set)??(Q&&e in s?u=>s[e]=u:void 0)}var P,B=!1;a?[P,B]=xe(()=>s[e]):P=s[e],P===void 0&&t!==void 0&&(P=v(),m&&(i&&de(),m(P)));var b;if(i?b=()=>{var u=s[e];return u===void 0?v():(d=!0,u)}:b=()=>{var u=s[e];return u!==void 0&&(f=void 0),u===void 0?f:u},i&&!(r&W))return b;if(m){var V=s.$$legacy;return function(u,x){return arguments.length>0?((!i||!x||V||B)&&m(x?b():u),u):b()}}var R=!1,S=(r&Se?we:ge)(()=>(R=!1,b()));a&&g(S);var X=T;return function(u,x){if(arguments.length>0){const N=x?g(S):i&&a?pe(u):u;return J(S,N),R=!0,f!==void 0&&(f=N),u}return ye&&R||X.f&he?S.v:g(S)}}export{Me as B,Be as a,Te as b,Le as l,Re as p,Ne as s};
