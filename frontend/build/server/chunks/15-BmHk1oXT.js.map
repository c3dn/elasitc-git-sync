{"version":3,"file":"15-BmHk1oXT.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/settings/account/_page.server.ts.js","../../../.svelte-kit/adapter-node/nodes/15.js"],"sourcesContent":["import { fail } from \"@sveltejs/kit\";\nconst actions = {\n  changePassword: async ({ locals, request }) => {\n    const formData = await request.formData();\n    const oldPassword = formData.get(\"oldPassword\");\n    const newPassword = formData.get(\"newPassword\");\n    const confirmPassword = formData.get(\"confirmPassword\");\n    if (!oldPassword || !newPassword || !confirmPassword) {\n      return fail(400, { error: \"All fields are required\" });\n    }\n    if (newPassword.length < 8) {\n      return fail(400, { error: \"New password must be at least 8 characters\" });\n    }\n    if (newPassword !== confirmPassword) {\n      return fail(400, { error: \"New passwords do not match\" });\n    }\n    if (oldPassword === newPassword) {\n      return fail(400, { error: \"New password must be different from current password\" });\n    }\n    try {\n      await locals.pb.collection(\"users\").update(locals.user.id, {\n        oldPassword,\n        password: newPassword,\n        passwordConfirm: confirmPassword\n      });\n      await locals.pb.collection(\"users\").authWithPassword(locals.user.email, newPassword);\n      return { success: true };\n    } catch (err) {\n      console.error(\"Password change error:\", err);\n      const message = err?.response?.data?.oldPassword?.message || err?.message || \"Failed to change password\";\n      return fail(400, { error: message });\n    }\n  }\n};\nexport {\n  actions\n};\n","import * as server from '../entries/pages/settings/account/_page.server.ts.js';\n\nexport const index = 15;\nlet component_cache;\nexport const component = async () => component_cache ??= (await import('../entries/pages/settings/account/_page.svelte.js')).default;\nexport { server };\nexport const server_id = \"src/routes/settings/account/+page.server.ts\";\nexport const imports = [\"_app/immutable/nodes/15.DFgV1Bvk.js\",\"_app/immutable/chunks/CWj6FrbW.js\",\"_app/immutable/chunks/C9NYA0Nw.js\",\"_app/immutable/chunks/O7RWNxBF.js\",\"_app/immutable/chunks/D2ldot_M.js\",\"_app/immutable/chunks/Cs0PMOxO.js\",\"_app/immutable/chunks/k5AYXn5z.js\",\"_app/immutable/chunks/CZgNezH3.js\",\"_app/immutable/chunks/DUTeUus3.js\",\"_app/immutable/chunks/TVtqyaYP.js\",\"_app/immutable/chunks/BVIc4OKz.js\",\"_app/immutable/chunks/Dl2LfGm4.js\",\"_app/immutable/chunks/z_jCEgha.js\",\"_app/immutable/chunks/BF4Or9KR.js\",\"_app/immutable/chunks/DYGQewJa.js\",\"_app/immutable/chunks/Bo3rhy3K.js\"];\nexport const stylesheets = [];\nexport const fonts = [];\n"],"names":[],"mappings":";;AACA,MAAM,OAAO,GAAG;AAChB,EAAE,cAAc,EAAE,OAAO,EAAE,MAAM,EAAE,OAAO,EAAE,KAAK;AACjD,IAAI,MAAM,QAAQ,GAAG,MAAM,OAAO,CAAC,QAAQ,EAAE;AAC7C,IAAI,MAAM,WAAW,GAAG,QAAQ,CAAC,GAAG,CAAC,aAAa,CAAC;AACnD,IAAI,MAAM,WAAW,GAAG,QAAQ,CAAC,GAAG,CAAC,aAAa,CAAC;AACnD,IAAI,MAAM,eAAe,GAAG,QAAQ,CAAC,GAAG,CAAC,iBAAiB,CAAC;AAC3D,IAAI,IAAI,CAAC,WAAW,IAAI,CAAC,WAAW,IAAI,CAAC,eAAe,EAAE;AAC1D,MAAM,OAAO,IAAI,CAAC,GAAG,EAAE,EAAE,KAAK,EAAE,yBAAyB,EAAE,CAAC;AAC5D,IAAI;AACJ,IAAI,IAAI,WAAW,CAAC,MAAM,GAAG,CAAC,EAAE;AAChC,MAAM,OAAO,IAAI,CAAC,GAAG,EAAE,EAAE,KAAK,EAAE,4CAA4C,EAAE,CAAC;AAC/E,IAAI;AACJ,IAAI,IAAI,WAAW,KAAK,eAAe,EAAE;AACzC,MAAM,OAAO,IAAI,CAAC,GAAG,EAAE,EAAE,KAAK,EAAE,4BAA4B,EAAE,CAAC;AAC/D,IAAI;AACJ,IAAI,IAAI,WAAW,KAAK,WAAW,EAAE;AACrC,MAAM,OAAO,IAAI,CAAC,GAAG,EAAE,EAAE,KAAK,EAAE,sDAAsD,EAAE,CAAC;AACzF,IAAI;AACJ,IAAI,IAAI;AACR,MAAM,MAAM,MAAM,CAAC,EAAE,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,EAAE;AACjE,QAAQ,WAAW;AACnB,QAAQ,QAAQ,EAAE,WAAW;AAC7B,QAAQ,eAAe,EAAE;AACzB,OAAO,CAAC;AACR,MAAM,MAAM,MAAM,CAAC,EAAE,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC,gBAAgB,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,EAAE,WAAW,CAAC;AAC1F,MAAM,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE;AAC9B,IAAI,CAAC,CAAC,OAAO,GAAG,EAAE;AAClB,MAAM,OAAO,CAAC,KAAK,CAAC,wBAAwB,EAAE,GAAG,CAAC;AAClD,MAAM,MAAM,OAAO,GAAG,GAAG,EAAE,QAAQ,EAAE,IAAI,EAAE,WAAW,EAAE,OAAO,IAAI,GAAG,EAAE,OAAO,IAAI,2BAA2B;AAC9G,MAAM,OAAO,IAAI,CAAC,GAAG,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,CAAC;AAC1C,IAAI;AACJ,EAAE;AACF,CAAC;;;;;;;AC/BW,MAAC,KAAK,GAAG;AACrB,IAAI,eAAe;AACP,MAAC,SAAS,GAAG,YAAY,eAAe,KAAK,CAAC,MAAM,OAAO,4BAAmD,CAAC,EAAE;AAEjH,MAAC,SAAS,GAAG;AACb,MAAC,OAAO,GAAG,CAAC,qCAAqC,CAAC,mCAAmC,CAAC,mCAAmC,CAAC,mCAAmC,CAAC,mCAAmC,CAAC,mCAAmC,CAAC,mCAAmC,CAAC,mCAAmC,CAAC,mCAAmC,CAAC,mCAAmC,CAAC,mCAAmC,CAAC,mCAAmC,CAAC,mCAAmC,CAAC,mCAAmC,CAAC,mCAAmC,CAAC,mCAAmC;AAC7kB,MAAC,WAAW,GAAG;AACf,MAAC,KAAK,GAAG;;;;"}